!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.DTConsoleApp=t():e.DTConsoleApp=t()}(window,(function(){return(window["webpackJsonp_console-ui"]=window["webpackJsonp_console-ui"]||[]).push([[3],{"+5i3":function(e,t,n){},"+CR5":function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("pNMO"),n("ma9I"),n("TeQF"),n("QWBl"),n("yq1k"),n("2B1R"),n("+2oP"),n("sMBO"),n("qePV"),n("zKZe"),n("HRxU"),n("eoL8"),n("T63A"),n("5DmW"),n("27RR"),n("tkto"),n("rB9j"),n("JTJg"),n("EnZy"),n("FZtP"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("N9UN")),o=r(n("4IMT")),u=r(n("d1El")),i=r(n("Pbn2")),s=r(n("g4D/")),c=r(n("B8+X")),d=r(n("pVnL")),f=r(n("qPIi")),p=r(n("Y/VR")),m=r(n("o0o1")),E=r(n("QpBz")),v=r(n("lSNA"));n("ls82");var T=r(n("yXPU")),h=r(n("J4zp")),y=r(n("iJl9")),S=r(n("FAat")),g=r(n("qu0K")),N=a(n("q1tI")),C=n("LvDl"),b=r(n("j+Cx")),O=r(n("RHHV")),_=n("RzPm"),P=n("OHU0");function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,v.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=g.default.Item,I=S.default.Option,k=y.default.TextArea,D={wrapperCol:{xs:{span:24},sm:{span:9}}},j=g.default.create({onValuesChange:function(e,t){t.hasOwnProperty("alertGateType")&&e.form.setFieldsValue({alertGateCode:void 0,alertGateJson:void 0})},mapPropsToFields:function(e){var t,n=null===(t=e.location.state)||void 0===t?void 0:t.ruleData;if(n){for(var a={},r=(0,C.cloneDeep)(n),l=0,o=Object.entries(r);l<o.length;l++){var u=(0,h.default)(o[l],2),i=u[0],s=u[1];a=Object.assign({},a,(0,v.default)({},i,g.default.createFormField({value:s})))}return a}}})((function(e){var t,n,a,r,C,R=(0,N.useState)([]),j=(0,h.default)(R,2),M=j[0],w=j[1],F=e.form,U=F.getFieldDecorator,x=F.getFieldValue,V=F.validateFields,K=F.setFieldsValue,Y=null===(t=e.location.state)||void 0===t?void 0:t.id,q=null===(n=e.location.state)||void 0===n?void 0:n.ruleData,B=x("alertGateType")===_.ALARM_TYPE.EMAIL,H=function(){V(function(){var e=(0,T.default)(m.default.mark((function e(t,n){var a,r,l,o,u;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=7;break}return o=(0,P.textAlertKey)(n.alertGateType),u=n.alertGateType!==_.ALARM_TYPE.CUSTOM?n[o].split(","):"",e.next=5,O.default.testAlert(Object.assign({},n,(0,v.default)({id:Y||"",filePath:(null==q?void 0:q.filePath)||"",isDefault:n.isDefault?1:0,file:null!==(a=null!==(r=null==n||null===(l=n.file)||void 0===l?void 0:l.file)&&void 0!==r?r:null==n?void 0:n.file)&&void 0!==a?a:""},o,u)));case 5:1===e.sent.code&&E.default.success("消息已发送");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},G=function(){e.router.push("/console/alarmChannel")},Q=function(e,t,n){var a=e.name;!a||/\.(jar)$/.test(a.toLocaleLowerCase())?n&&n():E.default.warning(t)},J={name:"file",accept:".jar",beforeUpload:function(e){return Q(e,"jar文件只能是.jar文件",(function(){var t=[e];t=t.slice(-1),w(t)})),!1},onRemove:function(){w([]),K({file:void 0})},fileList:M},z={name:"configFile",accept:".jar",beforeUpload:function(e){return Q(e,"配置文件只能是.jar文件",(function(){K((0,v.default)({},"file",e))})),!1},fileList:[]},W=B?"邮箱":"手机号码",X=(0,P.textAlertKey)(x("alertGateType")),Z=b.default.getParameterByName("isCreate"),$=x("alertGateType"),ee=x("alertGateCode");return N.default.createElement("div",{className:"alarm-rule__wrapper"},N.default.createElement(p.default,null,N.default.createElement(p.default.Item,null," ",N.default.createElement("a",{onClick:function(){e.router.push("/console/alarmChannel")}},"告警通道")),N.default.createElement(p.default.Item,null,"".concat(Z?"新增告警通道":"".concat(null==q?void 0:q.alertGateName)))),N.default.createElement(l.default,{bordered:!1},N.default.createElement(g.default,null,N.default.createElement(L,(0,d.default)({},A(A({},_.formItemCenterLayout),D),{label:"通道类型"}),U("alertGateType",{rules:[{required:!0,message:"请选择通道类型"}],initialValue:_.ALARM_TYPE.MSG})(N.default.createElement(f.default.Group,{name:"channelMode",onChange:function(){x("file")&&K((0,v.default)({},"file","")),w([])},disabled:!Z},Object.entries(_.ALARM_TYPE_TEXT).map((function(e){var t=(0,h.default)(e,2),n=t[0],a=t[1];return N.default.createElement(f.default,{key:n,value:Number(n)},a)}))))),(0,P.showAlertGateCode)($)&&N.default.createElement(L,(0,d.default)({},_.formItemCenterLayout,{label:"通道模式"}),U("alertGateCode",{rules:[{required:!0,message:"请选择通道模式"}]})(N.default.createElement(S.default,null,function(){switch(x("alertGateType")){case _.ALARM_TYPE.MSG:return _.CHANNEL_MODE.sms.map((function(e,t){return N.default.createElement(I,{value:e.value,key:"".concat(t)},e.title)}));case _.ALARM_TYPE.EMAIL:return _.CHANNEL_MODE.mail.map((function(e,t){return N.default.createElement(I,{value:e.value,key:"".concat(t)},e.title)}));case _.ALARM_TYPE.DING:return _.CHANNEL_MODE.dingTalk.map((function(e,t){return N.default.createElement(I,{value:e.value,key:"".concat(t)},e.title)}));default:return[]}}()))),(null==ee?void 0:ee.includes("jar"))&&!(0,P.showConfigFile)($)?N.default.createElement(L,(0,d.default)({},_.formItemCenterLayout,{label:"上传文件"}),U("file",{rules:[{required:!1}]})(N.default.createElement(c.default,J,N.default.createElement("a",{href:"javascript:;"},"选择jar文件"))),(null==q?void 0:q.filePath)&&!x("file")&&N.default.createElement("span",null,null==q?void 0:q.filePath)):null,N.default.createElement(L,(0,d.default)({},_.formItemCenterLayout,{label:"通道标识"}),U("alertGateSource",{rules:[{required:!0,message:"请输入通道标识"},{max:32,message:"通道标识不超过32个字符"},{pattern:/^[A-Za-z0-9_]+$/,message:"只支持英文、数字、下划线"}]})(N.default.createElement(y.default,{disabled:!!Y}))),N.default.createElement(L,(0,d.default)({},_.formItemCenterLayout,{label:"通道名称"}),U("alertGateName",{rules:[{required:!0,message:"请输入通道名称"},{max:32,message:"通道名称不超过32个字符"},{pattern:/^[^\s]*$/,message:"不允许填写空格"}]})(N.default.createElement(y.default,{placeholder:"请输入通道名称，不超过32个字符"}))),(0,P.showIsDefault)($)&&N.default.createElement(L,(0,d.default)({},_.formItemCenterLayout,{label:" ",colon:!1}),U("isDefault",{valuePropName:"checked",initialValue:!1})(N.default.createElement(s.default,null,"设置为默认通道")),N.default.createElement(u.default,{title:"各应用的告警走默认通道，故默认通道需谨慎设置，支持用户后续更改，每个通道类有且仅有一个默认通道。",arrowPointAtCenter:!0},N.default.createElement(i.default,{type:"info-circle"}))),(0,P.showConfigFile)($)&&N.default.createElement(L,(0,d.default)({},A(A({},_.formItemCenterLayout),D),{label:"配置文件"}),U("file",{rules:[{required:!0,message:"文件不可为空！"}],initialValue:null==q?void 0:q.filePath})(N.default.createElement("div",null)),N.default.createElement("div",{className:"c-alarmRule__config"},N.default.createElement(c.default,z,N.default.createElement(o.default,{style:{width:164},icon:"upload"},"点击上传")),N.default.createElement("span",{className:"config-desc"},"仅支持jar格式，",N.default.createElement("a",{href:"/api/console/service/alert/downloadJar?alertGateType=".concat($)},"查看配置文件说明"))),x("file")&&N.default.createElement("span",{className:"config-file"},N.default.createElement(i.default,{type:"paper-clip"}),null!==(a=null!==(r=null===(C=x("file"))||void 0===C?void 0:C.name)&&void 0!==r?r:x("file"))&&void 0!==a?a:"",N.default.createElement(i.default,{type:"delete",onClick:function(){K((0,v.default)({},"file",""))}}))),(0,P.showAlertGateJson)(ee,$)?N.default.createElement(L,(0,d.default)({},_.formItemCenterLayout,{label:"通道配置信息"}),U("alertGateJson",{rules:[{required:!0,message:"请输入通道配置信息"}]})(N.default.createElement(k,{placeholder:function(){var e=x("alertGateCode")||"";return e===_.CHANNEL_MODE_VALUE.SMS_YP?_.CHANNEL_CONF_TEXT.SMS_YP:e===_.CHANNEL_MODE_VALUE.MAIL_DT?_.CHANNEL_CONF_TEXT.MAIL_DT:e.includes("jar")?_.CHANNEL_CONF_TEXT.JAR:e.includes("api")?_.CHANNEL_CONF_TEXT.API:_.CHANNEL_CONF_TEXT.CUSTOM}(),rows:6}))):null,(0,P.showAlertTemplete)($,ee)?N.default.createElement(L,(0,d.default)({},_.formItemCenterLayout,{label:"通知消息模版"}),U("alertTemplate",{rules:[{required:!0,message:"请输入通知消息模版"}]})(N.default.createElement(k,{placeholder:"请按照此格式填写：<企业名称>${message}，请及时处理",rows:4}))):null,(0,P.canTestAlarm)($)?N.default.createElement(L,(0,d.default)({},_.formItemCenterLayout,{label:" ",colon:!1}),U("".concat(X),{rules:[{required:!1},{validator:function(e,t,n){if(t&&!B)_.NUM_COMMA.test(t)||n("请输入正确格式的手机号码"),t.split(",").forEach((function(e){!_.PHONE_REG.test(e)&&e.length&&n("请输入正确格式的手机号码")}));else if(t&&B){_.EMAIL_COMMA.test(t)||n("请输入正确格式的邮箱账号"),t.split(",").forEach((function(e){!_.EMAIL_REG.test(e)&&e.length&&n("请输入正确格式的邮箱账号")}))}n()}}],initialValue:""})($!==_.ALARM_TYPE.CUSTOM?N.default.createElement(y.default,{placeholder:"输入".concat(W,"测试号码，多个").concat(W,"用英文逗号隔开"),addonAfter:N.default.createElement("span",{onClick:function(){H()}},"点击测试")}):N.default.createElement(o.default,{ghost:!0,onClick:function(){H()}},"消息发送测试"))):null),N.default.createElement("footer",null,N.default.createElement(o.default,{onClick:function(){G()}},"取消"),N.default.createElement(o.default,{type:"primary",onClick:function(){V(function(){var e=(0,T.default)(m.default.mark((function e(t,n){var a,r,l,o;return m.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,O.default.addOrUpdateAlarmRule(Object.assign({},n,{id:Y||"",isDefault:n.isDefault?1:0,file:null!==(a=null!==(r=null==n||null===(l=n.file)||void 0===l?void 0:l.file)&&void 0!==r?r:null==n?void 0:n.file)&&void 0!==a?a:""}));case 3:1===e.sent.code&&(o=Y?"编辑成功":"新增成功",E.default.success(o),G());case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}},"确定"))))}));t.default=j},"06UE":function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("yXV3"),n("oVuX"),n("2B1R"),n("DQNa"),n("07d7"),n("SuFq"),n("JfAA"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("CC+v")),o=r(n("lwsE")),u=r(n("W8MJ")),i=r(n("7W2i")),s=r(n("a1gu")),c=r(n("Nsbk")),d=a(n("q1tI")),f=n("j1Tt");function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,s.default)(this,n)}}var m=function(e){(0,i.default)(n,e);var t=p(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,u.default)(n,[{key:"render",value:function(){var e=this.props,t=e.onOk,n=e.onCancel,a=e.deleteComps,r=e.addComps,o=e.visible,u=a.map((function(e){return f.COMPONENT_CONFIG_NAME[e]})),i=[f.COMPONENT_TYPE_VALUE.YARN,f.COMPONENT_TYPE_VALUE.KUBERNETES].indexOf(r[0])>-1;return d.createElement(l.default,{title:"修改组件配置",onOk:function(){return t()},onCancel:function(){return n()},visible:o,className:"c-clusterManage__modal"},i?d.createElement("span",null,"切换到 ",f.COMPONENT_CONFIG_NAME[r[0]]," 后 ",u[0]," 的配置信息将丢失，确认切换到 ",f.COMPONENT_CONFIG_NAME[r[0]],"？"):d.createElement("span",null,"删除 ",u.join("、")," 组件后相应配置信息将丢失，确定删除 ",u.join("、")," 组件？"))}}]),n}(d.Component);t.default=m},"2Cp/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.userActions.SET_TENANT_LIST:var n=t.data,o=(0,r.cloneDeep)(e);return o.tenantList=n,o;default:return e}};var a=n("o4I+"),r=n("LvDl"),l={tenantList:[]}},"6aLI":function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("pNMO"),n("ma9I"),n("TeQF"),n("QWBl"),n("2B1R"),n("DQNa"),n("wLYn"),n("zKZe"),n("HRxU"),n("eoL8"),n("5DmW"),n("27RR"),n("cDke"),n("tkto"),n("07d7"),n("4l63"),n("SuFq"),n("JfAA"),n("FZtP"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("N9UN")),o=r(n("DtFj")),u=r(n("Pbn2")),i=r(n("RIqP")),s=r(n("9xET")),c=r(n("ZPTe")),d=r(n("ZvzK")),f=r(n("g4D/")),p=r(n("Jv8k")),m=r(n("QpBz")),E=r(n("lwsE")),v=r(n("W8MJ")),T=r(n("PJYZ")),h=r(n("7W2i")),y=r(n("a1gu")),S=r(n("Nsbk")),g=r(n("lSNA")),N=r(n("VkAN")),C=r(n("qPIi")),b=a(n("q1tI")),O=n("LvDl"),_=r(n("j+Cx")),P=r(n("9ObM"));n("+5i3");var R=n("IiER"),A=r(n("Ej2X")),L=r(n("BjRx")),I=r(n("RHHV")),k=r(n("V2yy")),D=r(n("L56I")),j=n("RzPm");function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,g.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,S.default)(e);if(t){var r=(0,S.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,y.default)(this,n)}}function U(){var e=(0,N.default)(["\n    margin-left: 24px;\n"]);return U=function(){return e},e}var x=C.default.Group,V=C.default.Button,K=P.default.span(U()),Y=_.default.getParameterByName,q=function(e){(0,h.default)(n,e);var t=F(n);function n(){var e;(0,E.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,g.default)((0,T.default)(e),"state",{dataSource:[],table:{pageIndex:1,total:0,loading:!1},jobName:"",clusterName:void 0,node:void 0,jobResource:void 0,engineType:void 0,isShowViewDetail:!1,isShowTaskParams:!1,resource:{},killIds:[],isShowKill:!1,killResource:{},radioValue:null,selectedRowKeys:[],isShowAllKill:!1,isKillAllTasks:!1,killTaskInfo:[]}),(0,g.default)((0,T.default)(e),"getDetailTaskList",(function(){var t=e.state,n=t.node,a=t.jobResource,r=t.radioValue,l=e.state.table,o=l.pageIndex;e.setState({selectedRowKeys:[],killTaskInfo:[]}),a&&(e.setState({table:w(w({},l),{},{loading:!0})}),I.default.getViewDetail({nodeAddress:n,pageSize:10,currentPage:o,stage:r,jobResource:a}).then((function(t){1==t.code?e.setState({dataSource:(0,O.get)(t,"data.data",[]),table:w(w({},l),{},{loading:!1,total:(0,O.get)(t,"data.totalCount",0)})}):e.setState({table:w(w({},l),{},{loading:!1})})})))})),(0,g.default)((0,T.default)(e),"onTableChange",(function(t,n,a){var r=Object.assign(e.state.table,{pageIndex:t.current});e.setState({table:r,selectedRowKeys:[],killTaskInfo:[]},(function(){e.getDetailTaskList()}))})),(0,g.default)((0,T.default)(e),"handleKillSelect",(function(){var t=e.state.selectedRowKeys;if(!t||t.length<=0)return m.default.error("您没有选择任何任务！"),!1;e.setState({isKillAllTasks:!1,isShowAllKill:!0})})),(0,g.default)((0,T.default)(e),"onCheckAllChange",(function(t){var n=[],a=[];t.target.checked&&(n=e.state.dataSource.map((function(e){return e.jobId})),a=e.state.dataSource.map((function(e){return{jobId:e.jobId,jobType:e.jobType,engineType:e.engineType,clusterName:e.clusterName}}))),e.setState({selectedRowKeys:n,checkAll:t.target.checked,killTaskInfo:a})})),(0,g.default)((0,T.default)(e),"handleKillAll",(function(t){e.setState({isShowAllKill:!0,isKillAllTasks:!0})})),(0,g.default)((0,T.default)(e),"tableFooter",(function(t){var n=e.state,a=n.selectedRowKeys,r=n.dataSource,l=!!a.length&&a.length<r.length,o=!!r.length&&a.length===r.length,u=b.createElement(p.default,{onClick:e.handleKillAll},b.createElement(p.default.Item,{key:"1",style:{width:118}},"杀死全部任务"));return b.createElement(s.default,{className:"table-footer"},b.createElement(c.default,null,b.createElement(f.default,{style:{padding:"0 16px 0 0"},indeterminate:l,checked:o,onChange:e.onCheckAllChange},"全选"),b.createElement(d.default.Button,{style:{padding:"0 16px 0 20px"},size:"small",trigger:["click"],onClick:e.handleKillSelect,type:"primary",overlay:u},"杀死选中任务")))})),e}return(0,v.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({node:Y("node"),clusterName:Y("clusterName"),engineType:Y("engineType"),jobResource:Y("jobResource"),radioValue:Y("jobStage")},(function(){e.getDetailTaskList()}))}},{key:"changeJobPriority",value:function(e){var t=this.state,n=t.jobResource,a=t.radioValue,r=parseInt(a,10)===j.JobStage.Saved?"插入队列头成功":"置顶成功";return I.default.stickJob({jobId:e.jobId,jobResource:n}).then((function(e){if(1==e.code)return m.default.success(r),!0}))}},{key:"getPagination",value:function(){var e=this.state.table;return{current:e.pageIndex,pageSize:10,total:e.total}}},{key:"viewDetails",value:function(e){this.setState({isShowViewDetail:!0,resource:e})}},{key:"showTaskParams",value:function(e){var t=(0,O.get)(JSON.parse(e.jobInfo),"taskParams","");this.setState({isShowTaskParams:!0,resource:t})}},{key:"handleCloseViewModal",value:function(){this.setState({isShowViewDetail:!1,isShowTaskParams:!1,resource:null})}},{key:"killTask",value:function(e){this.setState({isShowKill:!0,killResource:e})}},{key:"handleCloseKill",value:function(){this.setState({isShowKill:!1,isShowAllKill:!1})}},{key:"killSuccess",value:function(e){this.setState({killIds:(0,i.default)(this.state.killIds).concat(e)})}},{key:"autoRefresh",value:function(){this.getDetailTaskList()}},{key:"stickTask",value:function(e){var t=this;this.changeJobPriority(e).then((function(e){e&&t.getDetailTaskList()}))}},{key:"changeRadioValue",value:function(e){var t=this.state.table;this.setState({selectedRowKeys:[],killTaskInfo:[],table:w(w({},t),{},{total:0,pageIndex:1}),radioValue:e.target.value},this.getDetailTaskList)}},{key:"initTableColumns",value:function(){var e=this,t=this.state.table;return[{title:"序号",dataIndex:"id",width:"80px",render:function(e,n,a){return 10*(t.pageIndex-1)+(a+1)}},{title:"任务名称",dataIndex:"jobName",render:function(e,t){return t.jobName},width:"350px"},{title:"状态",dataIndex:"status",render:function(e,t){return(0,R.displayTaskStatus)(e)}},{title:"节点",dataIndex:"nodeAddress"},{title:"已等待",dataIndex:"waitTime",render:function(e,t){return t.waitTime}},{title:"提交时间",dataIndex:"generateTime",render:function(e){return _.default.formatDateTime(e)}},{title:"租户",dataIndex:"tenantName"},{title:"操作",dataIndex:"deal",render:function(t,n,a){var r=n.stage===j.JobStage.Saved,l=n.stage===j.JobStage.Queueing?"置顶":r?"插入队列头":null;return b.createElement("div",null,b.createElement("a",{onClick:e.viewDetails.bind(e,n)},"查看详情"),b.createElement("span",{className:"ant-divider"}),b.createElement("a",{onClick:e.killTask.bind(e,n)},"杀任务"),l?b.createElement("span",null,b.createElement("span",{className:"ant-divider"}),b.createElement("a",{onClick:e.stickTask.bind(e,n,a)},l)):null,b.createElement("span",{className:"ant-divider"}),b.createElement("a",{onClick:e.showTaskParams.bind(e,n)},"任务参数"))}}]}},{key:"render",value:function(){var e=this,t=this.initTableColumns(),n=this.state,a=n.killResource,r=n.resource,i=n.node,s=n.isKillAllTasks,c=n.isShowTaskParams,d=n.dataSource,f=n.table,p=n.selectedRowKeys,m=n.killTaskInfo,E=n.radioValue,v=n.isShowViewDetail,T=n.isShowKill,h=n.isShowAllKill,y=n.clusterName,S=n.jobResource,g=f.total,N=f.loading,C={onChange:function(t,n){e.setState({selectedRowKeys:t,killTaskInfo:n.map((function(e){return{jobId:e.jobId,jobType:e.jobType,engineType:e.engineType}}))})},selectedRowKeys:p},O=b.createElement("div",{style:{fontSize:"12px",color:"#333333",fontWeight:"normal"}},b.createElement("span",null,"总任务数：",f.total||0),b.createElement(K,null,"集群：",y),b.createElement(K,null,"节点：",i||"-"),b.createElement(K,null,"计算类型：",S),b.createElement("span",{className:"right pointer",onClick:this.getDetailTaskList},b.createElement(u.default,{type:"sync"}))),_=s?1===E?0:1:void 0;return b.createElement("div",null,b.createElement("div",{style:{margin:20}},b.createElement(k.default,{size:"default",type:"textButton",style:{fontSize:"16px",color:"#333333",top:0,letterSpacing:0}}," 返回")),b.createElement("div",{className:"box-2 m-card"},b.createElement(l.default,{title:O},b.createElement("div",{style:{margin:"16px 20px"}},b.createElement(x,{onChange:this.changeRadioValue.bind(this),value:this.state.radioValue},Object.getOwnPropertyNames(j.JobStageText).map((function(e){return b.createElement(V,{key:e,value:e},j.JobStageText[e])})))),b.createElement(o.default,{rowKey:function(e){return"".concat(e.jobId)},loading:N,className:"dt-table-border",pagination:this.getPagination(),rowSelection:C,dataSource:d,columns:t,onChange:this.onTableChange,footer:this.tableFooter}))),b.createElement(A.default,{visible:v,onCancel:this.handleCloseViewModal.bind(this),resource:JSON.stringify(r,null,2)}),b.createElement(A.default,{title:"任务参数",visible:c,onCancel:this.handleCloseViewModal.bind(this),resource:r}),b.createElement(L.default,{visible:T,onCancel:this.handleCloseKill.bind(this),killResource:a,killSuccess:this.killSuccess.bind(this),autoRefresh:this.autoRefresh.bind(this),node:i,jobResource:this.state.jobResource,stage:this.state.radioValue}),b.createElement(D.default,{visible:h,totalModel:_,onCancel:this.handleCloseKill.bind(this),killSuccess:this.killSuccess.bind(this),autoRefresh:this.autoRefresh.bind(this),killResource:m,node:i,totalSize:g,stage:this.state.radioValue,jobName:this.state.jobName,jobResource:this.state.jobResource,clusterName:this.state.clusterName}))}}]),n}(b.Component);t.default=q},"6cUG":function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("DQNa"),n("wLYn"),n("07d7"),n("SuFq"),n("JfAA"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("d1El")),o=r(n("Pbn2")),u=r(n("CC+v")),i=r(n("lwsE")),s=r(n("W8MJ")),c=r(n("7W2i")),d=r(n("a1gu")),f=r(n("Nsbk")),p=a(n("q1tI"));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var E=!0,v=!1,T=function(e){(0,c.default)(n,e);var t=m(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).state={},a}return(0,s.default)(n,[{key:"showDetailErrMessage",value:function(e){u.default.error({title:"错误信息",content:"".concat(e.errorMsg),zIndex:1061})}},{key:"matchCompTest",value:function(e){switch(e.result){case E:return p.createElement(o.default,{className:"success-icon",type:"check-circle"});case v:return p.createElement(l.default,{title:p.createElement("a",{style:{color:"#fff",overflow:"scroll"},onClick:this.showDetailErrMessage.bind(this,e)},e.errorMsg),placement:"right"},p.createElement(o.default,{className:"err-icon",type:"close-circle"}));default:return null}}},{key:"render",value:function(){var e=this.props.testStatus;return this.matchCompTest(e)}}]),n}(p.Component);t.default=T},"90CZ":function(e,t,n){"use strict";var a=n("TqRt");n("TeQF"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("J4zp")),l=n("q1tI"),o=n("RzPm");var u=function(e){var t=e.clusterId,n=e.form,a=e.clusterList,u=e.visible,i=(0,l.useState)([]),s=(0,r.default)(i,2),c=s[0],d=s[1],f=(0,l.useState)({hasHadoop:!1,hasLibra:!1,hasTiDB:!1,hasOracle:!1,hasKubernetes:!1,hasGreenPlum:!1,hasPresto:!1}),p=(0,r.default)(f,2),m=p[0],E=p[1];return(0,l.useEffect)((function(){var e;if(t){var r,l=a.filter((function(e){return(null==e?void 0:e.clusterId)==t})),i=(null==l||null===(e=l[0])||void 0===e?void 0:e.engines)||[],s=i.filter((function(e){return e.engineType==o.ENGINE_TYPE.HADOOP})),c=i.filter((function(e){return e.engineType==o.ENGINE_TYPE.LIBRA})),f=i.filter((function(e){return e.engineType==o.ENGINE_TYPE.TI_DB})),p=i.filter((function(e){return e.engineType==o.ENGINE_TYPE.ORACLE})),m=i.filter((function(e){return e.engineType==o.ENGINE_TYPE.GREEN_PLUM})),v=i.filter((function(e){return e.engineType==o.ENGINE_TYPE.PRESTO})),T=i.filter((function(e){return e.resourceType==o.RESOURCE_TYPE.KUBERNETES}));if(u)E({hasHadoop:s.length>=1,hasLibra:c.length>=1,hasTiDB:f.length>0,hasKubernetes:T.length>=1,hasOracle:p.length>0,hasGreenPlum:m.length>0,hasPresto:v.length>0}),d((null==s||null===(r=s[0])||void 0===r?void 0:r.queues)||[]);else n.resetFields(["queueId"]),E({hasKubernetes:!1,hasHadoop:!1,hasLibra:!1,hasTiDB:!1,hasOracle:!1,hasGreenPlum:!1,hasPresto:!1}),d([])}}),[t,a,u,n]),{env:m,queueList:c}};t.default=u},A9pX:function(e,t,n){"use strict";var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useEnv",{enumerable:!0,get:function(){return r.default}});var r=a(n("90CZ"))},AuKd:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("2B1R"),n("DQNa"),n("sMBO"),n("07d7"),n("SuFq"),n("JfAA"),n("mRH6"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("Jv8k")),o=r(n("Pbn2")),u=r(n("lwsE")),i=r(n("W8MJ")),s=r(n("PJYZ")),c=r(n("7W2i")),d=r(n("a1gu")),f=r(n("Nsbk")),p=r(n("lSNA")),m=r(n("d2CI")),E=a(n("q1tI")),v=n("dtw8");function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var h=m.default.Sider,y=function(e){(0,c.default)(n,e);var t=T(n);function n(e){var a;return(0,u.default)(this,n),a=t.call(this,e),(0,p.default)((0,s.default)(a),"state",{collapsed:!1,mode:"inline"}),(0,p.default)((0,s.default)(a),"onCollapse",(function(){a.setState({collapsed:!a.state.collapsed,mode:a.state.collapsed?"inline":"vertical"})})),a}return(0,i.default)(n,[{key:"render",value:function(){var e=this.state,t=e.collapsed,n=e.mode,a=[{id:"queueManage",name:"队列管理",link:"".concat("/console","/queueManage"),enable:!0},{id:"resourceManage",name:"资源管理",link:"".concat("/console","/resourceManage"),enable:!0},{id:"alarmChannel",name:"告警通道",link:"".concat("/console","/alarmChannel"),enable:!0},{id:"clusterManage",name:"多集群管理",link:"".concat("/console","/clusterManage"),enable:!0}];return E.createElement(h,{className:"dt-layout-sider",collapsed:t},E.createElement("div",{className:"dt-slider-top-icon",onClick:this.onCollapse},E.createElement(o.default,{type:t?"menu-unfold":"menu-fold"})),E.createElement(l.default,{mode:n,defaultSelectedKeys:["queueManage"]},a.map((function(e){return E.createElement(l.default.Item,{key:e.id},E.createElement(v.Link,{to:e.link,target:e.target,rel:"noopener noreferrer"},E.createElement("span",null,e.name)))}))))}}]),n}(E.Component);t.default=y},AwqB:function(e,t,n){"use strict";var a=n("TqRt");n("oVuX"),n("07d7"),n("5s+n"),n("R5XZ"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("lwsE")),l=a(n("W8MJ"));n("bZMm");var o=a(n("wuId")),u=n("9jh+"),i=n("pWBi"),s=new(function(){function e(){(0,r.default)(this,e)}return(0,l.default)(e,[{key:"get",value:function(e,t){var n=t?this.build(e,t):e;return this.request(n,{method:"GET"})}},{key:"post",value:function(e,t){var n={method:"POST"};return t&&(n.body=JSON.stringify(t)),this.request(e,n)}},{key:"postWithDefaultHeader",value:function(e,t){var n={method:"POST"};return n.headers=this.defaultHeader(),t&&(n.body=JSON.stringify(t)),this.request(e,n)}},{key:"postAsFormData",value:function(e,t){var n={method:"POST"};return t&&(n.body=this.buildFormData(t)),this.request(e,n)}},{key:"postForm",value:function(e,t){var n={method:"POST"};return t&&(n.body=new FormData(t)),this.request(e,n)}},{key:"request",value:function(e,t){return o.default.show(),t.credentials="same-origin",fetch(e,t).then(i.authBeforeFormate).then((function(e){return setTimeout((function(){o.default.hide()}),300),e.json()})).then(i.authAfterFormated).catch((function(e){return o.default.hide(),(0,u.singletonNotification)("请求异常","服务器可能出了点问题, 请稍后再试！"),Promise.reject(e)}))}},{key:"defaultHeader",value:function(){return{Accept:"*/*","Content-Type":"application/json"}}},{key:"build",value:function(e,t){var n=[];if(t)for(var a in t)a&&n.push(a+"="+encodeURIComponent(t[a]));return e+"?"+n.join("&")}},{key:"buildFormData",value:function(e){if(e){var t=new FormData;for(var n in e)n&&t.append(n,e[n]);return t}}}]),e}());t.default=s},BjRx:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("DQNa"),n("wLYn"),n("07d7"),n("SuFq"),n("JfAA"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("CC+v")),o=r(n("QpBz")),u=r(n("lwsE")),i=r(n("W8MJ")),s=r(n("7W2i")),c=r(n("a1gu")),d=r(n("Nsbk")),f=a(n("q1tI")),p=r(n("RHHV"));function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var E=function(e){(0,s.default)(n,e);var t=m(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"killTask",value:function(){var e=this,t=this.props,n=t.killResource,a=t.jobResource,r=t.stage,l=t.node;p.default.killTasks({jobIdList:[n.jobId],stage:r,jobResource:a,nodeAddress:l}).then((function(t){1==t.code&&(e.props.killSuccess(n.jobId),o.default.success("操作成功"),e.props.autoRefresh(),e.props.onCancel())}))}},{key:"confirmKilltask",value:function(){this.killTask()}},{key:"render",value:function(){return f.createElement(l.default,{title:"杀任务",visible:this.props.visible,onCancel:this.props.onCancel,onOk:this.confirmKilltask.bind(this)},f.createElement("p",null,"是否要杀死此任务?"))}}]),n}(f.Component);t.default=E},"C+lx":function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("ma9I"),n("DQNa"),n("07d7"),n("SuFq"),n("JfAA"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("CC+v")),o=r(n("pVnL")),u=r(n("iJl9")),i=r(n("lwsE")),s=r(n("W8MJ")),c=r(n("PJYZ")),d=r(n("7W2i")),f=r(n("a1gu")),p=r(n("Nsbk")),m=r(n("lSNA")),E=r(n("qu0K")),v=a(n("q1tI")),T=n("RzPm");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var y=E.default.Item,S=function(e){(0,d.default)(n,e);var t=h(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,m.default)((0,c.default)(e),"onSubmit",(function(){var t=e.props,n=t.onOk;(0,t.form.validateFields)((function(e,t){e||n({clusterName:t.clusterName})}))})),e}return(0,s.default)(n,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,n=t.title,a=t.visible,r=t.onCancel;return v.createElement(l.default,{title:n,visible:a,onCancel:r,onOk:this.onSubmit,className:"c-clusterManage__modal"},v.createElement(E.default,null,v.createElement(y,(0,o.default)({label:"集群名称"},T.formItemLayout),e("clusterName",{rules:[{required:!0,message:"集群标识不可为空！"},{pattern:/^[a-z0-9_]{1,64}$/i,message:"集群标识不能超过64字符，支持英文、数字、下划线"}]})(v.createElement(u.default,{placeholder:"请输入集群标识"})))))}}]),n}(v.Component),g=E.default.create()(S);t.default=g},C4JW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CONSOLE_BASE_UPLOAD_URL=t.CONSOLE_BASE_URL=void 0;t.CONSOLE_BASE_URL="/node";t.CONSOLE_BASE_UPLOAD_URL="/node";var a={DA_GET_USER_BY_ID:"".concat("/node","/user/getUserById"),DA_GET_USER_AUTH_BY_ID:"".concat("/node","/user/getUserById"),GET_TENANT_LIST:"".concat("/node","/tenant/listTenant"),GET_RESOURCE_USER_LIST:"".concat("/node","/tenant/listByQueueId"),BIND_USER_TO_RESOURCE:"".concat("/node","/tenant/addToQueue"),CONFIRM_SWITCH_QUEUE:"".concat("/node","/tenant/updateQueueId"),GET_RESOURCE_LIST:"".concat("/node","/cluster/pageQueue"),GET_CLUSTER_LIST:"".concat("/node","/cluster/pageQuery"),UPDATE_CLUSTER:"".concat("/node","/upload/cluster/update"),NEW_CLUSTER:"".concat("/node","/upload/cluster/add"),TEST_CLUSTER_CONNECT:"".concat("/node","/cluster/testConnect"),UPLOAD_CLUSTER_RESOURCE:"".concat("/node","/upload/cluster/config"),GET_CLUSTER:"".concat("/node","/cluster/getOne"),GET_QUEUE_LISTS:"".concat("/node","/cluster/listQueues"),GET_CLUSTER_DETAIL:"".concat("/node","/console/overview"),GET_CLUSTER_SELECT:"".concat("/node","/cluster/clusters"),GET_NODEADDRESS_SELECT:"".concat("/node","/console/nodeAddress"),SEARCH_TASKNAME_LIST:"".concat("/node","/console/searchJob"),SEARCH_TASKNAME_FUZZY:"".concat("/node","/console/listNames"),KILL_TASK:"".concat("/node","/console/stopJob"),KILL_TASKS:"".concat("/node","/console/stopJobList"),KILL_ALL_TASK:"".concat("/node","/console/stopAll"),JOB_STICK:"".concat("/node","/console/jobStick"),GET_ENGINE_LIST:"".concat("/node","/console/engineTypes"),GET_GROUP_LIST:"".concat("/node","/console/groups"),GET_VIEW_DETAIL:"".concat("/node","/console/groupDetail"),CHANGE_JOB_PRIORITY:"".concat("/node","/console/jobPriority"),GET_CLUSTER_RESOURCES:"".concat("/node","/console/clusterResources"),GET_CLUSTER_INFO:"".concat("/node","/component/cluster/getCluster"),UPLOAD_RESOURCE:"".concat("/node","/upload/component/config"),DOWNLOAD_RESOURCE:"".concat("/node","/download/component/downloadFile"),DELETE_CLUSTER:"".concat("/node","/cluster/deleteCluster"),DELETE_COMPONENT:"".concat("/node","/component/delete"),GET_COMPONENT_VERSION:"".concat("/node","/component/getComponentVersion"),TEST_CONNECTS:"".concat("/node","/component/testConnects"),SAVE_COMPONENT:"".concat("/node","/upload/component/addOrUpdateComponent"),CLOSE_KERBEROS:"".concat("/node","/component/closeKerberos"),GET_VERSION:"".concat("/node","/component/getComponentVersion"),ADD_CLUSTER:"".concat("/node","/component/addOrCheckClusterWithName"),GET_LOADTEMPLATE:"".concat("/node","/component/loadTemplate"),UPLOAD_KERBEROSFILE:"".concat("/node","/upload/component/hadoopKerberosConfig"),GET_KERBEROSFILE:"".concat("/node","/component/getHadoopKerberosFile"),TEST_COMPONENT_CONNECT:"".concat("/node","/component/testConnections"),TEST_COMPONENT_CONNECT_KERBEROS:"".concat("/node","/upload/service/component/testConnections"),ADD_COMPONENT:"".concat("/node","/component/addComponent"),SAVE_COMPONENT_KERBEROS:"".concat("/node","/upload/service/component/updateWithKerberos"),DELETE_KERBEROS:"".concat("/node","/component/rmKerberosConfig"),ADD_ENGINE:"".concat("/node","/engine/addEngine"),ADD_ENGINS:"".concat("/node","/engine/addEngines"),UPDATE_CLUSTER_VERSION:"".concat("/node","/cluster/updateGlobalConfig"),GET_COMPONENTSTORE:"".concat("/node","/component/getComponentStore"),PARSE_KERBEROS:"".concat("/node","/upload/component/parseKerberos"),UPLOAD_KERBEROS:"".concat("/node","/upload/component/uploadKerberos"),UPDATE_KRB5CONF:"".concat("/node","/component/updateKrb5Conf"),GET_ALL_CLUSTER:"".concat("/node","/cluster/getAllCluster"),SEARCH_TENANT:"".concat("/node","/tenant/pageQuery"),GET_QUEUE:"".concat("/node","/engine/getQueue"),BIND_TENANT:"".concat("/node","/tenant/bindingTenant"),LDAP_ACCOUNT_BIND:"".concat("/node","/account/bindAccountList"),SWITCH_QUEUE:"".concat("/node","/tenant/bindingQueue"),BIND_NAME_SPACE:"".concat("/node","/tenant/bindNamespace"),GET_TASKLIMITS:"".concat("/node","/tenant/queryTaskResourceLimits"),REFRESH_QUEUE:"".concat("/node","/component/refresh"),TASK_RESOURCE:"".concat("/node","/console/getTaskResourceTemplate"),ACCOUNT_UNBIND_LIST:"".concat("/node","/account/getTenantUnBandList"),ACCOUNT_BIND:"".concat("/node","/account/bindAccount"),UPDATE_ACCOUNT_BIND:"".concat("/node","/account/updateBindAccount"),ACCOUNT_BIND_LIST:"".concat("/node","/account/pageQuery"),ACCOUNT_UNBIND:"".concat("/node","/account/unbindAccount"),ADD_OR_UPDATE_ALARM:"".concat("/node","/alert/edit"),GET_ALARM_RULE_LIST:"".concat("/node","/alert/page"),DEL_ALARM_RULE_LIST:"".concat("/node","/alert/delete"),GET_ALARM_BY_ID:"".concat("/node","/alert/getByAlertId"),SET_DEFAULT_ALERT:"".concat("/node","/alert/setDefaultAlert"),TEST_ALERT:"".concat("/node","/alert/testAlert")};t.default=a},Efuq:function(e,t,n){"use strict";var a=n("TqRt"),r=n("284h");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("q1tI")),o=n("dtw8"),u=a(n("Yetp")),i=a(n("KQ7z")),s=a(n("zqmc")),c=a(n("HGpX")),d=a(n("Uu3x")),f=a(n("RclC")),p=a(n("6aLI")),m=a(n("XdBI")),E=a(n("+CR5")),v=l.createElement(o.Route,null,l.createElement(o.IndexRedirect,{to:"/console-ui"}),l.createElement(o.Route,{path:"/console-ui",component:i.default},l.createElement(o.IndexRoute,{component:s.default}),l.createElement(o.Route,{path:"queueManage",component:s.default}),l.createElement(o.Route,{path:"queueManage/detail",component:p.default}),l.createElement(o.Route,{path:"resourceManage",component:c.default}),l.createElement(o.Route,{path:"clusterManage",component:d.default}),l.createElement(o.Route,{path:"clusterManage/editCluster",component:f.default}),l.createElement(o.Route,{path:"alarmChannel",component:m.default}),l.createElement(o.Route,{path:"alarmChannel/alarmRule",component:E.default})),l.createElement(o.Route,{path:"/*",component:u.default}));t.default=v},Ej2X:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("ma9I"),n("DQNa"),n("07d7"),n("SuFq"),n("JfAA"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("CC+v")),o=r(n("lwsE")),u=r(n("W8MJ")),i=r(n("PJYZ")),s=r(n("7W2i")),c=r(n("a1gu")),d=r(n("Nsbk")),f=r(n("lSNA")),p=a(n("q1tI")),m=r(n("zN5T"));function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var v=function(e){(0,s.default)(n,e);var t=E(n);function n(){var e;(0,o.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,f.default)((0,i.default)(e),"state",{editor:{sql:"",cursor:void 0,sync:!0}}),e}return(0,u.default)(n,[{key:"render",value:function(){var e=this.props.title;return p.createElement(l.default,{title:e||"任务详情",width:650,onCancel:this.props.onCancel,onOk:this.props.onCancel,visible:this.props.visible},p.createElement(m.default,{style:{height:"400px",marginTop:"1px"},value:this.props.resource,language:"ini",options:{readOnly:!0,minimap:{enabled:!1}},sync:!0}))}}]),n}(p.Component);t.default=v},FZsQ:function(e,t,n){"use strict";n("DQNa"),Object.defineProperty(t,"__esModule",{value:!0}),t.giveMeAKey=function(){return(new Date).getTime()+""+~~(1e5*Math.random())}},HGpX:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("pNMO"),n("ma9I"),n("TeQF"),n("QWBl"),n("2B1R"),n("DQNa"),n("wLYn"),n("zKZe"),n("HRxU"),n("eoL8"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("4l63"),n("SuFq"),n("JfAA"),n("FZtP"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("N9UN")),o=r(n("pVnL")),u=r(n("DtFj")),i=r(n("9xET")),s=r(n("4IMT")),c=r(n("ZPTe")),d=r(n("QpBz")),f=r(n("o0o1"));n("ls82");var p=r(n("yXPU")),m=r(n("lwsE")),E=r(n("W8MJ")),v=r(n("PJYZ")),T=r(n("7W2i")),h=r(n("a1gu")),y=r(n("Nsbk")),S=r(n("lSNA")),g=r(n("iJl9")),N=r(n("j7zX")),C=r(n("FAat")),b=r(n("qu0K")),O=a(n("q1tI")),_=n("LvDl"),P=r(n("RHHV")),R=n("RzPm"),A=n("IiER"),L=r(n("s7lY")),I=r(n("UANx")),k=r(n("jRo7")),D=r(n("kYLF"));function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,S.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,y.default)(e);if(t){var r=(0,y.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,h.default)(this,n)}}var F=b.default.Item,U=C.default.Option,x=N.default.TabPane,V=g.default.Search,K=function(e){(0,T.default)(n,e);var t=w(n);function n(){var e;(0,m.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,S.default)((0,v.default)(e),"state",{tableData:[],clusterList:[],engineList:[],queryParams:{clusterId:"",engineType:"",tenantName:"",pageSize:20,currentPage:1,clusterName:""},loading:!1,total:0,tenantModal:!1,queueModal:!1,manageModal:!1,tenantInfo:"",isHaveHadoop:!1,isHaveLibra:!1,queueList:[]}),(0,S.default)((0,v.default)(e),"requestEnd",!0),(0,S.default)((0,v.default)(e),"searchTenant",(function(){var t=e.state.queryParams;e.setState({loading:!0}),P.default.searchTenant(t).then((function(t){1===t.code?e.setState({tableData:(0,_.get)(t,"data.data",[]),total:(0,_.get)(t,"data.totalCount",0),loading:!1}):e.setState({loading:!1})}))})),(0,S.default)((0,v.default)(e),"initList",(0,p.default)(f.default.mark((function t(){var n,a,r,l,o;return f.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P.default.getAllCluster();case 2:1===(n=t.sent).code&&(a=n.data||[],r=a[0]&&a[0].engines||[],l=a[0]||[],o=r[0]||[],e.setState({clusterList:a,queryParams:Object.assign(e.state.queryParams,{clusterId:l.clusterId,engineType:o.engineType}),clusterName:l.clusterName,engineList:r,loading:!0},e.searchTenant));case 4:case"end":return t.stop()}}),t)})))),(0,S.default)((0,v.default)(e),"clusterOptions",(function(){return e.state.clusterList.map((function(e){return O.createElement(U,{key:"".concat(e.clusterId),value:"".concat(e.clusterId)},e.clusterName)}))})),(0,S.default)((0,v.default)(e),"handleChangeCluster",(function(t){var n,a=(n=e.state.clusterList.filter((function(e){return e.clusterId==t})))[0]&&n[0].engines||[],r=Object.assign(e.state.queryParams,{clusterId:t,engineType:a[0]&&a[0].engineType,tenantName:"",pageSize:20,currentPage:1});e.setState({engineList:a,queryParams:r,clusterName:n[0].clusterName},e.searchTenant)})),(0,S.default)((0,v.default)(e),"changeTenantName",(function(t){var n=Object.assign(e.state.queryParams,{tenantName:t});e.setState({queryParams:n},e.searchTenant)})),(0,S.default)((0,v.default)(e),"handleTableChange",(function(t,n,a){var r=Object.assign(e.state.queryParams,{currentPage:t.current});e.setState({queryParams:r},e.searchTenant)})),(0,S.default)((0,v.default)(e),"handleEngineTab",(function(t){var n=Object.assign(e.state.queryParams,{engineType:t,tenantName:"",currentPage:1});e.setState({queryParams:n},e.searchTenant)})),(0,S.default)((0,v.default)(e),"clickSwitchQueue",(function(t){e.setState({manageModal:!0,tenantInfo:t})})),(0,S.default)((0,v.default)(e),"clickSwitchNamespace",(function(t){e.setState({queueModal:!0,tenantInfo:t})})),(0,S.default)((0,v.default)(e),"initHadoopColumns",(function(){return[{title:"租户",dataIndex:"tenantName",render:function(e,t){return e}},{title:"资源队列",dataIndex:"queue",render:function(e,t){return e}},{title:"最小容量（%）",dataIndex:"minCapacity",render:function(e,t){return e}},{title:"最大容量（%）",dataIndex:"maxCapacity",render:function(e,t){return e}},{title:"操作",dataIndex:"deal",render:function(t,n){return O.createElement("a",{onClick:function(){e.clickSwitchQueue(n)}},"资源管理")}}]})),(0,S.default)((0,v.default)(e),"initKubernetesColumns",(function(){return[{title:"租户",dataIndex:"tenantName"},{title:"Namespace",dataIndex:"queue"},{title:"操作",dataIndex:"action",width:200,render:function(t,n){return O.createElement("a",{onClick:function(){e.clickSwitchNamespace(n)}},"切换Namespace")}}]})),(0,S.default)((0,v.default)(e),"initDefaultColumns",(function(){return[{title:"租户",dataIndex:"tenantName",render:function(e,t){return e}}]})),(0,S.default)((0,v.default)(e),"getColumn",(function(t,n){var a=e.initHadoopColumns();return t||(a=e.initDefaultColumns()),t&&(0,A.isKubernetesEngine)(n)&&(a=e.initKubernetesColumns()),a})),e}return(0,E.default)(n,[{key:"componentDidMount",value:function(){this.initList()}},{key:"bindTenant",value:function(e){var t=this,n=e.canSubmit,a=e.reqParams;n&&this.requestEnd&&(this.requestEnd=!1,P.default.bindTenant(M({},a)).then((function(e){1===e.code&&(t.setState({tenantModal:!1}),d.default.success("租户绑定成功"),t.searchTenant()),t.requestEnd=!0})))}},{key:"switchQueue",value:function(e){var t=this,n=e.reqParams;e.hasKubernetes?P.default.bindNamespace({clusterId:n.clusterId,namespace:n.namespace,queueId:n.queueId,tenantId:n.tenantId}).then((function(e){1===e.code&&(t.setState({queueModal:!1}),d.default.success("切换队列成功"),t.searchTenant())})):P.default.switchQueue(M({},n)).then((function(e){1===e.code&&(t.setState({queueModal:!1}),d.default.success("切换队列成功"),t.searchTenant())}))}},{key:"sourceManage",value:function(e){var t=this;this.setState({manageModal:!1,tenantInfo:""},(function(){return t.initList()}))}},{key:"showTenant",value:function(){this.setState({tenantModal:!0})}},{key:"render",value:function(){var e,t=this,n=this.state,a=n.tableData,r=n.queryParams,d=n.total,f=n.loading,p=n.engineList,m=n.clusterList,E=n.tenantModal,v=n.queueModal,T=n.modalKey,h=n.clusterName,y=n.tenantInfo,S=n.manageModal,g=(0,A.isKubernetesEngine)(p[0]&&p[0].resourceType),_={current:r.currentPage,pageSize:20,total:d};return O.createElement("div",{className:"resource-wrapper"},O.createElement(i.default,null,O.createElement(c.default,{span:12},O.createElement(b.default,{className:"m-form-inline",layout:"inline"},O.createElement(F,{label:"集群"},O.createElement(C.default,{className:"dt-form-shadow-bg",style:{width:"264px"},placeholder:"请选择集群",value:"".concat(r.clusterId),onChange:this.handleChangeCluster},this.clusterOptions())))),O.createElement(c.default,{span:12},O.createElement(s.default,{className:"terent-button",type:"primary",onClick:function(){t.setState({tenantModal:!0})}},"绑定新租户"))),O.createElement("div",{className:"resource-content"},O.createElement(l.default,{className:"console-tabs resource-tab-width",bordered:!1},O.createElement(N.default,(0,o.default)({tabPosition:"left",defaultActiveKey:"".concat(p[0]&&p[0].engineType),onChange:this.handleEngineTab,activeKey:"".concat(r.engineType)},{forceRender:!0}),p&&p.map((function(e){var n=e.engineType,l=e.resourceType,o=(0,A.isHadoopEngine)(n),i=o&&(0,A.isKubernetesEngine)(l)?"Kubernetes":R.ENGIN_TYPE_TEXT[n];return O.createElement(x,{className:"tab-pane-wrapper",tab:i,key:"".concat(n)},O.createElement(N.default,{key:"".concat(n,"-tenant"),className:"engine-detail-tabs",tabPosition:"top",animated:!1},(0,A.isHadoopEngine)(n)?O.createElement(x,{tab:"资源全景",key:"showResource"},O.createElement(k.default,{key:"".concat(h),clusterName:h})):null,O.createElement(x,{tab:"租户绑定",key:"bindTenant"},O.createElement("div",{style:{margin:15}},O.createElement(V,{style:{width:"200px",marginBottom:"20px"},placeholder:"按租户名称搜索",value:r.tenantName,onChange:function(e){t.setState({queryParams:Object.assign(t.state.queryParams,{tenantName:e.target.value})})},onSearch:t.changeTenantName}),O.createElement(u.default,{className:"dt-table-border",loading:f,rowKey:function(e,t){return"".concat(t,"-").concat(e.tenantName)},columns:t.getColumn(o,l),dataSource:a,pagination:_,onChange:t.handleTableChange}))),(0,A.isTiDBEngine)(n)||(0,A.isOracleEngine)(n)||(0,A.isGreenPlumEngine)(n)?O.createElement(x,{tab:"账号绑定",key:"bindAccount"},O.createElement(D.default,{key:"".concat(r.clusterId,"-").concat(n),engineType:parseInt(n,10),clusterId:r.clusterId})):null))}))))),O.createElement(L.default,{title:"绑定新租户",visible:E,clusterList:m,isBindTenant:!0,onCancel:function(){t.setState({tenantModal:!1})},onOk:this.bindTenant.bind(this)}),O.createElement(L.default,{key:T,title:g?"切换namespace":"切换队列",visible:v,isBindTenant:!1,isBindNamespace:g,clusterList:m,tenantInfo:this.state.tenantInfo,clusterId:r.clusterId,disabled:!0,onCancel:function(){t.setState({queueModal:!1,tenantInfo:""})},onOk:this.switchQueue.bind(this)}),O.createElement(I.default,{title:"资源管理 (".concat(null!==(e=y.tenantName)&&void 0!==e?e:"",")"),visible:S,isBindTenant:!1,clusterList:m,tenantInfo:this.state.tenantInfo,clusterId:r.clusterId,disabled:!0,tenantId:null==y?void 0:y.tenantId,queue:null==y?void 0:y.queue,queueId:null==y?void 0:y.queueId,onCancel:function(){t.setState({manageModal:!1,tenantInfo:""})},onOk:this.sourceManage.bind(this)}))}}]),n}(O.Component);t.default=K},Hc45:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("ma9I"),n("yq1k"),n("4mDm"),n("oVuX"),n("2B1R"),n("DQNa"),n("T63A"),n("07d7"),n("SuFq"),n("rB9j"),n("JfAA"),n("JTJg"),n("EnZy"),n("3bBZ"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("9xET")),o=r(n("ZPTe")),u=r(n("J4zp")),i=r(n("pVnL")),s=r(n("d1El")),c=r(n("iJl9")),d=r(n("lwsE")),f=r(n("W8MJ")),p=r(n("PJYZ")),m=r(n("7W2i")),E=r(n("a1gu")),v=r(n("Nsbk")),T=r(n("lSNA")),h=r(n("g4D/")),y=r(n("FAat")),S=r(n("qPIi")),g=r(n("qu0K")),N=a(n("q1tI")),C=n("LvDl"),b=n("j1Tt"),O=n("LNB4"),_=n("RzPm"),P=r(n("pXCp"));function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,v.default)(e);if(t){var r=(0,v.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,E.default)(this,n)}}var A=g.default.Item,L=S.default.Group,I=y.default.Option,k=h.default.Group,D=function(e){(0,m.default)(n,e);var t=R(n);function n(){var e;(0,d.default)(this,n);for(var a=arguments.length,r=new Array(a),f=0;f<a;f++)r[f]=arguments[f];return e=t.call.apply(t,[this].concat(r)),(0,T.default)((0,p.default)(e),"renderOptoinsType",(function(t){var n=e.props.view;switch(t.type){case b.CONFIG_ITEM_TYPE.RADIO:return N.createElement(L,{disabled:n},t.values.map((function(e){return N.createElement(S.default,{key:e.key,value:e.value},e.key)})));case b.CONFIG_ITEM_TYPE.SELECT:return N.createElement(y.default,{disabled:n,style:{width:200}},t.values.map((function(e){return N.createElement(I,{key:e.key,value:e.value},e.key)})));case b.CONFIG_ITEM_TYPE.CHECKBOX:return N.createElement(k,{disabled:n,className:"c-componentConfig__checkboxGroup"},t.values.map((function(e){return N.createElement(h.default,{key:e.key,value:"".concat(e.value)},e.key)})));case b.CONFIG_ITEM_TYPE.PASSWORD:return N.createElement(c.default.Password,{disabled:n,style:{maxWidth:680},visibilityToggle:!1});default:return N.createElement(c.default,{disabled:n,style:{maxWidth:680}})}})),(0,T.default)((0,p.default)(e),"renderConfigItem",(function(t,n){var a,r=e.props,l=r.form,o=r.comp,u=null!==(a=null==o?void 0:o.componentTypeCode)&&void 0!==a?a:"",c="deploymode"!==t.key||(0,C.isArray)(t.value)?t.value:t.value.split(),d=n?"".concat(u,".componentConfig.").concat(n):"".concat(u,".componentConfig");return!t.id&&N.createElement(A,(0,i.default)({label:N.createElement(s.default,{title:t.key},N.createElement("span",{className:"c-formConfig__label"},t.key)),key:t.key},_.formItemLayout),l.getFieldDecorator("".concat(d,".").concat(t.key.split(".").join("%")),{rules:[{required:t.required,message:"请输入".concat(t.key)}],initialValue:c})(e.renderOptoinsType(t)))})),(0,T.default)((0,p.default)(e),"rendeConfigForm",(function(){var t,n,a=e.props,r=a.comp,l=a.form,o=a.view,u=null!==(t=null==r?void 0:r.componentTypeCode)&&void 0!==t?t:"",i=null!==(n=(0,O.getValueByJson)(null==r?void 0:r.componentTemplate))&&void 0!==n?n:[],s=!1;return N.createElement(N.Fragment,null,i.map((function(t){if(t.type==b.CONFIG_ITEM_TYPE.GROUP){var n;if(s=!0,(null!==(n=l.getFieldValue("".concat(u,".componentConfig.").concat(t.dependencyKey)))&&void 0!==n?n:[]).includes(null==t?void 0:t.dependencyValue)||!t.dependencyValue)return N.createElement("div",{className:"c-formConfig__group",key:t.key},N.createElement("div",{className:"group__title"},t.key),N.createElement("div",{className:"group__content"},t.values.map((function(n){return e.renderConfigItem(n,t.key)})),N.createElement(P.default,{typeCode:u,form:l,view:o,template:t})))}else{if(!t.dependencyValue)return e.renderConfigItem(t);var a;if((null!==(a=l.getFieldValue("".concat(u,".componentConfig.").concat(t.dependencyKey)))&&void 0!==a?a:"")==(null==t?void 0:t.dependencyValue))return e.renderConfigItem(t)}})),!s&&i.length?N.createElement(P.default,{typeCode:u,form:l,view:o,template:i,maxWidth:680}):null)})),(0,T.default)((0,p.default)(e),"renderKubernetsConfig",(function(){var t,n,a,r=e.props,l=r.comp,o=r.form,u=null!==(t=null==l?void 0:l.componentTypeCode)&&void 0!==t?t:"",i=null!==(n=null!==(a=o.getFieldValue("".concat(u,".specialConfig")))&&void 0!==a?a:null==l?void 0:l.componentConfig)&&void 0!==n?n:"";return N.createElement(N.Fragment,null,i?N.createElement("div",{className:"c-formConfig__kubernetsContent"},"配置文件参数已被加密，此处不予显示"):null,o.getFieldDecorator("".concat(u,".specialConfig"),{initialValue:i||{}})(N.createElement(N.Fragment,null)))})),(0,T.default)((0,p.default)(e),"renderYarnOrHdfsConfig",(function(){var t,n,a,r,i=e.props,c=i.comp,d=i.view,f=i.form,p=null!==(t=null==c?void 0:c.componentTypeCode)&&void 0!==t?t:"",m=null!==(n=(0,O.getValueByJson)(null==c?void 0:c.componentTemplate))&&void 0!==n?n:[],E=null!==(a=(0,O.getValueByJson)(null==c?void 0:c.componentConfig))&&void 0!==a?a:{},v=null!==(r=f.getFieldValue("".concat(p,".specialConfig")))&&void 0!==r?r:E,T=Object.entries(v);return N.createElement(N.Fragment,null,T.map((function(e){var t=(0,u.default)(e,2),n=t[0],a=t[1];return N.createElement(l.default,{key:n,className:"zipConfig-item"},N.createElement(o.default,{className:"formitem-textname",span:_.formItemLayout.labelCol.sm.span+2},N.createElement(s.default,{title:n,placement:"topRight"},N.createElement("span",{className:"form-text-name"},n)),N.createElement("span",null,"：")),N.createElement(o.default,{className:"formitem-textvalue",span:_.formItemLayout.wrapperCol.sm.span+1},"".concat(a)))})),f.getFieldDecorator("".concat(p,".specialConfig"),{initialValue:v||{}})(N.createElement(N.Fragment,null)),T.length>0?N.createElement(P.default,{typeCode:p,form:f,comp:c,view:d,template:m,labelCol:_.formItemLayout.labelCol.sm.span+2,wrapperCol:_.formItemLayout.wrapperCol.sm.span-3}):null)})),(0,T.default)((0,p.default)(e),"renderComponentsConfig",(function(){var t,n=e.props.comp;switch(null!==(t=null==n?void 0:n.componentTypeCode)&&void 0!==t?t:""){case b.COMPONENT_TYPE_VALUE.YARN:case b.COMPONENT_TYPE_VALUE.HDFS:return e.renderYarnOrHdfsConfig();case b.COMPONENT_TYPE_VALUE.KUBERNETES:return e.renderKubernetsConfig();case b.COMPONENT_TYPE_VALUE.SFTP:case b.COMPONENT_TYPE_VALUE.TIDB_SQL:case b.COMPONENT_TYPE_VALUE.LIBRA_SQL:case b.COMPONENT_TYPE_VALUE.ORACLE_SQL:case b.COMPONENT_TYPE_VALUE.IMPALA_SQL:case b.COMPONENT_TYPE_VALUE.GREEN_PLUM_SQL:case b.COMPONENT_TYPE_VALUE.PRESTO_SQL:case b.COMPONENT_TYPE_VALUE.FLINK:case b.COMPONENT_TYPE_VALUE.SPARK:case b.COMPONENT_TYPE_VALUE.DTYARNSHELL:case b.COMPONENT_TYPE_VALUE.LEARNING:case b.COMPONENT_TYPE_VALUE.SPARK_THRIFT_SERVER:case b.COMPONENT_TYPE_VALUE.NFS:case b.COMPONENT_TYPE_VALUE.HIVE_SERVER:return e.rendeConfigForm();default:return null}})),e}return(0,f.default)(n,[{key:"render",value:function(){return N.createElement("div",{className:"c-formConfig__container"},this.renderComponentsConfig())}}]),n}(N.PureComponent);t.default=D},IdH2:function(e,t,n){"use strict";var a=n("TqRt");n("zKZe"),Object.defineProperty(t,"__esModule",{value:!0}),t.testStatus=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.DEFAULT_COMP_TEST,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.UPDATE_TEST_RESULT:var n=t.data;return Object.assign({},e,n);default:return e}},t.showRequireStatus=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.DEFAULT_COMP_REQUIRED,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.UPDATE_REQUIRED_STATUS:var n=t.data;return Object.assign({},e,n);default:return e}},t.updateRequiredStatus=t.updateTestStatus=void 0;var r=a(n("zbcj")),l=n("RzPm"),o=(0,r.default)(["UPDATE_TEST_RESULT","UPDATE_REQUIRED_STATUS"]);t.updateTestStatus=function(e){return{type:o.UPDATE_TEST_RESULT,data:e}};t.updateRequiredStatus=function(e){return{type:o.UPDATE_REQUIRED_STATUS,data:e}}},IiER:function(e,t,n){"use strict";var a=n("TqRt");n("ma9I"),n("QWBl"),n("oVuX"),n("2B1R"),n("E9XD"),n("pDQq"),n("zKZe"),n("tkto"),n("rB9j"),n("EnZy"),Object.defineProperty(t,"__esModule",{value:!0}),t.validateCompParams=o,t.exChangeComponentConf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],u=e.concat(t,n,a,o),i={};return u.map((function(e){var t=e&&e.componentTypeCode;i=Object.assign(i,(0,r.default)({},l.COMPONEMT_CONFIG_KEY_ENUM[t],e.config))})),i},t.showTestResult=function(e,t){var n={},a=u(t);return e&&e.map((function(e){switch(e.componentTypeCode){case l.COMPONENT_TYPE_VALUE.FLINK:n=Object.assign(n,{flinkTestResult:a?e:{}});break;case l.COMPONENT_TYPE_VALUE.SPARK_THRIFT_SERVER:n=Object.assign(n,{sparkThriftTestResult:a?e:{}});break;case l.COMPONENT_TYPE_VALUE.CARBONDATA:n=Object.assign(n,{carbonTestResult:a?e:{}});break;case l.COMPONENT_TYPE_VALUE.IMPALA_SQL:n=Object.assign(n,{impalaSqlTestResult:a?e:{}});break;case l.COMPONENT_TYPE_VALUE.SPARK:n=Object.assign(n,{sparkTestResult:a?e:{}});break;case l.COMPONENT_TYPE_VALUE.DTYARNSHELL:n=Object.assign(n,{dtYarnShellTestResult:a?e:{}});break;case l.COMPONENT_TYPE_VALUE.LEARNING:n=Object.assign(n,{learningTestResult:a?e:{}});break;case l.COMPONENT_TYPE_VALUE.HDFS:n=Object.assign(n,{hdfsTestResult:a?e:{}});break;case l.COMPONENT_TYPE_VALUE.YARN:n=Object.assign(n,{yarnTestResult:a?e:{}});break;case l.COMPONENT_TYPE_VALUE.HIVE_SERVER:n=Object.assign(n,{hiveServerTestResult:a?e:{}});break;case l.COMPONENT_TYPE_VALUE.LIBRA_SQL:n=Object.assign(n,{libraSqlTestResult:a?{}:e});break;case l.COMPONENT_TYPE_VALUE.TIDB_SQL:n=Object.assign(n,{tidbSqlTestResult:a?{}:e});break;case l.COMPONENT_TYPE_VALUE.ORACLE_SQL:n=Object.assign(n,{oracleSqlTestResult:a?{}:e});break;case l.COMPONENT_TYPE_VALUE.SFTP:n=Object.assign(n,{sftpTestResult:a?e:{}});break;default:n=Object.assign(n,{})}})),n},t.validateAllRequired=function(e,t){var n={};return t&&t.map((function(t){e(o(t.componentTypeCode),{force:!0,scroll:{offsetBottom:150}},(function(e,a){t.componentTypeCode==l.COMPONENT_TYPE_VALUE.FLINK?n=e?Object.assign(n,{flinkShowRequired:!0}):Object.assign(n,{flinkShowRequired:!1}):t.componentTypeCode===l.COMPONENT_TYPE_VALUE.SPARK_THRIFT_SERVER?n=e?Object.assign(n,{hiveShowRequired:!0}):Object.assign(n,{hiveShowRequired:!1}):t.componentTypeCode===l.COMPONENT_TYPE_VALUE.CARBONDATA?n=e?Object.assign(n,{carbonShowRequired:!0}):Object.assign(n,{carbonShowRequired:!1}):t.componentTypeCode===l.COMPONENT_TYPE_VALUE.IMPALA_SQL?n=e?Object.assign(n,{impalaSqlRequired:!0}):Object.assign(n,{impalaSqlRequired:!1}):t.componentTypeCode===l.COMPONENT_TYPE_VALUE.HIVE_SERVER?n=e?Object.assign(n,{hiveServerShowRequired:!0}):Object.assign(n,{hiveServerShowRequired:!1}):t.componentTypeCode===l.COMPONENT_TYPE_VALUE.SPARK?n=e?Object.assign(n,{sparkShowRequired:!0}):Object.assign(n,{sparkShowRequired:!1}):t.componentTypeCode===l.COMPONENT_TYPE_VALUE.DTYARNSHELL?n=e?Object.assign(n,{dtYarnShellShowRequired:!0}):Object.assign(n,{dtYarnShellShowRequired:!1}):t.componentTypeCode===l.COMPONENT_TYPE_VALUE.LEARNING?n=e?Object.assign(n,{learningShowRequired:!0}):Object.assign(n,{learningShowRequired:!1}):t.componentTypeCode===l.COMPONENT_TYPE_VALUE.HDFS?n=e?Object.assign(n,{hdfsShowRequired:!0}):Object.assign(n,{hdfsShowRequired:!1}):t.componentTypeCode===l.COMPONENT_TYPE_VALUE.YARN?n=e?Object.assign(n,{yarnShowRequired:!0}):Object.assign(n,{yarnShowRequired:!1}):t.componentTypeCode===l.COMPONENT_TYPE_VALUE.LIBRA_SQL?n=e?Object.assign(n,{libraShowRequired:!0}):Object.assign(n,{libraShowRequired:!1}):t.componentTypeCode===l.COMPONENT_TYPE_VALUE.SFTP&&(n=e?Object.assign(n,{sftpShowRequired:!0}):Object.assign(n,{sftpShowRequired:!1}))}))})),n},t.displayTaskStatus=function(e){switch(e){case l.TASK_STATE.UNSUBMIT:return"UNSUBMIT";case l.TASK_STATE.CREATED:return"CREATED";case l.TASK_STATE.SCHEDULED:return"SCHEDULED";case l.TASK_STATE.DEPLOYING:return"DEPLOYING";case l.TASK_STATE.RUNNING:return"RUNNING";case l.TASK_STATE.FINISHED:return"FINISHED";case l.TASK_STATE.CANCELLING:return"CANCELLING";case l.TASK_STATE.CANCELED:return"CANCELED";case l.TASK_STATE.FAILED:return"FAILED";case l.TASK_STATE.SUBMITFAILD:return"SUBMITFAILD";case l.TASK_STATE.SUBMITTING:return"SUBMITTING";case l.TASK_STATE.RESTARTING:return"RESTARTING";case l.TASK_STATE.MANUALSUCCESS:return"MANUALSUCCESS";case l.TASK_STATE.KILLED:return"KILLED";case l.TASK_STATE.SUBMITTED:return"SUBMITTED";case l.TASK_STATE.NOTFOUND:return"NOTFOUND";case l.TASK_STATE.WAITENGINE:return"WAITENGINE";case l.TASK_STATE.WAITCOMPUTE:return"WAITCOMPUTE";case l.TASK_STATE.FROZEN:return"FROZEN";case l.TASK_STATE.ENGINEACCEPTED:return"ENGINEACCEPTED";case l.TASK_STATE.ENGINEDISTRIBUTE:return"ENGINEDISTRIBUTE";case l.TASK_STATE.COMPUTING:return"COMPUTING";case l.TASK_STATE.PARENTFAILED:return"PARENTFAILED";case l.TASK_STATE.FAILING:return"FAILING";case l.TASK_STATE.EXPIRE:return"EXPIRE";default:return null}},t.myUpperCase=function(e){var t={},n=[],a=[],r=[];for(var l in e)e.hasOwnProperty(l)&&(n.push(l),a.push(e[l]));n.forEach((function(e,t){for(var n=e.split("."),a=n[0],l=1;l<n.length;l++){var o=n[l].split(""),u=o.shift();u=u.toUpperCase(),o.unshift(u),a+=o.join("")}r[t]=a}));for(var o=0;o<a.length;o++)t[r[o]]=a[o];return t},t.myLowerCase=function(e){var t={};for(var n in e){var a="openKerberos"===n||"kerberosFile"===n;if(e.hasOwnProperty(n)&&!a){var r=void 0;r=n.split("");for(var l=0;l<r.length;l++)"."==r[l]?(r.splice(l,1),r[l]=r[l].toUpperCase()):-1!="QWERTYUIOPLKJHGFDSAZXCVBNM".indexOf(r[l])&&(r[l]=r[l].toLowerCase(),r.splice(l,0,"."),l++);var o=r.join("");t[o]=e[n]}else t[n]=e[n]}return t},t.toChsKeys=function(e,t){return Object.keys(e).reduce((function(n,a){return n[t[a]||a]=e[a],n}),{})},t.isHadoopEngine=u,t.isLibraEngine=function(e){return e==l.ENGINE_TYPE.LIBRA},t.isTiDBEngine=function(e){return e==l.ENGINE_TYPE.TI_DB},t.isOracleEngine=function(e){return e==l.ENGINE_TYPE.ORACLE},t.isGreenPlumEngine=function(e){return e==l.ENGINE_TYPE.GREEN_PLUM},t.isKubernetesEngine=function(e){return e==l.RESOURCE_TYPE.KUBERNETES};var r=a(n("lSNA")),l=n("RzPm");function o(e){switch(e){case l.COMPONENT_TYPE_VALUE.FLINK:return l.validateFlinkParams;case l.COMPONENT_TYPE_VALUE.SPARK_THRIFT_SERVER:return l.validateHiveParams;case l.COMPONENT_TYPE_VALUE.CARBONDATA:return l.validateCarbonDataParams;case l.COMPONENT_TYPE_VALUE.IMPALA_SQL:return l.validateImpalaSqlParams;case l.COMPONENT_TYPE_VALUE.SPARK:return l.validateSparkParams;case l.COMPONENT_TYPE_VALUE.DTYARNSHELL:return l.validateDtYarnShellParams;case l.COMPONENT_TYPE_VALUE.LEARNING:return l.validateLearningParams;case l.COMPONENT_TYPE_VALUE.HIVE_SERVER:return l.validateHiveServerParams;case l.COMPONENT_TYPE_VALUE.HDFS:case l.COMPONENT_TYPE_VALUE.YARN:return[];case l.COMPONENT_TYPE_VALUE.LIBRA_SQL:return l.validateLibraParams;case l.COMPONENT_TYPE_VALUE.SFTP:return l.validateSftpDataParams;default:return null}}function u(e){return e==l.ENGINE_TYPE.HADOOP}},JtgN:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("pNMO"),n("TeQF"),n("QWBl"),n("yXV3"),n("DQNa"),n("HRxU"),n("eoL8"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("SuFq"),n("rB9j"),n("JfAA"),n("UxlC"),n("FZtP"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("lwsE")),o=r(n("W8MJ")),u=r(n("PJYZ")),i=r(n("7W2i")),s=r(n("a1gu")),c=r(n("Nsbk")),d=r(n("lSNA")),f=a(n("q1tI")),p=n("LvDl"),m=a(n("ProS"));function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,d.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,s.default)(this,n)}}n("Ynxi"),n("AH3D"),n("zRKj"),n("0o9m"),n("75ce"),n("lLGD"),n("wDdD"),n("B+YJ");var h=function(e){(0,i.default)(n,e);var t=T(n);function n(e){var a;return(0,l.default)(this,n),a=t.call(this,e),(0,d.default)((0,u.default)(a),"chart",null),(0,d.default)((0,u.default)(a),"styleFormat",(function(e){return"string"==typeof e?e.indexOf("%")>-1?e:e.replace(/[px]/gi,"")+"px":e+"px"})),a.state={myChart:null},a}return(0,o.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.option,t=m.init(this.chart);t.setOption(e),this.setState({myChart:t})}},{key:"componentWillUnmount",value:function(){this.state.myChart.dispose()}},{key:"componentDidUpdate",value:function(e){var t=this.props.option;(0,p.isEqual)(e.option,t)||this.state.myChart.setOption(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,a=t.height,r=v(v({},t.style),{},{width:n?this.styleFormat(n):"100%",height:a?this.styleFormat(a):"300px"});return f.createElement("div",{ref:function(t){return e.chart=t},style:r})}}]),n}(f.PureComponent);t.default=h},"K4z+":function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("pNMO"),n("ma9I"),n("TeQF"),n("fbCW"),n("x0AG"),n("QWBl"),n("2B1R"),n("DQNa"),n("HRxU"),n("eoL8"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("SuFq"),n("JfAA"),n("FZtP"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("CC+v")),o=r(n("qu0K")),u=r(n("pVnL")),i=r(n("DtFj")),s=r(n("ATwu")),c=r(n("Pbn2")),d=r(n("iJl9")),f=r(n("RIqP")),p=r(n("lwsE")),m=r(n("W8MJ")),E=r(n("PJYZ")),v=r(n("7W2i")),T=r(n("a1gu")),h=r(n("Nsbk")),y=r(n("lSNA")),S=r(n("FAat")),g=a(n("q1tI")),N=n("RzPm"),C=n("FZsQ"),b=n("LvDl");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,y.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,h.default)(e);if(t){var r=(0,h.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,T.default)(this,n)}}var R=S.default.Option,A=function(e){(0,v.default)(n,e);var t=P(n);function n(e){var a;return(0,p.default)(this,n),a=t.call(this,e),(0,y.default)((0,E.default)(a),"addTableData",(function(){a.setState((function(e){return{tableData:[].concat((0,f.default)(e.tableData),[{id:(0,C.giveMeAKey)()}])}}))})),(0,y.default)((0,E.default)(a),"deleteTableData",(function(e){var t=a.state.tableData,n=(0,b.cloneDeep)(t);n=n.filter((function(t){return t.id!==e.id})),a.setState({tableData:n})})),(0,y.default)((0,E.default)(a),"handleValueChange",(function(e,t,n){var r=a.state.tableData,l=(0,b.cloneDeep)(r),o=l.findIndex((function(e){return e.id==n.id}));o>-1&&(l[o][e]=t),a.setState({tableData:l})})),(0,y.default)((0,E.default)(a),"onCancel",(function(e){a.props.onCancel(e)})),(0,y.default)((0,E.default)(a),"onSubmit",(function(){var e=a.props,t=e.form,n=e.data,r=e.userList,l=e.onOk;if(null!=n)t.validateFields((function(e,t){if(!e){t.id=(0,b.get)(n,"id",""),t.bindUserId="";var a=r.find((function(e){return e.userId==t.bindUserId}));a&&(t.username=a.userName,t.email=a.userName,t.bindUserId=a.bindUserId),l(t)}}));else{var o=a.state.tableData.map((function(e){var t=r.find((function(t){return t.userId==e.bindUserId}));return _(_({},e),{},{password:"",username:null==t?void 0:t.userName,emali:null==t?void 0:t.userName})}));l(o)}})),(0,y.default)((0,E.default)(a),"initColumns",(function(){var e=a.props.userList;return[{title:"产品账号",dataIndex:"bindUserId",render:function(t,n){return g.createElement(S.default,{defaultValue:t,style:{width:160},onChange:function(e){return a.handleValueChange("bindUserId",e,n)}},e.map((function(e){return g.createElement(R,{key:"".concat(e.userId),value:e.userId},e.userName)})))}},{title:"LDAP账号",dataIndex:"name",render:function(e,t){return g.createElement(d.default,{onChange:function(e){return a.handleValueChange("name",e.target.value,t)},style:{width:160},value:e})}},{title:null,dataIndex:"action",width:40,render:function(e,t){return g.createElement(c.default,{type:"delete",onClick:function(){return a.deleteTableData(t)}})}}]})),a.state={tableData:[{id:(0,C.giveMeAKey)()}]},a}return(0,m.default)(n,[{key:"render",value:function(){var e=this.state.tableData,t=this.props,n=t.title,a=t.visible,r=t.data,f=this.props.form.getFieldDecorator;return g.createElement(l.default,{className:"no-padding-modal",closable:!0,title:n,visible:a,onCancel:this.onCancel,onOk:this.onSubmit},g.createElement(s.default,{style:{border:0},message:"产品账号绑定LDAP账号后任务提交至Yarn上将对接用户",type:"info",showIcon:!0}),g.createElement("div",{style:{padding:"12px 20px"}},r?g.createElement(g.Fragment,null,g.createElement(o.default,null,g.createElement(o.default.Item,(0,u.default)({key:"bindUserId",label:"产品账号"},N.formItemLayout),f("bindUserId",{rules:[{required:!0,message:"产品账号不可为空！"}],initialValue:(0,b.get)(r,"username","")})(g.createElement(d.default,{disabled:!0}))),g.createElement(o.default.Item,(0,u.default)({key:"bindLdapAccount",label:"LDAP账号"},N.formItemLayout),f("name",{rules:[{required:!0,message:"LDAP账号不可为空！"}],initialValue:(0,b.get)(r,"name","")})(g.createElement(d.default,null))))):g.createElement(g.Fragment,null,g.createElement(i.default,{className:"c-ldap__bindModal",columns:this.initColumns(),dataSource:e,pagination:!1}),e.length>20?g.createElement("a",{style:{color:"#BFBFBF"}},g.createElement(c.default,{type:"plus"}),"新增"):g.createElement("a",{style:{color:"#3F87FF"},onClick:this.addTableData},g.createElement(c.default,{type:"plus"}),"新增"))))}}]),n}(g.Component),L=o.default.create()(A);t.default=L},KQ7z:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("DQNa"),n("07d7"),n("SuFq"),n("JfAA"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("lwsE")),o=r(n("W8MJ")),u=r(n("7W2i")),i=r(n("a1gu")),s=r(n("Nsbk")),c=a(n("q1tI")),d=r(n("aSnJ"));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,i.default)(this,n)}}var p=function(e){(0,u.default)(n,e);var t=f(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props.children;return c.createElement("div",{className:"main"},c.createElement(d.default,null,c.createElement("div",{className:"container overflow-x-hidden",id:"JS_console_container"},e||"加载中....")))}}]),n}(c.Component);t.default=p},KnRw:function(e,t,n){var a={"./af":"/Tvm","./af.js":"/Tvm","./ar":"yRKQ","./ar-dz":"2Mgn","./ar-dz.js":"2Mgn","./ar-kw":"SyK9","./ar-kw.js":"SyK9","./ar-ly":"Km2t","./ar-ly.js":"Km2t","./ar-ma":"k+3Q","./ar-ma.js":"k+3Q","./ar-sa":"dbzX","./ar-sa.js":"dbzX","./ar-tn":"E7L0","./ar-tn.js":"E7L0","./ar.js":"yRKQ","./az":"marO","./az.js":"marO","./be":"c9Cq","./be.js":"c9Cq","./bg":"Rxhz","./bg.js":"Rxhz","./bm":"Zf0k","./bm.js":"Zf0k","./bn":"qbSa","./bn-bd":"Dicg","./bn-bd.js":"Dicg","./bn.js":"qbSa","./bo":"aPmz","./bo.js":"aPmz","./br":"V/F2","./br.js":"V/F2","./bs":"CToL","./bs.js":"CToL","./ca":"GuxH","./ca.js":"GuxH","./cs":"qrel","./cs.js":"qrel","./cv":"wv9F","./cv.js":"wv9F","./cy":"7JVd","./cy.js":"7JVd","./da":"PtRy","./da.js":"PtRy","./de":"xhqU","./de-at":"bJtj","./de-at.js":"bJtj","./de-ch":"fRjz","./de-ch.js":"fRjz","./de.js":"xhqU","./dv":"tEna","./dv.js":"tEna","./el":"vE8+","./el.js":"vE8+","./en-au":"aGvD","./en-au.js":"aGvD","./en-ca":"TyIU","./en-ca.js":"TyIU","./en-gb":"xbvL","./en-gb.js":"xbvL","./en-ie":"8wpQ","./en-ie.js":"8wpQ","./en-il":"O112","./en-il.js":"O112","./en-in":"vfvX","./en-in.js":"vfvX","./en-nz":"mRnY","./en-nz.js":"mRnY","./en-sg":"fIpc","./en-sg.js":"fIpc","./eo":"nEfC","./eo.js":"nEfC","./es":"QqXE","./es-do":"OH6n","./es-do.js":"OH6n","./es-mx":"QajH","./es-mx.js":"QajH","./es-us":"VqXm","./es-us.js":"VqXm","./es.js":"QqXE","./et":"/BjE","./et.js":"/BjE","./eu":"lS/Y","./eu.js":"lS/Y","./fa":"Xl2a","./fa.js":"Xl2a","./fi":"pKmA","./fi.js":"pKmA","./fil":"zqRz","./fil.js":"zqRz","./fo":"1sIW","./fo.js":"1sIW","./fr":"t+gs","./fr-ca":"ApVP","./fr-ca.js":"ApVP","./fr-ch":"mR/r","./fr-ch.js":"mR/r","./fr.js":"t+gs","./fy":"zrXP","./fy.js":"zrXP","./ga":"oh3e","./ga.js":"oh3e","./gd":"7WNt","./gd.js":"7WNt","./gl":"EkHg","./gl.js":"EkHg","./gom-deva":"PB9U","./gom-deva.js":"PB9U","./gom-latn":"IlNN","./gom-latn.js":"IlNN","./gu":"SIlg","./gu.js":"SIlg","./he":"RWgf","./he.js":"RWgf","./hi":"fVgC","./hi.js":"fVgC","./hr":"QeL5","./hr.js":"QeL5","./hu":"UGq4","./hu.js":"UGq4","./hy-am":"powx","./hy-am.js":"powx","./id":"+gpe","./id.js":"+gpe","./is":"3azS","./is.js":"3azS","./it":"T/vC","./it-ch":"BQHH","./it-ch.js":"BQHH","./it.js":"T/vC","./ja":"n/+T","./ja.js":"n/+T","./jv":"pOn/","./jv.js":"pOn/","./ka":"5BLU","./ka.js":"5BLU","./kk":"i4p7","./kk.js":"i4p7","./km":"Rdvl","./km.js":"Rdvl","./kn":"x+k7","./kn.js":"x+k7","./ko":"+Fhz","./ko.js":"+Fhz","./ku":"4wLu","./ku.js":"4wLu","./ky":"dDLa","./ky.js":"dDLa","./lb":"Gudj","./lb.js":"Gudj","./lo":"VShb","./lo.js":"VShb","./lt":"5eMR","./lt.js":"5eMR","./lv":"JdG9","./lv.js":"JdG9","./me":"VVnP","./me.js":"VVnP","./mi":"oQ6b","./mi.js":"oQ6b","./mk":"tXUT","./mk.js":"tXUT","./ml":"uPxb","./ml.js":"uPxb","./mn":"p9cx","./mn.js":"p9cx","./mr":"b8N1","./mr.js":"b8N1","./ms":"Wnnz","./ms-my":"b+tO","./ms-my.js":"b+tO","./ms.js":"Wnnz","./mt":"V6YG","./mt.js":"V6YG","./my":"rt8X","./my.js":"rt8X","./nb":"xyXD","./nb.js":"xyXD","./ne":"4vTz","./ne.js":"4vTz","./nl":"6QMr","./nl-be":"LMGY","./nl-be.js":"LMGY","./nl.js":"6QMr","./nn":"Qsvx","./nn.js":"Qsvx","./oc-lnc":"Q7AQ","./oc-lnc.js":"Q7AQ","./pa-in":"oA7N","./pa-in.js":"oA7N","./pl":"C/jI","./pl.js":"C/jI","./pt":"V7OV","./pt-br":"b3iz","./pt-br.js":"b3iz","./pt.js":"V7OV","./ro":"TwjK","./ro.js":"TwjK","./ru":"YJSy","./ru.js":"YJSy","./sd":"4xdR","./sd.js":"4xdR","./se":"j5S3","./se.js":"j5S3","./si":"Am5L","./si.js":"Am5L","./sk":"sSmc","./sk.js":"sSmc","./sl":"9iY4","./sl.js":"9iY4","./sq":"cnMZ","./sq.js":"cnMZ","./sr":"ss7R","./sr-cyrl":"tGLK","./sr-cyrl.js":"tGLK","./sr.js":"ss7R","./ss":"mYhl","./ss.js":"mYhl","./sv":"IGtO","./sv.js":"IGtO","./sw":"p49z","./sw.js":"p49z","./ta":"VVil","./ta.js":"VVil","./te":"YQaq","./te.js":"YQaq","./tet":"2u18","./tet.js":"2u18","./tg":"oil7","./tg.js":"oil7","./th":"gJLt","./th.js":"gJLt","./tk":"IxH1","./tk.js":"IxH1","./tl-ph":"ogwM","./tl-ph.js":"ogwM","./tlh":"0bHV","./tlh.js":"0bHV","./tr":"BYDG","./tr.js":"BYDG","./tzl":"IUMd","./tzl.js":"IUMd","./tzm":"94jC","./tzm-latn":"Mgge","./tzm-latn.js":"Mgge","./tzm.js":"94jC","./ug-cn":"4xjM","./ug-cn.js":"4xjM","./uk":"NrFT","./uk.js":"NrFT","./ur":"U58I","./ur.js":"U58I","./uz":"orAx","./uz-latn":"jCvl","./uz-latn.js":"jCvl","./uz.js":"orAx","./vi":"t2dB","./vi.js":"t2dB","./x-pseudo":"XFnJ","./x-pseudo.js":"XFnJ","./yo":"qKGQ","./yo.js":"qKGQ","./zh-cn":"3O3J","./zh-cn.js":"3O3J","./zh-hk":"Fu0X","./zh-hk.js":"Fu0X","./zh-mo":"sCN4","./zh-mo.js":"sCN4","./zh-tw":"2Pdx","./zh-tw.js":"2Pdx"};function r(e){var t=l(e);return n(t)}function l(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=l,e.exports=r,r.id="KnRw"},L56I:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("ma9I"),n("2B1R"),n("DQNa"),n("wLYn"),n("07d7"),n("SuFq"),n("JfAA"),n("R5XZ"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RedTxt=void 0;var l=r(n("CC+v")),o=r(n("QpBz")),u=r(n("lwsE")),i=r(n("W8MJ")),s=r(n("PJYZ")),c=r(n("7W2i")),d=r(n("a1gu")),f=r(n("Nsbk")),p=r(n("lSNA")),m=r(n("VkAN")),E=a(n("q1tI")),v=r(n("9ObM")),T=r(n("RHHV"));function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}function y(){var e=(0,m.default)(["\n    color: #FF5F5C;\n"]);return y=function(){return e},e}var S=v.default.span(y());t.RedTxt=S;var g=function(e){(0,c.default)(n,e);var t=h(n);function n(){var e;(0,u.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,p.default)((0,s.default)(e),"state",{confirmLoading:!1}),e}return(0,i.default)(n,[{key:"killTask",value:function(){var e=this,t=this.props.killResource,n=void 0===t?[]:t,a=this.getReqParams();T.default.killTasks(a).then((function(t){1==t.code?setTimeout((function(){o.default.success("操作成功"),e.props.killSuccess(n),e.props.autoRefresh(),e.props.onCancel(),e.setState({confirmLoading:!1})}),1e3):e.setState({confirmLoading:!1})}))}},{key:"getReqParams",value:function(){var e=this.props,t=e.killResource,n=void 0===t?[]:t,a=e.node,r={stage:e.stage,jobResource:e.jobResource,jobIdList:[],nodeAddress:a},l=void 0!==e.totalModel;return r.jobIdList=l?[]:n.map((function(e){return e.jobId})),r}},{key:"confirmKillTask",value:function(){this.setState({confirmLoading:!0}),this.killTask()}},{key:"render",value:function(){var e=void 0!==this.props.totalModel,t=e?"杀死全部任务":"杀死选中任务",n=e?E.createElement("div",null,E.createElement(S,null,"本操作将杀死列表（跨分页）中的全部任务，不仅是当前页"),E.createElement("br",null),E.createElement(S,null,"杀死运行中的任务需要较长时间")):E.createElement(S,null,"本操作将杀死列表（非跨分页）中的选中任务");return E.createElement(l.default,{title:t,visible:this.props.visible,okText:t,okType:"danger",confirmLoading:this.state.confirmLoading,onCancel:this.props.onCancel,onOk:this.confirmKillTask.bind(this)},n)}}]),n}(E.Component);t.default=g},LNB4:function(e,t,n){"use strict";var a=n("TqRt");n("pNMO"),n("4Brf"),n("0oug"),n("ma9I"),n("TeQF"),n("QWBl"),n("pjDv"),n("yXV3"),n("J30X"),n("4mDm"),n("oVuX"),n("2B1R"),n("+2oP"),n("DQNa"),n("sMBO"),n("qePV"),n("HRxU"),n("eoL8"),n("T63A"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("B6y2"),n("rB9j"),n("JfAA"),n("YGK4"),n("PKPk"),n("EnZy"),n("FZtP"),n("3bBZ"),Object.defineProperty(t,"__esModule",{value:!0}),t.isNeedTemp=p,t.isKubernetes=function(e){return i.COMPONENT_TYPE_VALUE.KUBERNETES==e},t.isHaveGroup=m,t.getActionType=function(e){switch(e){case"view":return"查看集群";case"new":return"新增集群";case"edit":return"编辑集群";default:return""}},t.isSourceTab=function(e){return e==i.TABS_TITLE_KEY.SOURCE},t.initialScheduling=function(){var e=[];return Object.values(i.TABS_TITLE_KEY).map((function(t){return e[t]=[]}))},t.giveMeAKey=function(){return(new Date).getTime()+""+~~(1e5*Math.random())},t.isViewMode=function(e){return"view"==e},t.isFileParam=E,t.isOtherVersion=function(e){return[i.COMPONENT_TYPE_VALUE.FLINK,i.COMPONENT_TYPE_VALUE.SPARK,i.COMPONENT_TYPE_VALUE.SPARK_THRIFT_SERVER,i.COMPONENT_TYPE_VALUE.HIVE_SERVER].indexOf(e)>-1},t.isSameVersion=function(e){return[i.COMPONENT_TYPE_VALUE.HDFS,i.COMPONENT_TYPE_VALUE.YARN].indexOf(e)>-1},t.getCustomerParams=function(e){return e.filter((function(e){return e.id}))},t.getCompsId=function(e,t){var n=[];return e.forEach((function(e){t.indexOf(null==e?void 0:e.componentTypeCode)>-1&&(null==e?void 0:e.id)&&n.push(e.id)})),n},t.getValueByJson=function(e){return e?JSON.parse(e):null},t.needZipFile=function(e){return[i.FILE_TYPE.KERNEROS,i.FILE_TYPE.CONFIGS].indexOf(e)>-1},t.handleCustomParam=T,t.getParamsByTemp=h,t.handleComponentTemplate=function(e,t){for(var n=JSON.parse(t.componentTemplate).filter((function(e){return!e.id})),a=S(e),r=T(e.customParam),l=!1,s=function(){var e=(0,o.default)(d[c],2),t=e[0],a=e[1];if(u.default.isString(a)||u.default.isArray(a))n.map((function(e){e.key==t&&(e.value=a)}));else for(var r=function(){var e=(0,o.default)(i[l],2),a=e[0],r=e[1];n.map((function(e){e.key==t&&(e.values=e.values.filter((function(e){return!e.id})),e.values.map((function(e){e.key==a&&(e.value=r)})))}))},l=0,i=Object.entries(a);l<i.length;l++)r()},c=0,d=Object.entries(a);c<d.length;c++)s();if(0==Object.values(r).length)return n;for(var f in r){var p;if(!(null===(p=r[f])||void 0===p?void 0:p.id)){l=!0;for(var m=function(){var e=(0,o.default)(v[E],2),t=e[0],a=e[1];n.map((function(e){e.key==t&&e.type==i.CONFIG_ITEM_TYPE.GROUP&&(e.values=e.values.concat(a))}))},E=0,v=Object.entries(r[f]);E<v.length;E++)m()}}return l?n:n.concat(r)},t.handleComponentConfig=S,t.handleComponentConfigAndCustom=g,t.getInitialComp=N,t.getModifyComp=function(e,t){for(var n=["storeType","principal","hadoopVersion","kerberosFileName","uploadFileName"],a=new Set,r=0,l=Object.entries(e);r<l.length;r++){var i,c=(0,o.default)(l[r],2),d=c[0],f=c[1],m=N(t,Number(d)),v=s(n);try{for(v.s();!(i=v.n()).done;){var T,y,S,C,b=i.value,O=f[b];if(E(b))O=null!==(S=null===(C=f[b])||void 0===C?void 0:C.name)&&void 0!==S?S:f[b];O&&!u.default.isEqual(O,null!==(T=null===(y=m[b])||void 0===y?void 0:y.name)&&void 0!==T?T:m[b])&&a.add(d)}}catch(e){v.e(e)}finally{v.f()}if(p(Number(d))){var _=h(JSON.parse(null==m?void 0:m.componentTemplate));!f.customParam&&!Object.values(_).length||u.default.isEqual(f.customParam,_)||a.add(d)}else{var P=g(f,Number(d));u.default.isEqual(P,(null==m?void 0:m.componentConfig)?JSON.parse(m.componentConfig):{})||a.add(d)}}return a};var r=a(n("RIqP")),l=a(n("lSNA")),o=a(n("J4zp")),u=a(n("LvDl")),i=n("j1Tt");function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,o=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,l=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw l}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e){return[i.COMPONENT_TYPE_VALUE.YARN,i.COMPONENT_TYPE_VALUE.HDFS,i.COMPONENT_TYPE_VALUE.KUBERNETES].indexOf(e)>-1}function m(e){return[i.COMPONENT_TYPE_VALUE.FLINK,i.COMPONENT_TYPE_VALUE.SPARK,i.COMPONENT_TYPE_VALUE.LEARNING,i.COMPONENT_TYPE_VALUE.DTYARNSHELL].indexOf(e)>-1}function E(e){return["kerberosFileName","uploadFileName"].indexOf(e)>-1}function v(e){var t=[],n=[];if(!e)return{};for(var a=0,r=Object.entries(e);a<r.length;a++){var i=(0,o.default)(r[a],2),s=i[0],c=i[1];if(c&&u.default.isString(c)&&u.default.isString(s)){var d=s.split("%")[1].split("-");t[d[0]]=f(f({},t[d[0]]),{},(0,l.default)({},d[1],c))}}for(var p in t){var m={};m.key=t[p].key,m.value=t[p].value,m.id=p,n.push(m)}return n}function T(e,t){var n=[];if(!e)return{};for(var a=0,i=Object.entries(e);a<i.length;a++){var c=(0,o.default)(i[a],2),d=c[0],f=c[1];f&&!u.default.isString(f)&&(n=[].concat((0,r.default)(n),[(0,l.default)({},d,v(f))]))}if(t){var p,m={},E=s(n.concat(v(e)));try{for(E.s();!(p=E.n()).done;){var T=p.value;m[T.key]=T.value}}catch(e){E.e(e)}finally{E.f()}return m}return n.concat(v(e))}function h(e){var t={};return e.forEach((function(e){if(e.type==i.CONFIG_ITEM_TYPE.GROUP){var n={};e.values.forEach((function(e){var t,a;e.id&&(n["%"+e.id+"-key"]=null!==(t=null==e?void 0:e.key)&&void 0!==t?t:"",n["%"+e.id+"-value"]=null!==(a=null==e?void 0:e.value)&&void 0!==a?a:"")})),t[e.key]=n}var a,r;e.id&&(t["%"+e.id+"-key"]=null!==(a=null==e?void 0:e.key)&&void 0!==a?a:"",t["%"+e.id+"-value"]=null!==(r=null==e?void 0:e.value)&&void 0!==r?r:"")})),t}function y(e,t){var n=e;return["c.NotebookApp.ip","c.NotebookApp.token","c.NotebookApp.default_url"].forEach((function(a){a===t&&-1===e.indexOf("'")&&(n="'".concat(e,"'"))})),n}function S(e,t){for(var n={},a=0,r=Object.entries(e.componentConfig);a<r.length;a++){var l=(0,o.default)(r[a],2),i=l[0],s=l[1];if(n[i]=s,!u.default.isString(s)&&!u.default.isArray(s)){for(var c={},d=0,f=Object.entries(s);d<f.length;d++){var p=(0,o.default)(f[d],2),m=p[0],E=p[1];t?c[m.split(".").join("%")]=E:c[m.split("%").join(".")]=y(E,m.split("%").join("."))}n[i]=c}}return n}function g(e,t){var n=S(e),a=T(e.customParam);if(m(t)&&a.length){var r,o=s(a);try{for(o.s();!(r=o.n()).done;){var u=r.value;for(var i in u){var c,d=s(u[i]);try{for(d.s();!(c=d.n()).done;){var p=c.value;n[i]=f(f({},n[i]),{},(0,l.default)({},p.key,p.value))}}catch(e){d.e(e)}finally{d.f()}}}}catch(e){o.e(e)}finally{o.f()}}if(!m(t)&&Object.values(a).length){var E,v=s(a);try{for(v.s();!(E=v.n()).done;){var h=E.value;n=f(f({},n),{},(0,l.default)({},h.key,h.value))}}catch(e){v.e(e)}finally{v.f()}}return n}function N(e,t){var n,a={},r=s(e);try{for(r.s();!(n=r.n()).done;){var l,o=s(n.value);try{for(o.s();!(l=o.n()).done;){var u=l.value;u.componentTypeCode==t&&(a=u)}}catch(e){o.e(e)}finally{o.f()}}}catch(e){r.e(e)}finally{r.f()}return a}},OHU0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showAlertGateCode=function(e){return a.ALARM_TYPE.CUSTOM!==e},t.showIsDefault=function(e){return a.ALARM_TYPE.CUSTOM!==e},t.showConfigFile=function(e){return a.ALARM_TYPE.CUSTOM===e},t.showAlertGateJson=function(e,t){return a.CHANNEL_MODE_VALUE.DING_DT!==e||a.ALARM_TYPE.CUSTOM===t},t.showAlertTemplete=function(e,t){return a.ALARM_TYPE.EMAIL===e&&a.CHANNEL_MODE_VALUE.MAIL_DT===t||a.ALARM_TYPE.CUSTOM===e},t.canTestAlarm=function(e){return a.ALARM_TYPE.DING!==e},t.textAlertKey=function(e){return e===a.ALARM_TYPE.EMAIL?"emails":"phones"};var a=n("RzPm")},Ps9q:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SCHEDULE_TYPE=t.pieOption=t.ALARM_HIGHT=t.ALARM_DEFAULT=void 0;t.ALARM_DEFAULT=40;t.ALARM_HIGHT=70;var a={series:[{type:"pie",hoverAnimation:!1,radius:["72%","80%"],startAngle:210,labelLine:{normal:{show:!1}},label:{normal:{position:"center"}},data:[{value:40,itemStyle:{normal:{color:"#16DE9A"}}},{value:30,itemStyle:{normal:{color:"#FFB310"}}},{value:30,itemStyle:{normal:{color:"#FF5F5C"}}},{value:50,itemStyle:{normal:{label:{show:!1},labelLine:{show:!1},color:"rgba(0,0,0,0)",borderWidth:0}}}]},{type:"pie",hoverAnimation:!1,radius:["52%","70%"],startAngle:210,labelLine:{normal:{show:!1}},label:{normal:{position:"center"}},data:[{value:75,itemStyle:{normal:{color:"#FF5F5C"}},label:{normal:{formatter:"{c}%",position:"center",show:!0,textStyle:{fontSize:12,fontWeight:600,color:"#333333"}}}},{value:75,itemStyle:{normal:{label:{show:!1},labelLine:{show:!1},color:"rgba(0,0,0,0)",borderWidth:0}}}]}]};t.pieOption=a;t.SCHEDULE_TYPE={Capacity:"capacityScheduler",Fair:"fairScheduler",FIFO:"fifoScheduler"}},RHHV:function(e,t,n){"use strict";var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("AwqB")),l=a(n("C4JW")),o={addCluster:function(e){return r.default.post(l.default.ADD_CLUSTER,e)},getClusterInfo:function(e){return r.default.post(l.default.GET_CLUSTER_INFO,e)},uploadResource:function(e){return r.default.postAsFormData(l.default.UPLOAD_RESOURCE,e)},deleteComponent:function(e){return r.default.post(l.default.DELETE_COMPONENT,e)},deleteCluster:function(e){return r.default.post(l.default.DELETE_CLUSTER,e)},testConnects:function(e){return r.default.post(l.default.TEST_CONNECTS,e)},closeKerberos:function(e){return r.default.post(l.default.CLOSE_KERBEROS,e)},getVersionData:function(e){return r.default.post(l.default.GET_VERSION,e)},saveComponent:function(e){return r.default.postAsFormData(l.default.SAVE_COMPONENT,e)},parseKerberos:function(e){return r.default.postAsFormData(l.default.PARSE_KERBEROS,e)},getCompVersion:function(e){return r.default.post(l.default.GET_COMPONENT_VERSION,e)},getResourceList:function(e){return r.default.post(l.default.GET_RESOURCE_LIST,e)},getClusterList:function(e){return r.default.post(l.default.GET_CLUSTER_LIST,e)},uploadClusterResource:function(e){return r.default.postAsFormData(l.default.UPLOAD_CLUSTER_RESOURCE,e)},getTenantList:function(e){return r.default.post(l.default.GET_TENANT_LIST,e)},testCluster:function(e){return r.default.post(l.default.TEST_CLUSTER_CONNECT,e)},createCluster:function(e){return r.default.postAsFormData(l.default.NEW_CLUSTER,e)},bindUserToQuere:function(e){return r.default.post(l.default.BIND_USER_TO_RESOURCE,e)},updateCluster:function(e){return r.default.postAsFormData(l.default.UPDATE_CLUSTER,e)},getQueueLists:function(e){return r.default.post(l.default.GET_QUEUE_LISTS,e)},confirmSwitchQueue:function(e){return r.default.post(l.default.CONFIRM_SWITCH_QUEUE,e)},getComponentStore:function(e){return r.default.post(l.default.GET_COMPONENTSTORE,e)},uploadKerberos:function(e){return r.default.postAsFormData(l.default.UPLOAD_KERBEROS,e)},updateKrb5Conf:function(e){return r.default.post(l.default.UPDATE_KRB5CONF,e)},getClusterDetail:function(e){return r.default.post(l.default.GET_CLUSTER_DETAIL,e)},getClusterSelect:function(e){return r.default.post(l.default.GET_CLUSTER_SELECT,e)},getNodeAddressSelect:function(e){return r.default.post(l.default.GET_NODEADDRESS_SELECT,e)},searchTaskList:function(e){return r.default.post(l.default.SEARCH_TASKNAME_LIST,e)},searchTaskFuzzy:function(e){return r.default.post(l.default.SEARCH_TASKNAME_FUZZY,e)},killTasks:function(e){return r.default.post(l.default.KILL_TASKS,e)},killAllTask:function(e){return r.default.post(l.default.KILL_ALL_TASK,e)},stickJob:function(e){return r.default.post(l.default.JOB_STICK,e)},getEngineList:function(e){return r.default.post(l.default.GET_ENGINE_LIST,e)},getGroupList:function(e){return r.default.post(l.default.GET_GROUP_LIST,e)},getViewDetail:function(e){return r.default.post(l.default.GET_VIEW_DETAIL,e)},changeJobPriority:function(e){return r.default.post(l.default.CHANGE_JOB_PRIORITY,e)},getClusterResources:function(e){return r.default.post(l.default.GET_CLUSTER_RESOURCES,e)},getLoadTemplate:function(e){return r.default.post(l.default.GET_LOADTEMPLATE,e)},uploadKerberosFile:function(e){return r.default.postAsFormData(l.default.UPLOAD_KERBEROSFILE,e)},getKerberosFile:function(e){return r.default.post(l.default.GET_KERBEROSFILE,e)},testComponent:function(e){return r.default.post(l.default.TEST_COMPONENT_CONNECT,e)},testComponentKerberos:function(e){return r.default.postAsFormData(l.default.TEST_COMPONENT_CONNECT_KERBEROS,e)},addComponent:function(e){return r.default.post(l.default.ADD_COMPONENT,e)},saveComponentWithKerberos:function(e){return r.default.postAsFormData(l.default.SAVE_COMPONENT_KERBEROS,e)},deleteKerberos:function(e){return r.default.post(l.default.DELETE_KERBEROS,e)},addEngine:function(e){return r.default.post(l.default.ADD_ENGINE,e)},addEngines:function(e){return r.default.post(l.default.ADD_ENGINS,e)},updateClusterVersion:function(e){return r.default.post(l.default.UPDATE_CLUSTER_VERSION,e)},getAllCluster:function(e){return r.default.post(l.default.GET_ALL_CLUSTER,e)},searchTenant:function(e){return r.default.post(l.default.SEARCH_TENANT,e)},getTaskResourceTemplate:function(e){return r.default.post(l.default.TASK_RESOURCE,e)},getQueue:function(e){return r.default.post(l.default.GET_QUEUE,e)},bindTenant:function(e){return r.default.post(l.default.BIND_TENANT,e)},switchQueue:function(e){return r.default.post(l.default.SWITCH_QUEUE,e)},bindNamespace:function(e){return r.default.post(l.default.BIND_NAME_SPACE,e)},queryTaskResourceLimits:function(e){return r.default.post(l.default.GET_TASKLIMITS,e)},addOrUpdateAlarmRule:function(e){return r.default.postAsFormData(l.default.ADD_OR_UPDATE_ALARM,e)},getAlarmRuleList:function(e){return r.default.post(l.default.GET_ALARM_RULE_LIST,e)},deleteAlarmRule:function(e){return r.default.post(l.default.DEL_ALARM_RULE_LIST,e)},getByAlertId:function(e){return r.default.post(l.default.GET_ALARM_BY_ID,e)},setDefaultAlert:function(e){return r.default.post(l.default.SET_DEFAULT_ALERT,e)},testAlert:function(e){return r.default.postAsFormData(l.default.TEST_ALERT,e)},refreshQueue:function(e){return r.default.post(l.default.REFRESH_QUEUE,e)}};t.default=o},RJc4:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("pNMO"),n("ma9I"),n("TeQF"),n("QWBl"),n("J30X"),n("2B1R"),n("DQNa"),n("sMBO"),n("HRxU"),n("eoL8"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("SuFq"),n("rB9j"),n("JfAA"),n("EnZy"),n("FZtP"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("Pbn2")),o=r(n("QpBz")),u=r(n("o0o1"));n("ls82");var i=r(n("yXPU")),s=r(n("lwsE")),c=r(n("W8MJ")),d=r(n("PJYZ")),f=r(n("7W2i")),p=r(n("a1gu")),m=r(n("Nsbk")),E=r(n("lSNA")),v=r(n("FAat")),T=r(n("qu0K")),h=a(n("q1tI")),y=r(n("C4JW")),S=r(n("RHHV")),g=r(n("htex")),N=r(n("hmv9")),C=n("j1Tt"),b=n("LNB4");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,E.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,p.default)(this,n)}}var R=T.default.Item,A=v.default.Option,L=function(e){(0,f.default)(n,e);var t=P(n);function n(){var e,a;(0,s.default)(this,n);for(var r=arguments.length,c=new Array(r),f=0;f<r;f++)c[f]=arguments[f];return a=t.call.apply(t,[this].concat(c)),(0,E.default)((0,d.default)(a),"state",{loading:(e={},(0,E.default)(e,C.FILE_TYPE.KERNEROS,!1),(0,E.default)(e,C.FILE_TYPE.PARAMES,!1),(0,E.default)(e,C.FILE_TYPE.CONFIGS,!1),e),visible:!1,principals:[],krbconfig:""}),(0,E.default)((0,d.default)(a),"handleVersion",(function(e){var t,n=a.props,r=n.comp;(0,n.handleCompVersion)(null!==(t=null==r?void 0:r.componentTypeCode)&&void 0!==t?t:"",e)})),(0,E.default)((0,d.default)(a),"renderCompsVersion",(function(){var e,t=a.props.form.getFieldDecorator,n=a.props,r=n.versionData,l=n.comp,o=n.view,u=n.commVersion,i=null!==(e=null==l?void 0:l.componentTypeCode)&&void 0!==e?e:"",s=(0,b.isOtherVersion)(i)?r[C.VERSION_TYPE[i]]:r.hadoopVersion,c=(0,b.isOtherVersion)(i)?C.DEFAULT_COMP_VERSION[i]:r.hadoopVersion[0].value;return c=(null==l?void 0:l.hadoopVersion)||c,(0,b.isSameVersion)(i)&&(c=u||c),h.createElement(R,{label:"组件版本",colon:!1,key:"".concat(i,".hadoopVersion")},t("".concat(i,".hadoopVersion"),{initialValue:c})(h.createElement(v.default,{style:{width:172},disabled:o,onChange:a.handleVersion},s.map((function(e){return h.createElement(A,{value:e.value,key:e.key},e.key)})))))})),(0,E.default)((0,d.default)(a),"getPrincipalsList",function(){var e=(0,i.default)(u.default.mark((function e(t){var n,r,l,o,i,s,c,d;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props,l=r.form,o=r.comp,i=null!==(n=null==o?void 0:o.componentTypeCode)&&void 0!==n?n:"",e.next=4,S.default.parseKerberos({fileName:t});case 4:1==(s=e.sent).code&&(a.setState({principals:null!==(c=s.data)&&void 0!==c?c:[]}),l.setFieldsValue((0,E.default)({},i,{principal:null!==(d=null==s?void 0:s.data[0])&&void 0!==d?d:"",principals:s.data})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,E.default)((0,d.default)(a),"downloadFile",(function(e){var t,n=a.props,r=n.form,l=n.clusterInfo,o=n.comp,u=null!==(t=null==o?void 0:o.componentTypeCode)&&void 0!==t?t:"",i=r.getFieldValue(u+".hadoopVersion")||"",s=document.createElement("a"),c=(null==o?void 0:o.id)?"?componentId=".concat(o.id,"&"):"?";c+="type=".concat(e,"&componentType=").concat(u,"&hadoopVersion=").concat(i,"&clusterName=").concat(null==l?void 0:l.clusterName),s.href="".concat(y.default.DOWNLOAD_RESOURCE).concat(c),s.click()})),(0,E.default)((0,d.default)(a),"validateFileType",(function(e){var t=/\.(zip)$/.test(e.toLocaleLowerCase());return e&&!t&&o.default.warning("配置文件只能是zip文件!"),t})),(0,E.default)((0,d.default)(a),"uploadFile",function(){var e=(0,i.default)(u.default.mark((function e(t,n,r){var l,i,s,c,d,f,p,m,v;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=a.props,s=i.comp,c=i.form,d=i.clusterInfo,f=null!==(l=null==s?void 0:s.componentTypeCode)&&void 0!==l?l:"",a.setState((function(e){return{loading:_(_({},e.loading),{},(0,E.default)({},n,!0))}})),!(0,b.needZipFile)(n)||a.validateFileType(null==t?void 0:t.name)){e.next=6;break}return a.setState((function(e){return{loading:_(_({},e.loading),{},(0,E.default)({},n,!1))}})),e.abrupt("return");case 6:if(n!=C.FILE_TYPE.KERNEROS){e.next=14;break}return v={kerberosFile:t,clusterId:null!==(m=null==d?void 0:d.clusterId)&&void 0!==m?m:"",componentCode:f},e.next=10,S.default.uploadKerberos(v);case 10:p=e.sent,a.getPrincipalsList(t),e.next=17;break;case 14:return e.next=16,S.default.uploadResource({fileName:t,componentType:f});case 16:p=e.sent;case 17:if(1!=p.code){e.next=29;break}e.t0=n,e.next=e.t0===C.FILE_TYPE.KERNEROS?21:e.t0===C.FILE_TYPE.PARAMES?23:e.t0===C.FILE_TYPE.CONFIGS?25:27;break;case 21:return a.setState({krbconfig:p.data}),e.abrupt("break",27);case 23:return c.setFieldsValue((0,E.default)({},f,{componentConfig:_({},(0,b.handleComponentConfig)({componentConfig:p.data[0]},!0))})),e.abrupt("break",27);case 25:return c.setFieldsValue((0,E.default)({},f,{specialConfig:p.data[0]})),e.abrupt("break",27);case 27:r&&r(),o.default.success("文件上传成功");case 29:a.setState((function(e){return{loading:_(_({},e.loading),{},(0,E.default)({},n,!1))}}));case 30:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),(0,E.default)((0,d.default)(a),"deleteKerFile",(function(){var e=a.props.comp;e.id&&S.default.closeKerberos({componentId:e.id})})),(0,E.default)((0,d.default)(a),"renderKerberosFile",(function(){var e,t=a.props,n=t.comp,r=t.view,o=a.state.loading,u=null!==(e=null==n?void 0:n.componentTypeCode)&&void 0!==e?e:"";return h.createElement(g.default,{label:"Hadoop Kerberos认证文件",fileInfo:{typeCode:u,name:"kerberosFileName",value:n.kerberosFileName,desc:"仅支持.zip格式",loading:o[C.FILE_TYPE.KERNEROS],uploadProps:{name:"kerberosFile",accept:".zip",type:C.FILE_TYPE.KERNEROS}},view:r,form:a.props.form,uploadFile:a.uploadFile,icons:h.createElement(h.Fragment,null,!r&&h.createElement(l.default,{type:"edit",style:{right:(null==n?void 0:n.id)?40:20},onClick:function(){return a.setState({visible:!0})}}),(null==n?void 0:n.id)&&h.createElement(l.default,{type:"download",style:{right:r?0:20},onClick:function(){return a.downloadFile(C.FILE_TYPE.KERNEROS)}})),deleteFile:a.deleteKerFile})})),(0,E.default)((0,d.default)(a),"renderParamsFile",(function(){var e,t=a.props,n=t.comp,r=t.view,l=a.state.loading,o=null!==(e=null==n?void 0:n.componentTypeCode)&&void 0!==e?e:"";return h.createElement(g.default,{fileInfo:{typeCode:o,name:"paramsFile",value:n.paramsFile,desc:"仅支持json格式",loading:l[C.FILE_TYPE.PARAMES],uploadProps:{name:"paramsFile",accept:".json",type:C.FILE_TYPE.PARAMES}},view:r,form:a.props.form,uploadFile:a.uploadFile,notDesc:!0,label:h.createElement("span",null,"参数批量上传",h.createElement("span",{className:"c-fileConfig__downloadTemp",onClick:function(){return a.downloadFile(C.FILE_TYPE.PARAMES)}},(null==n?void 0:n.id)?"下载参数":"下载模板"))})})),(0,E.default)((0,d.default)(a),"renderConfigsFile",(function(){var e,t=a.props,n=t.comp,r=t.view,o=a.state.loading,u=null!==(e=null==n?void 0:n.componentTypeCode)&&void 0!==e?e:"";return h.createElement(g.default,{label:"配置文件",deleteIcon:!0,fileInfo:{typeCode:u,name:"uploadFileName",value:n.uploadFileName,desc:C.CONFIG_FILE_DESC[u],loading:o[C.FILE_TYPE.CONFIGS],uploadProps:{name:"uploadFileName",accept:".zip",type:C.FILE_TYPE.CONFIGS}},view:r,form:a.props.form,uploadFile:a.uploadFile,rules:[{required:!0,message:"配置文件为空"}],icons:(null==n?void 0:n.id)&&h.createElement(l.default,{type:"download",style:{right:0},onClick:function(){return a.downloadFile(C.FILE_TYPE.CONFIGS)}})})})),(0,E.default)((0,d.default)(a),"renderStorageComponents",(function(){var e,t,n=a.props,r=n.comp,l=n.form,o=n.saveCompsData,u=n.view,i=null!==(e=null==r?void 0:r.componentTypeCode)&&void 0!==e?e:"";if(0!==o.length){var s=!1;for(var c in o)if(o[c].key===C.COMPONENT_TYPE_VALUE.HDFS){s=!0;break}var d=(null==r?void 0:r.storeType)||(s?C.COMPONENT_TYPE_VALUE.HDFS:null==o||null===(t=o[0])||void 0===t?void 0:t.key);return h.createElement(R,{label:"存储组件",colon:!1,key:"".concat(i,".storeType")},l.getFieldDecorator("".concat(i,".storeType"),{initialValue:d})(h.createElement(v.default,{style:{width:172},disabled:u},o.map((function(e){return h.createElement(A,{value:e.key,key:e.key},e.value)})))))}})),(0,E.default)((0,d.default)(a),"renderPrincipal",(function(){var e,t,n,r,l,o,u=a.props,i=u.comp,s=u.form,c=u.view,d=a.state.principals,f=d,p=null!==(e=null==i?void 0:i.componentTypeCode)&&void 0!==e?e:"",m=null!==(t=s.getFieldValue(p+".kerberosFileName"))&&void 0!==t?t:null==i?void 0:i.kerberosFileName;if(d.length||Array.isArray(null==i?void 0:i.principals)||!(null==i?void 0:i.principals)||(f=null==i?void 0:i.principals.split(",")),0!=(null===(n=f)||void 0===n?void 0:n.length)&&m)return h.createElement(R,{label:"principal",colon:!1,key:"".concat(p,".principal")},s.getFieldDecorator("".concat(p,".principal"),{initialValue:null!==(r=null!==(l=null==i?void 0:i.principal)&&void 0!==l?l:d[0])&&void 0!==r?r:""})(h.createElement(v.default,{style:{width:172},disabled:c},f.map((function(e,t){return h.createElement(A,{value:e,key:t},e)})))),s.getFieldDecorator("".concat(p,".principals"),{initialValue:null!==(o=null==i?void 0:i.principals)&&void 0!==o?o:""})(h.createElement(h.Fragment,null)))})),(0,E.default)((0,d.default)(a),"hanleVisible",(function(e){a.setState({visible:!1,krbconfig:e})})),(0,E.default)((0,d.default)(a),"renderFileConfig",(function(){var e,t,n;switch(null!==(e=null===(t=a.props)||void 0===t||null===(n=t.comp)||void 0===n?void 0:n.componentTypeCode)&&void 0!==e?e:""){case C.COMPONENT_TYPE_VALUE.YARN:case C.COMPONENT_TYPE_VALUE.HDFS:return h.createElement(h.Fragment,null,a.renderCompsVersion(),a.renderConfigsFile(),a.renderKerberosFile(),a.renderPrincipal());case C.COMPONENT_TYPE_VALUE.KUBERNETES:return h.createElement(h.Fragment,null,a.renderConfigsFile(),a.renderKerberosFile(),a.renderPrincipal());case C.COMPONENT_TYPE_VALUE.SFTP:case C.COMPONENT_TYPE_VALUE.NFS:return a.renderParamsFile();case C.COMPONENT_TYPE_VALUE.ORACLE_SQL:case C.COMPONENT_TYPE_VALUE.LIBRA_SQL:case C.COMPONENT_TYPE_VALUE.TIDB_SQL:case C.COMPONENT_TYPE_VALUE.GREEN_PLUM_SQL:case C.COMPONENT_TYPE_VALUE.PRESTO_SQL:return h.createElement(h.Fragment,null,a.renderParamsFile(),a.renderStorageComponents());case C.COMPONENT_TYPE_VALUE.IMPALA_SQL:case C.COMPONENT_TYPE_VALUE.HIVE_SERVER:case C.COMPONENT_TYPE_VALUE.SPARK_THRIFT_SERVER:case C.COMPONENT_TYPE_VALUE.SPARK:case C.COMPONENT_TYPE_VALUE.FLINK:return h.createElement(h.Fragment,null,a.renderCompsVersion(),a.renderKerberosFile(),a.renderPrincipal(),a.renderParamsFile(),a.renderStorageComponents());case C.COMPONENT_TYPE_VALUE.LEARNING:case C.COMPONENT_TYPE_VALUE.DTYARNSHELL:return h.createElement(h.Fragment,null,a.renderKerberosFile(),a.renderPrincipal(),a.renderParamsFile(),a.renderStorageComponents());default:return null}})),a}return(0,c.default)(n,[{key:"render",value:function(){var e=this.props.comp,t=this.state,n=t.visible,a=t.krbconfig;return h.createElement("div",{className:"c-fileConfig__container"},this.renderFileConfig(),h.createElement(N.default,{key:"".concat(n),visible:n,krbconfig:a||e.mergeKrb5Content||"",onCancel:this.hanleVisible}))}}]),n}(h.PureComponent);t.default=L},RclC:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("pNMO"),n("ma9I"),n("TeQF"),n("fbCW"),n("QWBl"),n("pjDv"),n("oVuX"),n("2B1R"),n("DQNa"),n("wLYn"),n("sMBO"),n("qePV"),n("HRxU"),n("eoL8"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("SuFq"),n("JfAA"),n("PKPk"),n("FZtP"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("qu0K")),o=r(n("4IMT")),u=r(n("Y/VR")),i=r(n("QpBz")),s=r(n("Pbn2")),c=r(n("o0o1"));n("ls82");var d=r(n("yXPU")),f=r(n("lwsE")),p=r(n("W8MJ")),m=r(n("PJYZ")),E=r(n("7W2i")),v=r(n("a1gu")),T=r(n("Nsbk")),h=r(n("lSNA")),y=r(n("CC+v")),S=r(n("j7zX")),g=a(n("q1tI")),N=n("dtw8"),C=a(n("LvDl")),b=r(n("RHHV")),O=n("LNB4"),_=n("j1Tt"),P=r(n("RJc4")),R=r(n("Hc45")),A=r(n("VDrD")),L=r(n("tgir")),I=r(n("6cUG"));function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,h.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,T.default)(e);if(t){var r=(0,T.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,v.default)(this,n)}}var M=S.default.TabPane,w=y.default.confirm,F=function(e){(0,E.default)(n,e);var t=j(n);function n(){var e;(0,f.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,h.default)((0,m.default)(e),"state",{testLoading:!1,activeKey:0,clusterName:"",commVersion:"",versionData:{},testStatus:{},popVisible:_.TABS_POP_VISIBLE,saveCompsData:[],initialCompData:(0,O.initialScheduling)()}),(0,h.default)((0,m.default)(e),"getDataList",(function(){var t=(e.props.location.state||{}).cluster;b.default.getClusterInfo({clusterId:t.clusterId}).then((function(t){if(1===t.code){var n=(0,O.initialScheduling)(),a=t.data.scheduling;a&&a.forEach((function(e){n[e.schedulingCode]=e.components})),e.setState({initialCompData:n,clusterName:t.data.clusterName},e.getSaveComponentList)}}))})),(0,h.default)((0,m.default)(e),"getVersionData",(function(){b.default.getVersionData().then((function(t){1===t.code&&e.setState({versionData:t.data})}))})),(0,h.default)((0,m.default)(e),"getSaveComponentList",(0,d.default)(c.default.mark((function t(){var n,a,r;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.clusterName,t.next=3,b.default.getComponentStore({clusterName:n});case 3:1==(a=t.sent).code&&a.data&&(r=[],a.data.forEach((function(e){r.push({key:null==e?void 0:e.componentTypeCode,value:null==e?void 0:e.componentName})})),e.setState({saveCompsData:r}));case 5:case"end":return t.stop()}}),t)})))),(0,h.default)((0,m.default)(e),"getLoadTemplate",function(){var t=(0,d.default)(c.default.mark((function t(n,a){var r,l,o,u,i,s,d,f,p,m,E,v,T,h;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.props.form.getFieldValue,u=e.state,i=u.clusterName,s=u.initialCompData,d=u.activeKey,f=null!=n?n:null===(r=s[d][0])||void 0===r?void 0:r.componentTypeCode,p=s[d].find((function(e){return e.componentTypeCode==f})),!(!(0,O.isNeedTemp)(Number(f))&&!(null==p?void 0:p.componentTemplate)&&(null===(l=s[d])||void 0===l?void 0:l.length)||(null==a?void 0:a.compVersion)||(null==a?void 0:a.storeType))){t.next=10;break}return t.next=7,b.default.getLoadTemplate({clusterName:i,componentType:f,version:null!==(m=null!==(E=null==a?void 0:a.compVersion)&&void 0!==E?E:_.DEFAULT_COMP_VERSION[f])&&void 0!==m?m:"",storeType:null!==(v=null!==(T=null==a?void 0:a.storeType)&&void 0!==T?T:o("".concat(f,".storeType")))&&void 0!==v?v:""});case 7:1==(h=t.sent).code&&e.saveComp({componentTemplate:JSON.stringify(h.data),componentTypeCode:Number(f)}),e.getSaveComponentList();case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),(0,h.default)((0,m.default)(e),"handleCompVersion",(function(t,n){var a;(0,O.isSameVersion)(Number(t))&&(e.setState({commVersion:n}),e.props.form.setFieldsValue((a={},(0,h.default)(a,_.COMPONENT_TYPE_VALUE.YARN,{hadoopVersion:n}),(0,h.default)(a,_.COMPONENT_TYPE_VALUE.HDFS,{hadoopVersion:n}),a)));e.getLoadTemplate(t,{compVersion:n})})),(0,h.default)((0,m.default)(e),"onTabChange",(function(t){e.setState((function(e){var n;return{activeKey:Number(t),popVisible:D(D({},e.popVisible),{},(n={},(0,h.default)(n,e.activeKey,!1),(0,h.default)(n,Number(t),!1),n))}}))})),(0,h.default)((0,m.default)(e),"handlePopVisible",(function(t){e.setState((function(e){return{popVisible:D(D({},e.popVisible),{},(0,h.default)({},e.activeKey,null==t||t))}}))})),(0,h.default)((0,m.default)(e),"turnCompMode",(function(t){var n=(e.props.location.state||{}).cluster;e.setState({testLoading:!1}),N.hashHistory.push({pathname:"/console/clusterManage/editCluster",state:{mode:t,cluster:n}})})),(0,h.default)((0,m.default)(e),"handleConfirm",function(){var t=(0,d.default)(c.default.mark((function t(n,a){var r,l,o,u,i,s,d,f,p,m;return c.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=e.state,o=l.initialCompData,u=l.activeKey,i=l.testStatus,d=i,f=(s=o)[u],!(m=(0,O.getCompsId)(f,a)).length){t.next=10;break}return t.next=9,b.default.deleteComponent({componentIds:m});case 9:p=t.sent;case 10:!a.length||1!=(null===(r=p)||void 0===r?void 0:r.code)&&m.length||a.forEach((function(t){f=f.filter((function(e){return e.componentTypeCode!=t})),d=D(D({},d),{},(0,h.default)({},t,null)),e.props.form.setFieldsValue((0,h.default)({},t,{componentConfig:{},specialConfig:{}}))})),n.length&&n.forEach((function(e){f.push({componentTypeCode:e,componentName:_.COMPONENT_CONFIG_NAME[e]})})),s[u]=f,e.setState({initialCompData:s,testStatus:d},e.getLoadTemplate);case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),(0,h.default)((0,m.default)(e),"saveComp",(function(t){var n=e.state,a=n.activeKey,r=n.initialCompData,l=C.cloneDeep(r),o=r[a].map((function(e){return e.componentTypeCode==t.componentTypeCode?D(D({},e),t):e}));l[a]=o,e.setState({initialCompData:l})})),(0,h.default)((0,m.default)(e),"handleComplete",(function(){var t=e.props.form.validateFieldsAndScroll,n=e.state.initialCompData;t((function(t,a){var r,l,o=(0,O.getModifyComp)(a,n);o.size?(r=o,l=Array.from(r).map((function(e){return'"'.concat(_.COMPONENT_CONFIG_NAME[e],'"')})),w({title:"".concat(l.join("、"),"尚未保存，是否需要保存？"),content:null,icon:g.createElement(s.default,{style:{color:"#FAAD14"},type:"exclamation-circle",theme:"filled"}),okText:"保存",cancelText:"取消",onOk:function(){},onCancel:function(){e.props.router.push("/console/clusterManage")}})):e.props.router.push("/console/clusterManage")}))})),(0,h.default)((0,m.default)(e),"testConnects",(function(){var t=e.props.form,n=e.state,a=n.initialCompData,r=n.clusterName;t.validateFields(null,{},(function(t,n){if(t)i.default.error("请检查配置");else if(!t){var l=(0,O.getModifyComp)(n,a);if(l.size>0){var o=Array.from(l).map((function(e){return _.COMPONENT_CONFIG_NAME[e]}));return void i.default.error("组件 ".concat(o.join("、")," 参数变更未保存，请先保存再测试组件连通性"))}e.setState({testLoading:!0}),b.default.testConnects({clusterName:r}).then((function(t){if(1===t.code){var n={};t.data.forEach((function(e){n[e.componentTypeCode]=D({},e)})),e.setState({testStatus:n})}e.setState({testLoading:!1})}))}}))})),e}return(0,p.default)(n,[{key:"componentDidMount",value:function(){this.getDataList(),this.getVersionData()}},{key:"render",value:function(){var e=this,t=this.props.location.state||{},n=t.mode,a=t.cluster,r=this.state,l=r.clusterName,i=r.activeKey,s=r.initialCompData,c=r.versionData,d=r.saveCompsData,f=r.testLoading,p=r.testStatus,m=r.commVersion,E=r.popVisible;return g.createElement("div",{className:"c-editCluster__containerWrap"},g.createElement("div",{className:"c-editCluster__header"},g.createElement(u.default,null,g.createElement(u.default.Item,null,g.createElement("a",{onClick:function(){e.props.router.push("/console/clusterManage")}},"多集群管理")),g.createElement(u.default.Item,null,l)),(0,O.isViewMode)(n)?g.createElement("span",null,g.createElement(o.default,{className:"cluster-btn",type:"primary",onClick:this.turnCompMode.bind(this,"edit")},"编辑")):g.createElement("span",null,g.createElement(o.default,{className:"cluster-btn",ghost:!0,loading:f,onClick:this.testConnects},"测试所有组件连通性"),g.createElement(o.default,{className:"cluster-btn",type:"primary",onClick:this.handleComplete},"完成"))),g.createElement("div",{className:"c-editCluster__container"},g.createElement(S.default,{tabPosition:"top",onChange:this.onTabChange,activeKey:"".concat(i),className:"c-editCluster__container__commonTabs",tabBarExtraContent:g.createElement("div",{className:"c-editCluster__commonTabs__title"},"集群配置")},s.map((function(t,r){return g.createElement(M,{tab:g.createElement("div",{style:{height:19,display:"flex",alignItems:"center"}},g.createElement("i",{className:"iconfont ".concat(_.TABS_TITLE[r].iconName),style:{marginRight:2}}),_.TABS_TITLE[r].name),key:String(r)},0==(null==t?void 0:t.length)&&g.createElement("div",{key:i,className:"empty-logo"},g.createElement("img",{src:"public/img/emptyLogo.svg"})),g.createElement(S.default,{tabPosition:"left",tabBarExtraContent:!(0,O.isViewMode)(n)&&g.createElement(L.default,{comps:t,popVisible:E[i],activeKey:i,handleConfirm:e.handleConfirm,handlePopVisible:e.handlePopVisible}),className:"c-editCluster__container__componentTabs",onChange:function(t){return e.getLoadTemplate(t)}},(null==t?void 0:t.length)>0&&t.map((function(t){var r;return g.createElement(M,{tab:g.createElement("span",null,t.componentName,g.createElement(I.default,{testStatus:null!==(r=p[t.componentTypeCode])&&void 0!==r?r:{}})),key:"".concat(t.componentTypeCode)},g.createElement(P.default,{comp:t,view:(0,O.isViewMode)(n),form:e.props.form,versionData:c,commVersion:m,saveCompsData:d,clusterInfo:{clusterName:l,clusterId:a.clusterId},handleCompVersion:e.handleCompVersion}),g.createElement(R.default,{comp:t,view:(0,O.isViewMode)(n),form:e.props.form}),!(0,O.isViewMode)(n)&&g.createElement(A.default,{comp:t,clusterInfo:{clusterName:l,clusterId:a.clusterId},initialCompData:s[i],form:e.props.form,saveComp:e.saveComp}))}))))})))))}}]),n}(g.Component),U=l.default.create()(F);t.default=U},RnhZ:function(e,t,n){var a={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function r(e){var t=l(e);return n(t)}function l(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=l,e.exports=r,r.id="RnhZ"},RzPm:function(e,t,n){"use strict";var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.RESOURCE_TYPE=t.EMAIL_REG=t.EMAIL_COMMA=t.PHONE_REG=t.NUM_COMMA=t.pieOption=t.doubleLineAreaChartOptions=t.lineAreaChartOptions=t.rowFormItemLayout=t.tailFormItemLayout=t.specFormItemLayout=t.longLabelFormLayout=t.formItemCenterLayout=t.formItemLayout=t.sourcetype=t.notExtKeysTidbSql=t.notExtKeysLibraSql=t.notExtKeysHiveServer=t.notExtKeysSparkThrift=t.notExtKeyDtscriptJupter=t.notExtKeyDtscriptPython=t.notExtKeysDtyarnShell=t.notExtKeysLearning=t.notExtKeysSpark=t.notExtKeysFlink=t.FLINK_KEY_MAP_DOTS=t.FLINK_KEY_MAP=t.DTYARNSHELL_KEY_MAP_DOTS=t.DTYARNSHELL_KEY_MAP=t.SPARK_KEY_MAP_DOTS=t.SPARK_KEY_MAP=t.validateSftpDataParams=t.validateLibraParams=t.validateLearningParams=t.validateDtYarnShellParams=t.validateSparkParams=t.validateHiveServerParams=t.validateImpalaSqlParams=t.validateCarbonDataParams=t.validateHiveParams=t.validateFlinkParams=t.dataSourceTypes=t.EXCHANGE_ADMIN_API_STATUS=t.EXCHANGE_APPLY_STATUS=t.EXCHANGE_API_STATUS=t.API_DELETE=t.API_SYSTEM_STATUS=t.API_USER_STATUS=t.API_STATUS=t.API_METHOD_key=t.API_METHOD=t.API_MODE=t.HADOOP_GROUP_VALUE=t.DEFAULT_COMP_REQUIRED=t.DEFAULT_COMP_TEST=t.ENGINE_TYPE_ARRAY=t.ENGIN_TYPE_TEXT=t.ENGINE_TYPE_NAME=t.ENGINE_TYPE=t.DATA_SOURCE=t.JobStageText=t.JobStage=t.TASK_STATE=t.CHANNEL_CONF_TEXT=t.CHANNEL_MODE=t.CHANNEL_MODE_VALUE=t.ALARM_TYPE_TEXT=t.ALARM_TYPE=t.COMPUTE_COMPONENTS=t.STORE_COMPONENTS=t.SOURCE_COMPONENTS=t.COMMON_COMPONENTS=t.TABS_TITLE=t.TABS_TITLE_KEY=t.COMPONEMT_CONFIG_NAME_ENUM=t.COMPONEMT_CONFIG_KEY_ENUM=t.COMPONEMT_CONFIG_KEYS=t.COMPONENT_TYPE_VALUE=t.UPPER_NAME=t.COMPONENT_CONFIG_NAME=void 0;var r,l,o,u,i,s=a(n("lSNA")),c={FLINK:"Flink",SPARK:"Spark",LEARNING:"Learning",DTYARNSHELL:"DtScript",HDFS:"HDFS",YARN:"YARN",SPARK_THRIFT_SERVER:"SparkThrift",CARBONDATA:"CarbonData ThriftServer",LIBRA_SQL:"LibrA SQL",HIVE_SERVER:"Hive Server",SFTP:"SFTP",IMPALA_SQL:"Impala SQL",PRESTO_SQL:"Presto SQL",TIDB_SQL:"TiDB SQL",ORACLE_SQL:"Oracle SQL",GREEN_PLUM_SQL:"Greenplum SQL",KUBERNETES:"Kubernetes",NFS:"NFS"};t.COMPONENT_CONFIG_NAME=c;t.UPPER_NAME=["FLINK","HDFS","SPARK","SPARK_THRIFT_SERVER","YARN","IMPALA_SQL","DTYARNSHELL","LEARNING","HIVE_SERVER"];var d={FLINK:0,SPARK:1,LEARNING:2,DTYARNSHELL:3,HDFS:4,YARN:5,SPARK_THRIFT_SERVER:6,CARBONDATA:7,LIBRA_SQL:8,HIVE_SERVER:9,SFTP:10,IMPALA_SQL:11,TIDB_SQL:12,ORACLE_SQL:13,GREEN_PLUM_SQL:14,KUBERNETES:15,PRESTO_SQL:16,NFS:17};t.COMPONENT_TYPE_VALUE=d;var f={FLINK:"flinkConf",SPARK:"sparkConf",LEARNING:"learningConf",DTYARNSHELL:"dtscriptConf",HDFS:"hadoopConf",YARN:"yarnConf",SPARK_THRIFT_SERVER:"hiveConf",CARBONDATA:"carbonConf",LIBRA_SQL:"libraConf",TI_DB_SQL:"tidbConf",HIVE_SERVER:"hiveServerConf",SFTP:"sftpConf",IMPALA_SQL:"impalaSqlConf",TIDB_SQL:"tidbConf",ORACLE_SQL:"oracleConf",GREEN_PLUM_SQL:"greenConf",KUBERNETES:"kubernetesConf",PRESTO_SQL:"prestoConf",NFS:"NFS"};t.COMPONEMT_CONFIG_KEYS=f;var p=(r={},(0,s.default)(r,d.FLINK,f.FLINK),(0,s.default)(r,d.SPARK,f.SPARK),(0,s.default)(r,d.LEARNING,f.LEARNING),(0,s.default)(r,d.DTYARNSHELL,f.DTYARNSHELL),(0,s.default)(r,d.HDFS,f.HDFS),(0,s.default)(r,d.YARN,f.YARN),(0,s.default)(r,d.SPARK_THRIFT_SERVER,f.SPARK_THRIFT_SERVER),(0,s.default)(r,d.CARBONDATA,f.CARBONDATA),(0,s.default)(r,d.HIVE_SERVER,f.HIVE_SERVER),(0,s.default)(r,d.LIBRA_SQL,f.LIBRA_SQL),(0,s.default)(r,d.SFTP,f.SFTP),(0,s.default)(r,d.TIDB_SQL,f.TIDB_SQL),(0,s.default)(r,d.IMPALA_SQL,f.IMPALA_SQL),(0,s.default)(r,d.ORACLE_SQL,f.ORACLE_SQL),(0,s.default)(r,d.GREEN_PLUM_SQL,f.GREEN_PLUM_SQL),(0,s.default)(r,d.KUBERNETES,f.KUBERNETES),(0,s.default)(r,d.PRESTO_SQL,f.PRESTO_SQL),(0,s.default)(r,d.NFS,f.NFS),r);t.COMPONEMT_CONFIG_KEY_ENUM=p;var m=(l={},(0,s.default)(l,d.SPARK,c.SPARK),(0,s.default)(l,d.FLINK,c.FLINK),(0,s.default)(l,d.LEARNING,c.LEARNING),(0,s.default)(l,d.DTYARNSHELL,c.DTYARNSHELL),(0,s.default)(l,d.HDFS,c.HDFS),(0,s.default)(l,d.YARN,c.YARN),(0,s.default)(l,d.SPARK_THRIFT_SERVER,c.SPARK_THRIFT_SERVER),(0,s.default)(l,d.CARBONDATA,c.CARBONDATA),(0,s.default)(l,d.HIVE_SERVER,c.HIVE_SERVER),(0,s.default)(l,d.LIBRA_SQL,c.LIBRA_SQL),(0,s.default)(l,d.SFTP,c.SFTP),(0,s.default)(l,d.TIDB_SQL,c.TIDB_SQL),(0,s.default)(l,d.IMPALA_SQL,c.IMPALA_SQL),(0,s.default)(l,d.ORACLE_SQL,c.ORACLE_SQL),(0,s.default)(l,d.GREEN_PLUM_SQL,c.GREEN_PLUM_SQL),(0,s.default)(l,d.KUBERNETES,c.KUBERNETES),(0,s.default)(l,d.PRESTO_SQL,c.PRESTO_SQL),(0,s.default)(l,d.NFS,c.NFS),l);t.COMPONEMT_CONFIG_NAME_ENUM=m;var E={COMMON:0,SOURCE:1,STORE:2,COMPUTE:3};t.TABS_TITLE_KEY=E;var v=[{schedulingName:"公共组件",schedulingCode:E.COMMON},{schedulingName:"资源调度组件",schedulingCode:E.SOURCE},{schedulingName:"存储组件",schedulingCode:E.STORE},{schedulingName:"计算组件",schedulingCode:E.COMPUTE}];t.TABS_TITLE=v;var T=[{componentTypeCode:d.SFTP,componentName:c.SFTP}];t.COMMON_COMPONENTS=T;var h=[{componentTypeCode:d.YARN,componentName:c.YARN},{componentTypeCode:d.KUBERNETES,componentName:c.KUBERNETES}];t.SOURCE_COMPONENTS=h;var y=[{componentTypeCode:d.HDFS,componentName:c.HDFS},{componentTypeCode:d.NFS,componentName:c.NFS}];t.STORE_COMPONENTS=y;var S,g=[{componentTypeCode:d.SPARK,componentName:c.SPARK},{componentTypeCode:d.SPARK_THRIFT_SERVER,componentName:c.SPARK_THRIFT_SERVER},{componentTypeCode:d.FLINK,componentName:c.FLINK},{componentTypeCode:d.HIVE_SERVER,componentName:c.HIVE_SERVER},{componentTypeCode:d.IMPALA_SQL,componentName:c.IMPALA_SQL},{componentTypeCode:d.DTYARNSHELL,componentName:c.DTYARNSHELL},{componentTypeCode:d.LEARNING,componentName:c.LEARNING},{componentTypeCode:d.PRESTO_SQL,componentName:c.PRESTO_SQL},{componentTypeCode:d.TIDB_SQL,componentName:c.TIDB_SQL},{componentTypeCode:d.LIBRA_SQL,componentName:c.LIBRA_SQL},{componentTypeCode:d.ORACLE_SQL,componentName:c.ORACLE_SQL},{componentTypeCode:d.GREEN_PLUM_SQL,componentName:c.GREEN_PLUM_SQL}];t.COMPUTE_COMPONENTS=g,t.ALARM_TYPE=S,function(e){e[e.MSG=1]="MSG",e[e.EMAIL=2]="EMAIL",e[e.DING=3]="DING",e[e.CUSTOM=4]="CUSTOM"}(S||(t.ALARM_TYPE=S={}));var N=(o={},(0,s.default)(o,S.MSG,"短信通道"),(0,s.default)(o,S.EMAIL,"邮件通道"),(0,s.default)(o,S.DING,"钉钉通道"),(0,s.default)(o,S.CUSTOM,"自定义通道"),o);t.ALARM_TYPE_TEXT=N;var C={SMS_YP:"sms_yp",SMS_DY:"sms_dy",SMS_API:"sms_api",SMS_JAR:"sms_jar",MAIL_DT:"mail_dt",MAIL_API:"mail_api",MAIL_JAR:"mail_jar",DING_DT:"ding_dt",DING_API:"ding_api",DING_JAR:"ding_jar"};t.CHANNEL_MODE_VALUE=C;var b={sms:[{value:C.SMS_JAR,title:"扩展插件通道"}],mail:[{value:C.MAIL_DT,title:"默认邮件通道"},{value:C.MAIL_JAR,title:"扩展插件通道"}],dingTalk:[{value:C.DING_DT,title:"钉钉机器人"},{value:C.DING_JAR,title:"扩展插件通道"}]};t.CHANNEL_MODE=b;t.CHANNEL_CONF_TEXT={JAR:'{"classname":"com.dtstack.sender.sms.xxxsender"}',API:'{\n"cookiestore": false,\n"configs": [{\n"url": "",\n"method": "get",\n"header": {},\n"body": {}\n}],\n"context": {}\n} ',SMS_YP:'请按照此格式输入配置信息：\n{"yp_api_key":"xxxxxx"}',MAIL_DT:'{\n"mail.smtp.host":"smtp.yeah.net",\n"mail.smtp.port":"25",\n"mail.smtp.ssl.enable":"false",\n"mail.smtp.username":"daishu@dtstack.com",\n"mail.smtp.password":"xxxx",\n"mail.smtp.from":"daishu@dtstack.com"\n}',CUSTOM:'{"className":"com.Test"}'};var O;t.TASK_STATE={UNSUBMIT:0,CREATED:1,SCHEDULED:2,DEPLOYING:3,RUNNING:4,FINISHED:5,CANCELLING:6,CANCELED:7,FAILED:8,SUBMITFAILD:9,SUBMITTING:10,RESTARTING:11,MANUALSUCCESS:12,KILLED:13,SUBMITTED:14,NOTFOUND:15,WAITENGINE:16,WAITCOMPUTE:17,FROZEN:18,ENGINEACCEPTED:19,ENGINEDISTRIBUTE:20,PARENTFAILED:21,FAILING:22,COMPUTING:23,EXPIRE:24,LACKING:25,AUTOCANCELED:26},t.JobStage=O,function(e){e[e.Saved=1]="Saved",e[e.Queueing=2]="Queueing",e[e.WaitTry=3]="WaitTry",e[e.WaitResource=4]="WaitResource",e[e.Running=5]="Running"}(O||(t.JobStage=O={}));var _=(u={},(0,s.default)(u,O.Queueing,"队列中"),(0,s.default)(u,O.Saved,"已存储"),(0,s.default)(u,O.WaitTry,"等待重试"),(0,s.default)(u,O.WaitResource,"等待资源"),(0,s.default)(u,O.Running,"运行中"),u);t.JobStageText=_;t.DATA_SOURCE={MYSQL:1,ORACLE:2,SQLSERVER:3,HDFS:6,HIVE:7,HBASE:8,FTP:9,MAXCOMPUTE:10,ADSMAXCOMPUTE:11,NFS:17,TI_DB:31};var P={HADOOP:1,LIBRA:2,TI_DB:4,ORACLE:5,GREEN_PLUM:6,PRESTO:7};t.ENGINE_TYPE=P;var R={HADOOP:"Hadoop",LIBRA:"LibrA",TI_DB:"TiDB",ORACLE:"Oracle",GREEN_PLUM:"GreenPlum"};t.ENGINE_TYPE_NAME=R;var A=(i={},(0,s.default)(i,P.HADOOP,"Hadoop"),(0,s.default)(i,P.LIBRA,"LibrA"),(0,s.default)(i,P.TI_DB,"TiDB"),(0,s.default)(i,P.ORACLE,"Oracle"),(0,s.default)(i,P.GREEN_PLUM,"GreenPlum"),(0,s.default)(i,P.PRESTO,"Presto"),i);t.ENGIN_TYPE_TEXT=A;var L=[{name:"Hadoop",value:R.HADOOP},{name:"LibrA",value:R.LIBRA},{name:"TiDB",value:R.TI_DB},{name:"Oracle",value:R.ORACLE},{name:"GreenPlum",value:R.GREEN_PLUM}];t.ENGINE_TYPE_ARRAY=L;t.DEFAULT_COMP_TEST={flinkTestResult:{},sparkTestResult:{},dtYarnShellTestResult:{},learningTestResult:{},hdfsTestResult:{},yarnTestResult:{},sparkThriftTestResult:{},carbonTestResult:{},hiveServerTestResult:{},libraSqlTestResult:{},tidbSqlTestResult:{},oracleSqlTestResult:{},impalaSqlTestResult:{},sftpTestResult:{},greenPlumSqlTestResult:{}};t.DEFAULT_COMP_REQUIRED={flinkShowRequired:!1,sparkShowRequired:!1,dtYarnShellShowRequired:!1,learningShowRequired:!1,hdfsShowRequired:!1,yarnShowRequired:!1,hiveShowRequired:!1,carbonShowRequired:!1,hiveServerShowRequired:!1,libraShowRequired:!1,impalaSqlRequired:!1,sftpShowRequired:!1};var I=[{label:"HDFS",value:d.HDFS,disabled:!0},{label:"YARN",value:d.YARN,disabled:!0},{label:"SFTP",value:d.SFTP,disabled:!0},{label:"Flink",value:d.FLINK},{label:"Spark",value:d.SPARK},{label:"Learning",value:d.LEARNING},{label:"DTScript",value:d.DTYARNSHELL},{label:"SparkThrift",value:d.SPARK_THRIFT_SERVER},{label:"CarbonData ThriftServer",value:d.CARBONDATA},{label:"Hive Server",value:d.HIVE_SERVER},{label:"Impala SQL",value:d.IMPALA_SQL}];t.HADOOP_GROUP_VALUE=I;t.API_MODE={GUIDE:0,SQL:1};t.API_METHOD={POST:1};t.API_METHOD_key={1:"POST",2:"GET"};t.API_STATUS={"-1":"NO_APPLY",0:"IN_HAND",1:"PASS",2:"REJECT",3:"STOPPED",4:"DISABLE",5:"EXPIRED"};t.API_USER_STATUS={NO_APPLY:-1,IN_HAND:0,PASS:1,REJECT:2,STOPPED:3,DISABLE:4,EXPIRED:5};t.API_SYSTEM_STATUS={SUCCESS:0,STOP:1,EDITTING:2};t.API_DELETE={YES:0,NO:1};t.EXCHANGE_API_STATUS={"-1":"nothing",0:"inhand",1:"success",2:"notPass",3:"stop",4:"disabled",5:"expired"};t.EXCHANGE_APPLY_STATUS={0:"notApproved",1:"pass",2:"rejected",3:"stop",4:"disabled",5:"expired"};t.EXCHANGE_ADMIN_API_STATUS={0:"success",1:"stop",2:"editting"};t.dataSourceTypes=["未知类型","MySql","Oracle","SQLServer","PostgreSQL","RDBMS","HDFS","Hive","HBase","FTP","MaxCompute","NFS"];t.validateFlinkParams=["flinkConf.flinkZkAddress","flinkConf.flinkHighAvailabilityStorageDir","flinkConf.flinkZkNamespace","flinkConf.gatewayHost","flinkConf.gatewayPort","flinkConf.gatewayJobName","flinkConf.deleteOnShutdown","flinkConf.randomJobNameSuffix","flinkConf.typeName","flinkConf.clusterMode","flinkConf.flinkJarPath","flinkConf.kerberosFile","flinkConf.flinkSessionSlotCount"];t.validateHiveParams=["hiveConf.jdbcUrl","hiveConf.driverClassName","hiveConf.kerberosFile"];t.validateCarbonDataParams=["carbonConf.jdbcUrl","carbonConf.kerberosFile"];t.validateImpalaSqlParams=["impalaSqlConf.jdbcUrl"];t.validateHiveServerParams=["hiveServerConf.jdbcUrl","hiveServerConf.kerberosFile"];t.validateSparkParams=["sparkConf.typeName","sparkConf.sparkYarnArchive","sparkConf.sparkSqlProxyPath","sparkConf.sparkPythonExtLibPath","sparkConf.kerberosFile"];t.validateDtYarnShellParams=["dtscriptConf.jlogstashRoot","dtscriptConf.javaHome","dtscriptConf.hadoopHomeDir","dtscriptConf.kerberosFile"];t.validateLearningParams=["learningConf.learningPython3Path","learningConf.kerberosFile"];t.validateLibraParams=["libraConf.jdbcUrl","libraConf.driverClassName"];t.validateSftpDataParams=["sftpConf.host","sftpConf.port","sftpConf.path","sftpConf.username","sftpConf.password"];t.SPARK_KEY_MAP={"spark.yarn.appMasterEnv.PYSPARK_PYTHON":"sparkYarnAppMasterEnvPYSPARK_PYTHON","spark.yarn.appMasterEnv.PYSPARK_DRIVER_PYTHON":"sparkYarnAppMasterEnvPYSPARK_DRIVER_PYTHON"};t.SPARK_KEY_MAP_DOTS={sparkYarnAppMasterEnvPYSPARK_PYTHON:"spark.yarn.appMasterEnv.PYSPARK_PYTHON",sparkYarnAppMasterEnvPYSPARK_DRIVER_PYTHON:"spark.yarn.appMasterEnv.PYSPARK_DRIVER_PYTHON"};t.DTYARNSHELL_KEY_MAP={"java.home":"javaHome","hadoop.home.dir":"hadoopHomeDir","python2.path":"python2Path","python3.path":"python3Path","jupyter.path":"jupyterPath","c.NotebookApp.open_browser":"cNotebookAppOpen_browser","c.NotebookApp.allow_remote_access":"cNotebookAppAllow_remote_access","c.NotebookApp.ip":"cNotebookAppIp","c.NotebookApp.token":"cNotebookAppToken","c.NotebookApp.default_url":"cNotebookAppDefault_url","jupyter.project.root":"jupyterProjectRoot"};t.DTYARNSHELL_KEY_MAP_DOTS={javaHome:"java.home",hadoopHomeDir:"hadoop.home.dir",python2Path:"python2.path",python3Path:"python3.path",jupyterPath:"jupyter.path",cNotebookAppOpen_browser:"c.NotebookApp.open_browser",cNotebookAppAllow_remote_access:"c.NotebookApp.allow_remote_access",cNotebookAppIp:"c.NotebookApp.ip",cNotebookAppToken:"c.NotebookApp.token",cNotebookAppDefault_url:"c.NotebookApp.default_url",jupyterProjectRoot:"jupyter.project.root"};t.FLINK_KEY_MAP={"yarn.jobmanager.heap.mb":"yarnJobmanagerHeapMb","yarn.taskmanager.heap.mb":"yarnTaskmanagerHeapMb","yarn.taskmanager.numberOfTaskSlots":"yarnTaskmanagerNumberOfTaskSlots","yarn.taskmanager.numberOfTaskManager":"yarnTaskmanagerNumberOfTaskManager","metrics.reporter.promgateway.class":"metricsReporterPromgatewayClass","metrics.reporter.promgateway.host":"metricsReporterPromgatewayHost","metrics.reporter.promgateway.port":"metricsReporterPromgatewayPort","metrics.reporter.promgateway.jobName":"metricsReporterPromgatewayJobName","metrics.reporter.promgateway.randomJobNameSuffix":"metricsReporterPromgatewayRandomJobNameSuffix","metrics.reporter.promgateway.deleteOnShutdown":"metricsReporterPromgatewayDeleteOnShutdown","historyserver.web.address":"historyserverWebAddress","historyserver.web.port":"historyserverWebPort","high-availability.cluster-id":"high-availabilityCluster-id","high-availability.zookeeper.path.root":"high-availabilityZookeeperPathRoot","high-availability.zookeeper.quorum":"high-availabilityZookeeperQuorum","jobmanager.archive.fs.dir":"jobmanagerArchiveFsDir","high-availability.storageDir":"high-availabilityStorageDir"};t.FLINK_KEY_MAP_DOTS={yarnJobmanagerHeapMb:"yarn.jobmanager.heap.mb",yarnTaskmanagerHeapMb:"yarn.taskmanager.heap.mb",yarnTaskmanagerNumberOfTaskSlots:"yarn.taskmanager.numberOfTaskSlots",yarnTaskmanagerNumberOfTaskManager:"yarn.taskmanager.numberOfTaskManager",stateCheckpointsDir:"state.checkpoints.dir","stateCheckpointsNum-retained":"state.checkpoints.num-retained",metricsReporterPromgatewayClass:"metrics.reporter.promgateway.class",metricsReporterPromgatewayHost:"metrics.reporter.promgateway.host",metricsReporterPromgatewayPort:"metrics.reporter.promgateway.port",metricsReporterPromgatewayJobName:"metrics.reporter.promgateway.jobName",metricsReporterPromgatewayRandomJobNameSuffix:"metrics.reporter.promgateway.randomJobNameSuffix",metricsReporterPromgatewayDeleteOnShutdown:"metrics.reporter.promgateway.deleteOnShutdown",historyserverWebAddress:"historyserver.web.address",historyserverWebPort:"historyserver.web.port","high-availabilityCluster-id":"high-availability.cluster-id","high-availabilityZookeeperPathRoot":"high-availability.zookeeper.path.root","high-availabilityZookeeperQuorum":"high-availability.zookeeper.quorum",jobmanagerArchiveFsDir:"jobmanager.archive.fs.dir","high-availabilityStorageDir":"high-availability.storageDir"};t.notExtKeysFlink=["typeName","high-availability.zookeeper.quorum","high-availability.storageDir","high-availability.zookeeper.path.root","metrics.reporter.promgateway.class","metrics.reporter.promgateway.host","metrics.reporter.promgateway.port","metrics.reporter.promgateway.jobName","metrics.reporter.promgateway.randomJobNameSuffix","metrics.reporter.promgateway.deleteOnShutdown","jarTmpDir","flinkPluginRoot","remotePluginRootDir","clusterMode","flinkJarPath","historyserver.web.address","historyserver.web.port","high-availability.cluster-id","yarn.jobmanager.heap.mb","yarn.taskmanager.heap.mb","yarn.taskmanager.numberOfTaskSlots","yarn.taskmanager.numberOfTaskManager","openKerberos","kerberosFile","flinkSessionSlotCount","state.checkpoints.dir","jobmanager.archive.fs.dir","state.checkpoints.num-retained"];t.notExtKeysSpark=["typeName","sparkYarnArchive","sparkSqlProxyPath","sparkPythonExtLibPath","spark.yarn.appMasterEnv.PYSPARK_PYTHON","spark.yarn.appMasterEnv.PYSPARK_DRIVER_PYTHON","openKerberos","kerberosFile"];t.notExtKeysLearning=["typeName","learning.python3.path","learning.python2.path","learning.history.address","learning.history.webapp.address","learning.history.webapp.https.address","openKerberos","kerberosFile"];t.notExtKeysDtyarnShell=["typeName","jlogstash.root","pythonConf","jupyterConf","java.home","hadoop.home.dir","openKerberos","kerberosFile"];t.notExtKeyDtscriptPython=["typeName","python2.path","python3.path"];t.notExtKeyDtscriptJupter=["typeName","jupyter.path","c.NotebookApp.open_browser","c.NotebookApp.allow_remote_access","c.NotebookApp.ip","c.NotebookApp.token","c.NotebookApp.default_url","jupyter.project.root"];t.notExtKeysSparkThrift=["jdbcUrl","username","password","driverClassName","useConnectionPool","maxPoolSize","minPoolSize","initialPoolSize","jdbcIdel","maxRows","queryTimeout","checkTimeout","openKerberos","kerberosFile"];t.notExtKeysHiveServer=["driverClassName","jdbcUrl","username","password","openKerberos","kerberosFile"];t.notExtKeysLibraSql=["jdbcUrl","username","password","driverClassName","useConnectionPool","maxPoolSize","minPoolSize","initialPoolSize","jdbcIdel","maxRows","queryTimeout","checkTimeout"];t.notExtKeysTidbSql=["jdbcUrl","username","password","driverClassName","useConnectionPool","maxPoolSize","minPoolSize","initialPoolSize","jdbcIdel","maxRows","queryTimeout","checkTimeout"];t.sourcetype=["executor.memory","driver.memory","jobmanager.memory.mb","taskmanager.memory.mb","worker.memory","executor.memory"];t.formItemLayout={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};t.formItemCenterLayout={labelCol:{xs:{span:24},sm:{span:9}},wrapperCol:{xs:{span:24},sm:{span:6}}};t.longLabelFormLayout={labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:14}}};t.specFormItemLayout={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:14}}};t.tailFormItemLayout={wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:6}}};t.rowFormItemLayout={labelCol:{span:0},wrapperCol:{span:24}};t.lineAreaChartOptions={title:{text:"堆叠区域图",textStyle:{fontSize:12},textAlign:"left"},tooltip:{trigger:"axis",axisPointer:{label:{backgroundColor:"#6a7985"}}},color:["#2491F7","#7460EF","#26DAD2","#79E079","#7A64F3","#FFDC53","#9a64fb"],legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"]},toolbox:{feature:{saveAsImage:{show:!1}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[],axisTick:{show:!0},axisLine:{lineStyle:{color:"#DDDDDD"}},axisLabel:{textStyle:{color:"#666666"}},nameTextStyle:{color:"#666666"},splitLine:{color:"#666666"}}],yAxis:[{type:"value",axisLabel:{formatter:"{value} 个",textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",nameGap:20,axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#DDDDDD",type:"dashed"}}}],series:[]};t.doubleLineAreaChartOptions={tooltip:{trigger:"axis",axisPointer:{label:{backgroundColor:"#6a7985"}}},color:["#2491F7","#7460EF","#26DAD2","#79E079","#7A64F3","#FFDC53","#9a64fb"],legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"]},toolbox:{feature:{saveAsImage:{show:!1}}},grid:{left:"3%",right:"4%",bottom:"30",top:40,containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[],axisTick:{show:!0},axisLine:{lineStyle:{color:"#DDDDDD"}},axisLabel:{textStyle:{color:"#666666"}},nameTextStyle:{color:"#666666"},splitLine:{color:"#666666"}}],yAxis:[{nameGap:25,type:"value",name:"调用次数",axisLabel:{textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",axisLine:{show:!1},axisTick:{show:!1},splitLine:!1,minInterval:1},{nameGap:25,type:"value",name:"失败率 (%)",axisLabel:{textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#DDDDDD",type:"dashed"}},max:100}],series:[]};t.pieOption={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"horizontal",x:"center",y:"bottom",data:["参数错误","调用超时","异常访问","超出限额","禁用","其他"],itemWidth:5,itemHeight:5,textStyle:{color:"#666"}},series:[{name:"错误类型",type:"pie",radius:["35%","55%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"}},labelLine:{normal:{show:!1}},data:[{value:335,name:"参数错误",itemStyle:{normal:{color:"#1C86EE"}}},{value:310,name:"调用超时",itemStyle:{normal:{color:"#EE9A00"}}},{value:234,name:"异常访问",itemStyle:{normal:{color:"#EE4000"}}},{value:535,name:"超出限额",itemStyle:{normal:{color:"#40E0D0"}}},{value:1158,name:"禁用",itemStyle:{normal:{color:"#71C671"}}},{value:548,name:"其他",itemStyle:{normal:{color:"#A2B5CD"}}}]}]};t.NUM_COMMA=/^[0-9,]+$/;t.PHONE_REG=/^1[3|4|5|6|7|8|9]\d{9}$/;t.EMAIL_COMMA=/^[0-9a-zA-Z@,_.-]+$/;t.EMAIL_REG=/^[0-9a-zA-Z_.-]+[@][0-9a-zA-Z_.-]+([.][a-zA-Z]+){1,2}$/;t.RESOURCE_TYPE={YARN:"YARN",KUBERNETES:"Kubernetes"}},UANx:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("pNMO"),n("ma9I"),n("TeQF"),n("QWBl"),n("yq1k"),n("yXV3"),n("J30X"),n("2B1R"),n("qePV"),n("HRxU"),n("eoL8"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("5s+n"),n("p532"),n("rB9j"),n("JTJg"),n("UxlC"),n("FZtP"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("d1El")),o=r(n("RIqP")),u=r(n("QpBz")),i=r(n("lSNA")),s=r(n("J4zp")),c=r(n("pVnL")),d=r(n("iJl9")),f=r(n("Pbn2")),p=r(n("CC+v")),m=r(n("qu0K")),E=r(n("FAat")),v=a(n("q1tI")),T=n("A9pX"),h=r(n("RHHV")),y=n("RzPm");function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=E.default.Option,C=m.default.Item,b=p.default.confirm,O=function(e){var t=e.getFieldDecorator,n=e.lineList,a=e.taskTypeName,r=e.deleteItem,l=e.type,o=e.initialList,u=Object.keys(n);return v.default.createElement(v.default.Fragment,null,v.default.createElement("header",{className:"c-header-dynamicform"},v.default.createElement("span",null,"".concat(a,"任务")),v.default.createElement("span",{style:{cursor:"pointer"},onClick:function(){return r(l)}},v.default.createElement(f.default,{type:"delete"}))),v.default.createElement("div",{style:{paddingBottom:10}},u.map((function(e){return v.default.createElement(C,(0,c.default)({key:e,label:e},y.specFormItemLayout),t("".concat(l," ").concat(e.replace(/(\.)/g,"-")),{initialValue:(null==o?void 0:o[e])||void 0})(v.default.createElement(d.default,{placeholder:n[e]})),v.default.createElement("span",{style:{position:"absolute",right:-20}},y.sourcetype.includes(e)?"m":""))}))))},_=function(e){var t=e.form,n=e.form,a=n.getFieldDecorator,r=n.setFieldsValue,i=n.resetFields,d=e.visible,S=e.onOk,_=e.onCancel,P=e.title,R=e.isBindTenant,A=e.clusterId,L=e.tenantId,I=e.queueId,k=e.clusterList,D=(0,v.useState)(!1),j=(0,s.default)(D,2),M=j[0],w=j[1],F=(0,v.useState)({current:void 0,union:[]}),U=(0,s.default)(F,2),x=U[0],V=U[1],K=(0,v.useState)([]),Y=(0,s.default)(K,2),q=Y[0],B=Y[1],H=(0,v.useState)({}),G=(0,s.default)(H,2),Q=G[0],J=G[1],z=(0,v.useRef)(null),W=(0,T.useEnv)({clusterId:A,form:t,visible:d,clusterList:k}).queueList;(0,v.useEffect)((function(){z.current!==d&&(d?(h.default.queryTaskResourceLimits({dtUicTenantId:L}).then((function(e){var t=e.code,n=e.data;if(1===t){var a=[],r={};Array.isArray(n)&&n.forEach((function(e){a.push(e.taskType),r["".concat(e.taskType)]=e.resourceLimit})),J(r),V((function(e){return g(g({},e),{},{union:a})}))}})),h.default.getTaskResourceTemplate({}).then((function(e){1===e.code&&B(e.data)}))):(i(),V({current:void 0,union:[]}),B([]))),z.current=d}),[i,L,d]);var X=function(){(0,(null==e?void 0:e.form).validateFields)((function(e,t){if(!e){var n=JSON.stringify(x.union.map((function(e){return q.map((function(n){if(e===n.taskType){var a=Object.keys(n.params),r={taskType:e,resourceParams:{}};return a.forEach((function(n){r.resourceParams[n]=null==t?void 0:t["".concat(e," ").concat(n).replace(/(\.)/g,"-")]})),r}}))})).map((function(e){return e.filter((function(e){return void 0!==e}))[0]})));w(!0),h.default.switchQueue({queueId:null==t?void 0:t.queueId,tenantId:L,taskTypeResourceJson:n}).then((function(e){if(1===e.code)return u.default.success("提交成功"),S();u.default.error("提交失败")})).finally((function(){w(!1)}))}}))},Z=function(){var e=x.current,t=x.union;void 0===e||isNaN(e)?u.default.warning("请先选择任务类型"):0!==t.length&&t.includes(e)?u.default.warning("该任务的资源限制已存在！"):(V({current:e,union:[].concat((0,o.default)(t),[e])}),r({resourceType:e}))},$=function(e){var t=x.union;void 0!==e&&(-1!==t.indexOf(e)&&V(g(g({},x),{},{union:(0,o.default)(t.filter((function(t){return t!==e})))})))};return v.default.createElement(p.default,{title:P,visible:d,onOk:function(){return X()},onCancel:function(){b({title:"是否保存配置？",content:"若不保存编辑内容，再次打开时会进行重置",okText:"保存",cancelText:"返回",onOk:function(){X()},onCancel:function(){_()}})},width:"600px",confirmLoading:M,className:R?"no-padding-modal":""},v.default.createElement(m.default,null,v.default.createElement(C,(0,c.default)({label:v.default.createElement("span",null,"资源队列 ",v.default.createElement(l.default,{title:"指Yarn上分配的资源队列，若下拉列表中无全部队列，请前往“多集群管理”页面的具体集群中刷新集群"},v.default.createElement(f.default,{type:"question-circle-o"})))},y.formItemLayout),a("queueId",{rules:[{required:!0,message:"租户不可为空！"}],initialValue:I||void 0})(v.default.createElement(E.default,{allowClear:!0,placeholder:"请选择资源队列"},W.map((function(e){return v.default.createElement(N,{key:e.queueId,value:e.queueId},e.queueName)}))))),v.default.createElement(C,(0,c.default)({label:v.default.createElement("span",null,"资源限制 ",v.default.createElement(l.default,{title:"设置租户下单个离线任务在临时运行和周期运行时能使用的最大资源数，任务的环境参数设置超出此限制将导致任务提交或运行失败。保存变更后立即生效。"},v.default.createElement(f.default,{type:"question-circle-o"})))},y.formItemLayout),a("resourceType",{})(v.default.createElement(E.default,{allowClear:!0,placeholder:"请选择任务类型",onChange:function(e){return function(e){V(g(g({},x),{},{current:Number(e)}))}(e)}},q.map((function(e){return v.default.createElement(N,{key:e.taskType,value:e.taskType},e.taskTypeName)})))),v.default.createElement("div",{className:"o-div--actionDom",onClick:Z},v.default.createElement(f.default,{className:"o-icon--actionDom",type:"plus-circle"}),"添加资源限制")),x.union.map((function(e){return q.map((function(t,n){return v.default.createElement("div",{key:n,className:"o-block--dynamic"},t.taskType===e?v.default.createElement(O,{type:e,getFieldDecorator:a,lineList:t.params,taskTypeName:t.taskTypeName,deleteItem:$,initialList:Q[e]}):null)}))}))))},P=function(e,t){return(null==e?void 0:e.visible)===(null==t?void 0:t.visible)&&!0!==(null==t?void 0:t.visible)},R=m.default.create()(v.default.memo(_,P));t.default=R},Uu3x:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("pNMO"),n("ma9I"),n("TeQF"),n("QWBl"),n("DQNa"),n("wLYn"),n("zKZe"),n("HRxU"),n("eoL8"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("SuFq"),n("JfAA"),n("FZtP"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("DtFj")),o=r(n("s4l/")),u=r(n("4IMT")),i=r(n("QpBz")),s=r(n("h0/l")),c=r(n("lwsE")),d=r(n("W8MJ")),f=r(n("PJYZ")),p=r(n("7W2i")),m=r(n("a1gu")),E=r(n("Nsbk")),v=r(n("lSNA")),T=a(n("q1tI")),h=n("dtw8"),y=r(n("wd/R")),S=r(n("C+lx")),g=r(n("RHHV"));function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,v.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,E.default)(e);if(t){var r=(0,E.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,m.default)(this,n)}}var O=function(e){(0,p.default)(n,e);var t=b(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,v.default)((0,f.default)(e),"state",{dataSource:[],table:{pageIndex:1,total:0,loading:!0},newClusterModal:!1,editModalKey:""}),(0,v.default)((0,f.default)(e),"newCluster",(function(){e.setState({editModalKey:Math.random(),newClusterModal:!0})})),(0,v.default)((0,f.default)(e),"handleTableChange",(function(t,n,a){var r=Object.assign(e.state.table,{loading:!0});e.setState({table:r},e.getResourceList)})),(0,v.default)((0,f.default)(e),"onPageChange",(function(t){e.setState({table:Object.assign(e.state.table,{pageIndex:t,loading:!0})},e.getResourceList)})),e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.getResourceList()}},{key:"getResourceList",value:function(){var e=this,t=this.state.table,n=t.pageIndex;g.default.getClusterList({currentPage:n,pageSize:15}).then((function(n){1==n.code?e.setState({dataSource:n.data.data,table:C(C({},t),{},{loading:!1,total:n.data.totalCount})}):e.setState({table:C(C({},t),{},{loading:!1})})}))}},{key:"getPagination",value:function(){var e=this.state.table;return{current:e.pageIndex,pageSize:15,total:e.total}}},{key:"initTableColumns",value:function(){var e=this;return[{title:"集群名称",dataIndex:"clusterName"},{title:"修改时间",dataIndex:"gmtModified",render:function(e){return(0,y.default)(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"操作",dataIndex:"deal",width:"170px",render:function(t,n){return T.createElement("div",null,T.createElement("a",{onClick:e.viewCluster.bind(e,n)},"查看"),T.createElement("span",{className:"ant-divider"}),T.createElement(s.default,{placement:"topRight",title:"删除集群后不可恢复，确认删除集群 ".concat(n.clusterName,"?"),onConfirm:e.deleteCluster.bind(e,n),okText:"确认",cancelText:"取消"},T.createElement("a",null,"删除")))}}]}},{key:"deleteCluster",value:function(e){var t=this;g.default.deleteCluster({clusterId:e.clusterId}).then((function(e){1===e.code&&(i.default.success("集群删除成功"),t.getResourceList())}))}},{key:"viewCluster",value:function(e){h.hashHistory.push({pathname:"/console/clusterManage/editCluster",state:{cluster:e,mode:"view"}})}},{key:"onCancel",value:function(){this.setState({newClusterModal:!1})}},{key:"onSubmit",value:function(e){var t=this;g.default.addCluster(C({},e)).then((function(e){1===e.code&&(t.onCancel(),h.hashHistory.push({pathname:"/console/clusterManage/editCluster",state:{mode:"new",cluster:e.data}}),i.default.success("集群新增成功！"))}))}},{key:"render",value:function(){var e=this.state,t=e.dataSource,n=e.table,a=e.newClusterModal,r=e.editModalKey,i=n.loading,s=this.initTableColumns(),c={total:n.total,current:n.pageIndex,pageSize:15,size:"small",showTotal:function(e){return T.createElement("span",null,"共",T.createElement("span",{style:{color:"#3F87FF"}},e),"条数据，每页显示",15,"条")},onChange:this.onPageChange};return T.createElement(T.Fragment,null,T.createElement("div",{className:"c-clusterManage__title"},T.createElement("span",{className:"c-clusterManage__title__span"},"多集群管理"),T.createElement(u.default,{className:"c-clusterManage__title__btn",type:"primary",onClick:this.newCluster},"新增集群")),T.createElement("div",{className:"contentBox"},T.createElement(l.default,{rowKey:function(e,t){return"clusterManage-".concat(e.id)},className:"dt-table-fixed-contain-footer",scroll:{y:!0},style:{height:"calc(100vh - 150px)"},pagination:!1,loading:i,dataSource:t,columns:s,onChange:this.handleTableChange,footer:function(){return T.createElement(o.default,c)}})),T.createElement(S.default,{key:r,title:"新增集群",visible:a,onCancel:this.onCancel.bind(this),onOk:this.onSubmit.bind(this)}))}}]),n}(T.Component);t.default=O},V2yy:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("ma9I"),n("DQNa"),n("zKZe"),n("07d7"),n("SuFq"),n("JfAA"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("Pbn2")),o=r(n("lwsE")),u=r(n("W8MJ")),i=r(n("PJYZ")),s=r(n("7W2i")),c=r(n("a1gu")),d=r(n("Nsbk")),f=r(n("lSNA")),p=a(n("q1tI")),m=n("dtw8");function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var v=function(e){(0,s.default)(n,e);var t=E(n);function n(){var e;(0,o.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,f.default)((0,i.default)(e),"go",(function(){var t=e.props,n=t.url,a=t.history,r=t.autoClose;n?a?m.browserHistory.push(n):m.hashHistory.push(n):1==window.history.length?r&&window.close():m.hashHistory.go(-1)})),e}return(0,u.default)(n,[{key:"getButtonView",value:function(){var e=this.props.style,t={cursor:"pointer",fontFamily:"anticon",fontSize:"18px",color:"rgb(148, 168, 198)",letterSpacing:"5px",position:"relative",top:"2px"};return e&&Object.assign(t,e),p.createElement("span",{style:t,onClick:this.go},p.createElement(l.default,{type:"left-circle-o"}),this.props.children)}},{key:"render",value:function(){return this.getButtonView()}}]),n}(p.Component);t.default=v},VDrD:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("pNMO"),n("ma9I"),n("TeQF"),n("fbCW"),n("QWBl"),n("yq1k"),n("DQNa"),n("sMBO"),n("HRxU"),n("eoL8"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("SuFq"),n("JfAA"),n("JTJg"),n("FZtP"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("h0/l")),o=r(n("4IMT")),u=r(n("QpBz")),i=r(n("lwsE")),s=r(n("W8MJ")),c=r(n("PJYZ")),d=r(n("7W2i")),f=r(n("a1gu")),p=r(n("Nsbk")),m=r(n("lSNA")),E=a(n("q1tI")),v=r(n("RHHV")),T=n("j1Tt"),h=n("LNB4");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,m.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var N=function(e){(0,d.default)(n,e);var t=g(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,m.default)((0,c.default)(e),"onOk",(function(){var t,n=e.props,a=n.form,r=n.comp,l=n.clusterInfo,o=n.saveComp,i=null!==(t=null==r?void 0:r.componentTypeCode)&&void 0!==t?t:"";a.validateFields(null,{},(function(e,t){var n,a,s,c,d,f,p;if(e&&Object.keys(e).includes(String(i)))u.default.error("请检查配置");else{var m,E=t[i];(0,h.isNeedTemp)(i)||(m=JSON.stringify((0,h.handleComponentConfigAndCustom)(t[i],i))),(0,h.isNeedTemp)(i)&&(m=JSON.stringify(S(S({},null==E?void 0:E.specialConfig),(0,h.handleCustomParam)(E.customParam,!0)))),(0,h.isKubernetes)(i)&&(m=JSON.stringify(null==E?void 0:E.specialConfig));var T={storeType:null!==(n=null==E?void 0:E.storeType)&&void 0!==n?n:"",principal:null!==(a=null==E?void 0:E.principal)&&void 0!==a?a:"",principals:null!==(s=null==E?void 0:E.principals)&&void 0!==s?s:[],hadoopVersion:null!==(c=E.hadoopVersion)&&void 0!==c?c:"",componentTemplate:(0,h.isNeedTemp)(i)?E.customParam?JSON.stringify((0,h.handleCustomParam)(E.customParam)):"[]":JSON.stringify((0,h.handleComponentTemplate)(t[i],r)),componentConfig:m};v.default.saveComponent(S(S({},T),{},{clusterId:l.clusterId,componentCode:i,clusterName:l.clusterName,resources1:null!==(d=null==E?void 0:E.uploadFileName)&&void 0!==d?d:"",resources2:"",kerberosFileName:null!==(f=null==E||null===(p=E.kerberosFileName)||void 0===p?void 0:p.name)&&void 0!==f?f:""})).then((function(e){var t,n;1==e.code&&(o(S(S({},T),{},{componentTypeCode:i,uploadFileName:null!==(t=null==E?void 0:E.uploadFileName)&&void 0!==t?t:"",kerberosFileName:null!==(n=null==E?void 0:E.kerberosFileName)&&void 0!==n?n:""})),u.default.success("保存成功"))}))}}))})),(0,m.default)((0,c.default)(e),"onConfirm",(function(){var t,n=e.props,a=n.form,r=n.comp,l=n.initialCompData,o=null!==(t=null==r?void 0:r.componentTypeCode)&&void 0!==t?t:"",u=l.find((function(e){return e.componentTypeCode==o}));a.setFieldsValue((0,m.default)({},o,{componentConfig:(0,h.handleComponentConfig)({componentConfig:JSON.parse(u.componentConfig)},!0)}))})),e}return(0,s.default)(n,[{key:"render",value:function(){var e,t,n=null!==(e=null===(t=this.props.comp)||void 0===t?void 0:t.componentTypeCode)&&void 0!==e?e:"";return E.createElement("div",{className:"c-toolbar__container"},E.createElement(l.default,{title:"确认取消当前更改？",okText:"确认",cancelText:"取消",onConfirm:this.onConfirm},E.createElement(o.default,null,"取消")),E.createElement(o.default,{style:{marginLeft:8},type:"primary",onClick:this.onOk},"保存","".concat(T.COMPONENT_CONFIG_NAME[n]),"组件"))}}]),n}(E.PureComponent);t.default=N},XdBI:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("pNMO"),n("ma9I"),n("TeQF"),n("QWBl"),n("2B1R"),n("+2oP"),n("HRxU"),n("eoL8"),n("T63A"),n("5DmW"),n("27RR"),n("tkto"),n("FZtP"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("DtFj")),o=r(n("s4l/")),u=r(n("qu0K")),i=r(n("h0/l")),s=r(n("4IMT")),c=r(n("QpBz")),d=r(n("o0o1")),f=r(n("lSNA"));n("ls82");var p=r(n("yXPU")),m=r(n("J4zp")),E=r(n("CC+v")),v=a(n("q1tI")),T=r(n("RHHV")),h=n("RzPm");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,f.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=E.default.confirm,N=function(e){var t=(0,v.useState)({currentPage:1,total:0,pageSize:15}),n=(0,m.default)(t,2),a=n[0],r=n[1],f=(0,v.useState)({alertGateType:[],reFreshKey:""}),E=(0,m.default)(f,2),y=E[0],N=E[1],C=function(){N((function(e){return S(S({},e),{},{reFreshKey:Math.random()})}))},b=function(){var e=(0,p.default)(d.default.mark((function e(t){return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.default.deleteAlarmRule({id:t});case 2:1===e.sent.code&&(c.default.success("删除成功！"),C());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var t=(0,p.default)(d.default.mark((function t(n){var a;return d.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.default.getByAlertId({id:n});case 2:1===(a=t.sent).code&&e.router.push({pathname:"/console/alarmChannel/alarmRule",state:{id:n,ruleData:a.data||{}}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(e){var t=e.alertId,n=e.alertGateType,a=e.alertGateName,r="".concat(h.ALARM_TYPE_TEXT[n].slice(0,2),"默认通道");g({title:"确定将“".concat(a,"(通道名称)” 设为").concat(r,"吗"),content:"设置为默认告警通道后，各应用的告警信息将走此通道",onOk:function(){T.default.setDefaultAlert({alertId:t,alertGateType:n}).then((function(e){1===e.code&&(c.default.success("操作成功"),C())}))},onCancel:function(){}})},P=function(e){r((function(t){return S(S({},t),{},{currentPage:e||1})}))},R=function(e,t){var n=(0,v.useState)(!1),a=(0,m.default)(n,2),l=a[0],o=a[1],u=(0,v.useState)([]),i=(0,m.default)(u,2),s=i[0],c=i[1],f=t.currentPage,E=t.pageSize,h=y.alertGateType,g=y.reFreshKey;return(0,v.useEffect)((function(){(function(){var e=(0,p.default)(d.default.mark((function e(){var t,n;return d.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.next=3,T.default.getAlarmRuleList({currentPage:f,pageSize:E,alertGateType:h});case 3:(t=e.sent)&&1==t.code&&(c((null===(n=t.data)||void 0===n?void 0:n.data)||[]),r((function(e){return S(S({},e),{},{total:t.data.totalCount})}))),o(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then()}),[f,h,E,g]),[{loading:l,alarmList:s}]}(0,a),A=(0,m.default)(R,1)[0],L=A.loading,I=A.alarmList;return v.default.createElement("div",{className:"alarm__wrapper"},v.default.createElement(u.default,{layout:"inline"},v.default.createElement(u.default.Item,null,v.default.createElement(s.default,{type:"primary",onClick:function(){e.router.push({pathname:"/console/alarmChannel/alarmRule",query:{isCreate:!0}})}},"新增告警通道"))),v.default.createElement(l.default,{className:"dt-table-fixed-contain-footer",scroll:{y:!0},style:{height:"calc(100vh - 154px)"},loading:L,columns:[{title:"通道名称",dataIndex:"alertGateName",render:function(e,t){var n="".concat(h.ALARM_TYPE_TEXT[t.alertGateType].slice(0,2),"默认通道");return v.default.createElement("span",{className:"alarm-name-wrap"},v.default.createElement("span",{className:"alarm-name"},e),t.isDefault?v.default.createElement(s.default,{className:"alarm-btn",disabled:!0},n):null)}},{title:"通道类型",dataIndex:"alertGateType",filters:Object.entries(h.ALARM_TYPE_TEXT).map((function(e){var t=(0,m.default)(e,2),n=t[0];return{text:t[1],value:n}})),render:function(e){return h.ALARM_TYPE_TEXT[e]}},{title:"通道标识",dataIndex:"alertGateSource"},{title:"操作",dataIndex:"opera",render:function(e,t){var n=t.alertId,a="".concat(h.ALARM_TYPE_TEXT[t.alertGateType].slice(0,2),"默认通道");return v.default.createElement("span",null,v.default.createElement("a",{onClick:function(){O(n)}},"编辑"),v.default.createElement("span",{className:"ant-divider"}),v.default.createElement(i.default,{title:"确认删除该告警通道？",okText:"确定",cancelText:"取消",onConfirm:function(){b(n)}},v.default.createElement("a",null,"删除")),!t.isDefault&&t.alertGateType!==h.ALARM_TYPE.CUSTOM&&v.default.createElement(v.default.Fragment,null,v.default.createElement("span",{className:"ant-divider"}),v.default.createElement("a",{onClick:function(){_(t)}},"设为".concat(a))))}}],dataSource:I,pagination:!1,onChange:function(e,t,n){N((function(e){return S(S({},e),{},{alertGateType:t.alertGateType||[]})}))},footer:function(){return v.default.createElement(o.default,{current:a.currentPage,pageSize:a.pageSize,size:"small",total:a.total,onChange:P,showTotal:function(e){return v.default.createElement("span",null,"共",v.default.createElement("span",{style:{color:"#3F87FF"}},e),"条数据，每页显示",a.pageSize,"条")}})}}))};t.default=N},Z5Xq:function(e,t,n){"use strict";var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("fvjX"),l=n("L3Ur"),o=a(n("2Cp/")),u=n("X7z3"),i=n("Xkvk"),s=n("sdwN"),c=n("IdH2"),d=(0,r.combineReducers)({routing:l.routerReducer,user:u.user,apps:i.apps,app:i.app,msgList:s.msgList,licenseApps:i.licenseApps,consoleUser:o.default,testStatus:c.testStatus,showRequireStatus:c.showRequireStatus});t.default=d},ZeNE:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("ma9I"),n("fbCW"),n("2B1R"),n("DQNa"),n("07d7"),n("SuFq"),n("JfAA"),n("R5XZ"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("CC+v")),o=r(n("iJl9")),u=r(n("qu0K")),i=r(n("pVnL")),s=r(n("ATwu")),c=r(n("4IMT")),d=r(n("lwsE")),f=r(n("W8MJ")),p=r(n("PJYZ")),m=r(n("7W2i")),E=r(n("a1gu")),v=r(n("Nsbk")),T=r(n("lSNA")),h=r(n("FAat")),y=a(n("q1tI")),S=n("LvDl"),g=n("RzPm");function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,v.default)(e);if(t){var r=(0,v.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,E.default)(this,n)}}var C=h.default.Option,b=function(e){(0,m.default)(n,e);var t=N(n);function n(e){var a;return(0,d.default)(this,n),a=t.call(this,e),(0,T.default)((0,p.default)(a),"onSubmit",(function(e){var t=a.props,n=t.form,r=t.data,l=t.userList,o=null!=r?["username","id"]:["bindUserId"];n.validateFields(o.concat(["name","password"]),(function(t,a){if(!t){var r=l.find((function(e){return e.userId==a.bindUserId}));r&&(a.username=r.userName,a.email=r.userName),a.id&&(a.bindUserId=a.id),e&&(e(a),setTimeout((function(){return n.resetFields()}),0))}}))})),(0,T.default)((0,p.default)(a),"onOk",(function(){var e=a.props.onOk;a.onSubmit(e)})),(0,T.default)((0,p.default)(a),"onUnbind",(function(){var e=a.props.onUnbind;a.onSubmit(e)})),(0,T.default)((0,p.default)(a),"onCancel",(function(e){var t=a.props,n=t.onCancel,r=t.form;n&&(setTimeout((function(){return r.resetFields()}),0),n(e))})),a.state={},a}return(0,f.default)(n,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,n=t.visible,a=t.onCancel,r=t.title,d=t.data,f=t.engineText,p=t.userList,m=null!=d,E=y.createElement("div",{style:{height:"30px"}},d?y.createElement("span",{className:"left"},y.createElement(c.default,{onClick:this.onUnbind},"解除绑定")):null,y.createElement("span",{className:"right"},y.createElement(c.default,{onClick:this.onCancel,style:{marginRight:10}},"取消"),y.createElement(c.default,{type:"primary",onClick:this.onOk},"确定")));return y.createElement(l.default,{closable:!0,title:r,visible:n,footer:E,onCancel:a,className:"no-padding-modal"},y.createElement(y.Fragment,null,y.createElement(s.default,{message:"",style:{margin:"10px"},description:"每个产品账号绑定一个".concat(f,"用户，任务提交运行、测试时，使用绑定的").concat(f,"用户执行"),type:"info",showIcon:!0}),y.createElement(u.default,null,m?y.createElement(y.Fragment,null,y.createElement(u.default.Item,(0,i.default)({key:"username",label:"产品账号"},g.formItemLayout),e("username",{rules:[{required:!0,message:"产品账号不可为空！"}],initialValue:(0,S.get)(d,"username","")})(y.createElement(o.default,{disabled:m}))),y.createElement(u.default.Item,(0,i.default)({key:"id",label:"产品账号",style:{display:"none"}},g.formItemLayout),e("id",{initialValue:(0,S.get)(d,"id",void 0)})(y.createElement(o.default,null)))):y.createElement(u.default.Item,(0,i.default)({key:"bindUserId",label:"产品账号"},g.formItemLayout),e("bindUserId",{rules:[{required:!0,message:"产品账号不可为空！"}],initialValue:void 0})(y.createElement(h.default,{allowClear:!0,showSearch:!0,placeholder:"请选择产品账号",optionFilterProp:"title"},p&&p.map((function(e){var t="".concat(e.userId),n=e.userName;return y.createElement(C,{key:t,title:n,value:t},n)}))))),y.createElement(u.default.Item,(0,i.default)({label:"数据库账号"},g.formItemLayout),e("name",{rules:[{required:!0,message:"数据库账号不可为空！"}],initialValue:(0,S.get)(d,"name","")})(y.createElement(o.default,{placeholder:"请输入数据库账号"}))),y.createElement(u.default.Item,(0,i.default)({label:"数据库密码"},g.formItemLayout),e("password",{rules:[{required:!1,message:"数据库密码不可为空！"}],initialValue:""})(y.createElement(o.default,{type:"password",placeholder:"请输入数据库密码"}))))))}}]),n}(y.Component),O=u.default.create()(b);t.default=O},aSnJ:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.MyLayout=s,t.default=void 0;var l=r(n("d2CI")),o=a(n("q1tI")),u=r(n("AuKd")),i=l.default.Content;function s(e){var t=e.children;return o.createElement(l.default,{style:{position:"relative",height:"100%"}},o.createElement(u.default,null),o.createElement(l.default,{style:{padding:"20px"}},o.createElement(i,{style:{background:"#fff",padding:20,margin:0,minHeight:280}},t)))}var c=s;t.default=c},"g/Sg":function(e,t,n){"use strict";window.__POWERED_BY_QIANKUN__&&(n.p=window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__)},hmv9:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("ma9I"),n("DQNa"),n("wLYn"),n("07d7"),n("SuFq"),n("JfAA"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("CC+v")),o=r(n("o0o1")),u=r(n("QpBz"));n("ls82");var i=r(n("yXPU")),s=r(n("lwsE")),c=r(n("W8MJ")),d=r(n("PJYZ")),f=r(n("7W2i")),p=r(n("a1gu")),m=r(n("Nsbk")),E=r(n("lSNA")),v=a(n("q1tI")),T=r(n("ZEKU")),h=n("LvDl"),y=r(n("RHHV"));function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,p.default)(this,n)}}var g={height:"100%"},N={mode:"simpleConfig",lineNumbers:!1,readOnly:!1,autofocus:!1,indentWithTabs:!0,smartIndent:!0},C=function(e){(0,f.default)(n,e);var t=S(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,E.default)((0,d.default)(e),"state",{krb5Content:""}),(0,E.default)((0,d.default)(e),"_editor",void 0),(0,E.default)((0,d.default)(e),"editorParamsChange",(function(t,n){e.setState({krb5Content:n})})),(0,E.default)((0,d.default)(e),"debounceEditorChange",(0,h.debounce)(e.editorParamsChange,300,{maxWait:2e3})),(0,E.default)((0,d.default)(e),"onOK",(0,i.default)(o.default.mark((function t(){var n,a;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.onCancel,a=e.state.krb5Content,t.next=4,y.default.updateKrb5Conf({krb5Content:a});case 4:1==t.sent.code&&(n(a),u.default.success("更新成功"));case 6:case"end":return t.stop()}}),t)})))),e}return(0,c.default)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.visible,a=t.onCancel,r=t.krbconfig;return v.createElement(l.default,{title:"合并后的krb5.conf",visible:n,onCancel:function(){return a()},onOk:this.onOK,okText:"保存"},v.createElement("div",{style:g},v.createElement(T.default,{sync:!0,value:r||"",className:"c-kerberosModal__edior",ref:function(t){return e._editor=t},style:{height:"100%"},options:N,onChange:this.debounceEditorChange.bind(this)})))}}]),n}(v.Component);t.default=C},htex:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("ma9I"),n("DQNa"),n("sMBO"),n("07d7"),n("SuFq"),n("JfAA"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("d1El")),o=r(n("Pbn2")),u=r(n("B8+X")),i=r(n("4IMT")),s=r(n("lSNA")),c=r(n("lwsE")),d=r(n("W8MJ")),f=r(n("7W2i")),p=r(n("a1gu")),m=r(n("Nsbk")),E=r(n("qu0K")),v=a(n("q1tI"));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,p.default)(this,n)}}var h=E.default.Item,y=function(e){(0,f.default)(n,e);var t=T(n);function n(){return(0,c.default)(this,n),t.apply(this,arguments)}return(0,d.default)(n,[{key:"render",value:function(){var e,t,n=this,a=this.props,r=a.label,c=a.form,d=a.icons,f=a.deleteIcon,p=a.fileInfo,m=a.uploadFile,E=a.view,T=a.rules,y=a.notDesc,S=a.deleteFile,g=null!==(e=null===(t=c.getFieldValue("".concat(p.typeCode,".").concat(p.name)))||void 0===t?void 0:t.name)&&void 0!==e?e:null==p?void 0:p.value,N={name:p.uploadProps.name,accept:p.uploadProps.accept,beforeUpload:function(e){return m(e,p.uploadProps.type,(function(){n.props.form.setFieldsValue((0,s.default)({},"".concat(p.typeCode,".").concat(p.name),e))})),!1},fileList:[]};return v.createElement(h,{label:null!=r?r:"参数上传",colon:!1},c.getFieldDecorator("".concat(p.typeCode,".").concat(p.name),{initialValue:(null==p?void 0:p.value)||"",rules:null!=T?T:[]})(v.createElement("div",null)),!E&&v.createElement("div",{className:"c-fileConfig__config"},v.createElement(u.default,N,v.createElement(i.default,{style:{width:172},icon:"upload",loading:p.loading},"点击上传")),v.createElement("span",{className:"config-desc"},p.desc)),c.getFieldValue("".concat(p.typeCode,".").concat(p.name))&&!y&&v.createElement("span",{className:"config-file"},v.createElement(o.default,{type:"paper-clip"}),v.createElement(l.default,{title:g,placement:"topLeft"},g),d,f?null:!E&&v.createElement(o.default,{type:"delete",onClick:function(){c.setFieldsValue((0,s.default)({},"".concat(p.typeCode,".").concat(p.name),"")),S&&S()}})))}}]),n}(v.PureComponent);t.default=y},itRn:function(e,t,n){"use strict";var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("AwqB")),l=a(n("C4JW")),o={getUnbindAccounts:function(e){return r.default.post(l.default.ACCOUNT_UNBIND_LIST,e)},bindAccount:function(e){return r.default.postWithDefaultHeader(l.default.ACCOUNT_BIND,e)},ldapBindAccount:function(e){return r.default.postWithDefaultHeader(l.default.LDAP_ACCOUNT_BIND,e)},updateBindAccount:function(e){return r.default.postWithDefaultHeader(l.default.UPDATE_ACCOUNT_BIND,e)},getBindAccounts:function(e){return r.default.post(l.default.ACCOUNT_BIND_LIST,e)},unbindAccount:function(e){return r.default.postWithDefaultHeader(l.default.ACCOUNT_UNBIND,e)}};t.default=o},j1Tt:function(e,t,n){"use strict";var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.CONFIG_FILE_DESC=t.DEFAULT_COMP_VERSION=t.CONFIG_ITEM_TYPE=t.FILE_TYPE=t.VERSION_TYPE=t.CONFIG_BUTTON_TYPE=t.TABS_TITLE=t.COMPONENT_CONFIG_NAME=t.COMPONENT_TYPE_VALUE=t.TABS_POP_VISIBLE=t.TABS_TITLE_KEY=void 0;var r,l,o,u,i,s=a(n("lSNA")),c={COMMON:0,SOURCE:1,STORE:2,COMPUTE:3};t.TABS_TITLE_KEY=c;var d=(r={},(0,s.default)(r,c.COMMON,!1),(0,s.default)(r,c.SOURCE,!1),(0,s.default)(r,c.STORE,!1),(0,s.default)(r,c.COMPUTE,!1),r);t.TABS_POP_VISIBLE=d;var f={FLINK:0,SPARK:1,LEARNING:2,DTYARNSHELL:3,HDFS:4,YARN:5,SPARK_THRIFT_SERVER:6,CARBONDATA:7,LIBRA_SQL:8,HIVE_SERVER:9,SFTP:10,IMPALA_SQL:11,TIDB_SQL:12,ORACLE_SQL:13,GREEN_PLUM_SQL:14,KUBERNETES:15,PRESTO_SQL:16,NFS:17};t.COMPONENT_TYPE_VALUE=f;var p={0:"Flink",1:"Spark",2:"Learning",3:"DtScript",4:"HDFS",5:"YARN",6:"SparkThrift",7:"CarbonData ThriftServer",8:"LibrA SQL",9:"HiveServer",10:"SFTP",11:"Impala SQL",12:"TiDB SQL",13:"Oracle SQL",14:"Greenplum SQL",15:"Kubernetes",16:"Presto SQL",17:"NFS"};t.COMPONENT_CONFIG_NAME=p;var m=(l={},(0,s.default)(l,c.COMMON,{iconName:"iconcunchuzujian",name:"公共组件"}),(0,s.default)(l,c.SOURCE,{iconName:"icongonggongzujian",name:"资源调度组件"}),(0,s.default)(l,c.STORE,{iconName:"iconjisuanzujian",name:"存储组件"}),(0,s.default)(l,c.COMPUTE,{iconName:"iconziyuantiaodu",name:"计算组件"}),l);t.TABS_TITLE=m;var E=(o={},(0,s.default)(o,c.COMMON,[{code:f.SFTP,componentName:p[f.SFTP]}]),(0,s.default)(o,c.SOURCE,[{code:f.YARN,componentName:p[f.YARN]},{code:f.KUBERNETES,componentName:p[f.KUBERNETES]}]),(0,s.default)(o,c.STORE,[{code:f.HDFS,componentName:p[f.HDFS]},{code:f.NFS,componentName:p[f.NFS]}]),(0,s.default)(o,c.COMPUTE,[{code:f.SPARK,componentName:p[f.SPARK]},{code:f.SPARK_THRIFT_SERVER,componentName:p[f.SPARK_THRIFT_SERVER]},{code:f.FLINK,componentName:p[f.FLINK]},{code:f.HIVE_SERVER,componentName:p[f.HIVE_SERVER]},{code:f.IMPALA_SQL,componentName:p[f.IMPALA_SQL]},{code:f.DTYARNSHELL,componentName:p[f.DTYARNSHELL]},{code:f.LEARNING,componentName:p[f.LEARNING]},{code:f.PRESTO_SQL,componentName:p[f.PRESTO_SQL]},{code:f.TIDB_SQL,componentName:p[f.TIDB_SQL]},{code:f.LIBRA_SQL,componentName:p[f.LIBRA_SQL]},{code:f.ORACLE_SQL,componentName:p[f.ORACLE_SQL]},{code:f.GREEN_PLUM_SQL,componentName:p[f.GREEN_PLUM_SQL]}]),o);t.CONFIG_BUTTON_TYPE=E;t.VERSION_TYPE={0:"Flink",9:"HiveServer",1:"Spark",6:"SparkThrift"};t.FILE_TYPE={KERNEROS:0,CONFIGS:1,PARAMES:2};t.CONFIG_ITEM_TYPE={RADIO:"RADIO",INPUT:"INPUT",SELECT:"SELECT",CHECKBOX:"CHECKBOX",PASSWORD:"PASSWORD",GROUP:"GROUP"};var v=(u={},(0,s.default)(u,f.FLINK,"180"),(0,s.default)(u,f.SPARK,"210"),(0,s.default)(u,f.SPARK_THRIFT_SERVER,"2.x"),(0,s.default)(u,f.HIVE_SERVER,"2.x"),u);t.DEFAULT_COMP_VERSION=v;var T=(i={},(0,s.default)(i,f.YARN,"zip格式，至少包括yarn-site.xml和core-site.xml"),(0,s.default)(i,f.HDFS,"zip格式，至少包括core-site.xml、hdfs-site.xml、hive-site.xml"),(0,s.default)(i,f.KUBERNETES,"zip格式，至少包括kubernetes.config"),i);t.CONFIG_FILE_DESC=T},jRo7:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("pNMO"),n("ma9I"),n("TeQF"),n("QWBl"),n("DQNa"),n("HRxU"),n("eoL8"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("SuFq"),n("JfAA"),n("FZtP"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("lwsE")),o=r(n("W8MJ")),u=r(n("PJYZ")),i=r(n("7W2i")),s=r(n("a1gu")),c=r(n("Nsbk")),d=r(n("DtFj")),f=r(n("lSNA")),p=a(n("q1tI")),m=r(n("RHHV")),E=n("LvDl"),v=r(n("JtgN")),T=n("Ps9q");function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,s.default)(this,n)}}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,f.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){var t=e.title,n=e.useNum,a=e.total,r=e.value,l=function(e){var t=(0,E.cloneDeep)(T.pieOption);return t.series[1].data=[S(S({},t.series[1].data[0]),{},{value:e,itemStyle:{normal:{color:e>=T.ALARM_DEFAULT?e>=T.ALARM_HIGHT?"#FF5F5C":"#FFB310":"#16DE9A"}}}),S(S({},t.series[1].data[1]),{},{value:150-e})],t}(void 0===r?0:r);return p.createElement("div",{className:"c-resourceCard__container"},p.createElement(v.default,{option:l,width:110,height:110}),p.createElement("div",{className:"c-resourceCard__container__title"},p.createElement("p",null,t),p.createElement("p",null,p.createElement("span",{style:{fontSize:18}},n||"-")," / ",a||"-")))},N=function(e){var t=e.columns,n=e.data,a=e.title,r=e.desc,l=void 0===r?"":r;return p.createElement("div",{className:"c-resourceView__table__container"},p.createElement("p",null,a,l&&"（".concat(l,"）")),p.createElement(d.default,{className:"dt-table-border dt-table-last-row-noborder",style:{marginTop:"10px"},columns:t,dataSource:n,pagination:!1}))},C=function(e){(0,i.default)(n,e);var t=h(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,f.default)((0,u.default)(e),"state",{nodesListSource:[],queuesListSource:[],target:"",resourceMetrics:{},type:T.SCHEDULE_TYPE.Capacity}),(0,f.default)((0,u.default)(e),"initQueuesColumns",(function(){var t=[{title:"资源队列",dataIndex:"queueName",render:function(e,t){return t.queueName}},{title:"已使用容量",dataIndex:"usedCapacity",render:function(e,t){return"".concat(t.usedCapacity,"%")}},{title:"分配容量",dataIndex:"capacity",render:function(e,t){return"".concat(t.capacity,"%")}},{title:"最大容量",dataIndex:"maxCapacity",render:function(e,t){return"".concat(t.maxCapacity,"%")}},{title:"查看",dataIndex:"action",render:function(t,n){return p.createElement("a",{onClick:function(){e.handleShowDetailt(n)}},"资源详情")},width:150}];switch(e.state.type){case T.SCHEDULE_TYPE.Fair:t=[{title:"资源队列",dataIndex:"queueName",render:function(e,t){return t.queueName}},{title:"已使资源数",dataIndex:"usedResources",render:function(e){return p.createElement("span",null,"memory:",p.createElement("span",{style:{margin:5}},e.memory,", "),"vCores:",p.createElement("span",{style:{margin:5}},e.vCores))}},{title:"最大资源数",dataIndex:"maxResources",render:function(e){return p.createElement("span",null,"memory:",p.createElement("span",{style:{margin:5}},e.memory,", "),"vCores:",p.createElement("span",{style:{margin:5}},e.vCores))}},{title:"最小资源数",dataIndex:"minResources",render:function(e){return p.createElement("span",null,"memory:",p.createElement("span",{style:{margin:5}},e.memory,", "),"vCores:",p.createElement("span",{style:{margin:5}},e.vCores))}}];break;case T.SCHEDULE_TYPE.FIFO:t=[{title:"容量",dataIndex:"capacity",render:function(e,t){return t.capacity}},{title:"已使用容量",dataIndex:"usedCapacity",render:function(e,t){return t.usedCapacity}},{title:"节点数量",dataIndex:"numNodes",render:function(e,t){return t.numNodes}}]}return t})),(0,f.default)((0,u.default)(e),"initDetailtColumns",(function(){return[{title:"Username",dataIndex:"username"},{title:"Max Resource",dataIndex:"maxResource",render:function(e){return p.createElement("span",null,"memory:",p.createElement("span",{style:{margin:5}},e.memory,", "),"vCores:",p.createElement("span",{style:{margin:5}},e.vCores))}},{title:"Used Resource",dataIndex:"resourcesUsed",render:function(e){return p.createElement("span",null,"memory:",p.createElement("span",{style:{margin:5}},e.memory,", "),"vCores:",p.createElement("span",{style:{margin:5}},e.vCores))}},{title:"Max AM Resource",dataIndex:"maxAMResource",render:function(e){return p.createElement("span",null,"memory:",p.createElement("span",{style:{margin:5}},e.memory,", "),"vCores:",p.createElement("span",{style:{margin:5}},e.vCores))}},{title:"Used AM Resource",dataIndex:"AMResourceUsed",render:function(e){return p.createElement("span",null,"memory:",p.createElement("span",{style:{margin:5}},e.memory,", "),"vCores:",p.createElement("span",{style:{margin:5}},e.vCores))}}]})),e}return(0,o.default)(n,[{key:"componentDidMount",value:function(){this.getClusterResources()}},{key:"getClusterResources",value:function(){var e=this,t=this.props.clusterName;m.default.getClusterResources({clusterName:t}).then((function(t){var n,a,r,l,o;if(1==t.code){var u=T.SCHEDULE_TYPE.Capacity,i=t.data.queues||[];switch(t.data.scheduleInfo.type){case T.SCHEDULE_TYPE.Fair:var s=null===(n=t.data)||void 0===n||null===(a=n.scheduleInfo)||void 0===a||null===(r=a.rootQueue)||void 0===r?void 0:r.childQueues;i=null!==(l=null==s?void 0:s.queue)&&void 0!==l?l:s,u=T.SCHEDULE_TYPE.Fair;break;case T.SCHEDULE_TYPE.FIFO:i=[S({},null===(o=t.data)||void 0===o?void 0:o.scheduleInfo)],u=T.SCHEDULE_TYPE.FIFO}e.setState({queuesListSource:i,type:u,nodesListSource:t.data.nodes||[],resourceMetrics:t.data.resourceMetrics||{}})}}))}},{key:"handleShowDetailt",value:function(e){var t=this.state.target,n=(0,E.cloneDeep)(e);(null==t?void 0:t.queueName)===e.queueName&&(null==t?void 0:t.queueName)&&(n=""),this.setState({target:n})}},{key:"initNodesColumns",value:function(){return[{title:"nodeName",dataIndex:"nodeName",render:function(e,t){return t.nodeName||"-"}},{title:"virtualCores",dataIndex:"virtualCores",render:function(e,t){return t.virtualCores}},{title:"usedVirtualCores",dataIndex:"usedVirtualCores",render:function(e,t){return t.usedVirtualCores}},{title:"memory (M)",dataIndex:"memory",render:function(e,t){return t.memory}},{title:"usedMemory (M)",dataIndex:"usedMemory",render:function(e,t){return t.usedMemory}}]}},{key:"render",value:function(){var e=this.initNodesColumns(),t=this.initQueuesColumns(),n=this.initDetailtColumns(),a=this.state,r=a.nodesListSource,l=a.target,o=a.queuesListSource,u=a.type,i=this.state.resourceMetrics,s=i.usedCores,c=i.totalCores,d=i.usedMem,f=i.totalMem,m=i.memRate,v=i.coresRate;return p.createElement("div",null,p.createElement("div",{className:"c-resourceView__container"},p.createElement("div",{style:{height:110,width:"50%",marginRight:10}},p.createElement(g,{type:"cpu",title:"CPU（core）",useNum:s,total:c,value:v})),p.createElement("div",{style:{height:110,width:"50%",marginLeft:10}},p.createElement(g,{type:"memory",title:"内存（GB）",useNum:d,total:f,value:m}))),p.createElement(N,{columns:e,data:r,title:"Yarn-NodeManager资源使用"}),p.createElement(N,{key:u,columns:t,data:o,title:"各资源队列资源使用（调度方式：".concat((0,E.findKey)(T.SCHEDULE_TYPE,(function(e){return e===u})),"）")}),l?p.createElement(N,{columns:n,data:l.users,title:"资源详情",desc:l.queueName}):null)}}]),n}(p.Component);t.default=C},kYLF:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("pNMO"),n("ma9I"),n("TeQF"),n("QWBl"),n("2B1R"),n("DQNa"),n("sMBO"),n("zKZe"),n("HRxU"),n("eoL8"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("SuFq"),n("JfAA"),n("FZtP"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("DtFj")),o=r(n("4IMT")),u=r(n("h0/l")),i=r(n("QpBz")),s=r(n("o0o1"));n("ls82");var c=r(n("yXPU")),d=r(n("lwsE")),f=r(n("W8MJ")),p=r(n("PJYZ")),m=r(n("7W2i")),E=r(n("a1gu")),v=r(n("Nsbk")),T=r(n("lSNA")),h=r(n("iJl9")),y=r(n("FAat")),S=a(n("q1tI")),g=n("LvDl"),N=r(n("j+Cx")),C=r(n("RHHV")),b=r(n("itRn")),O=n("RzPm"),_=r(n("ZeNE")),P=r(n("K4z+")),R=n("IiER"),A=n("FZsQ");function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,T.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,v.default)(e);if(t){var r=(0,v.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,E.default)(this,n)}}var D=y.default.Option,j=h.default.Search,M=function(e){(0,m.default)(n,e);var t=k(n);function n(){var e;(0,d.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,T.default)((0,p.default)(e),"state",{tableData:[],unbindUserList:[],tenantList:[],queryParams:{dtuicTenantId:"",username:"",currentPage:1,total:0,pageSize:10},modalData:null,loading:!1,visible:!1}),(0,T.default)((0,p.default)(e),"fetchData",(0,c.default)(s.default.mark((function t(){var n,a,r;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.queryParams,a=e.props.engineType,e.setState({loading:!0}),n.engineType=a,t.next=6,b.default.getBindAccounts(n);case 6:1===(r=t.sent).code&&e.setState({tableData:(0,g.get)(r,"data.data",[]),queryParams:Object.assign({},n,{total:(0,g.get)(r,"data.totalCount","")})}),e.setState({loading:!1});case 9:case"end":return t.stop()}}),t)})))),(0,T.default)((0,p.default)(e),"fetchUnbindUsers",(0,c.default)(s.default.mark((function t(){var n,a,r;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.queryParams,a=e.props.engineType,t.next=4,b.default.getUnbindAccounts({dtuicTenantId:n.dtuicTenantId,engineType:a});case 4:1===(r=t.sent).code&&e.setState({unbindUserList:(0,g.get)(r,"data",[])});case 6:case"end":return t.stop()}}),t)})))),(0,T.default)((0,p.default)(e),"fetchTenants",(0,c.default)(s.default.mark((function t(){var n,a,r,l,o;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,a=n.clusterId,r=n.engineType,t.next=3,C.default.searchTenant({clusterId:a,engineType:r,currentPage:1,pageSize:1e3});case 3:1===(l=t.sent).code&&(o=(0,g.get)(l,"data.data",[]),e.setState({tenantList:o}),o&&o.length>0&&e.onTenantChange("".concat(o[0].tenantId)));case 5:case"end":return t.stop()}}),t)})))),(0,T.default)((0,p.default)(e),"updateQueryParams",(function(t,n){e.setState({queryParams:Object.assign(e.state.queryParams,t)},(function(){n&&n()}))})),(0,T.default)((0,p.default)(e),"onTenantChange",(function(t){e.updateQueryParams({dtuicTenantId:t},(function(){e.handleTableChange({current:1}),e.fetchUnbindUsers()}))})),(0,T.default)((0,p.default)(e),"handleTableChange",(function(t,n,a){e.updateQueryParams({currentPage:t.current},e.fetchData)})),(0,T.default)((0,p.default)(e),"showHideBindModal",(function(t){e.setState({visible:!e.state.visible,modalData:t})})),(0,T.default)((0,p.default)(e),"onUnBindAccount",function(){var t=(0,c.default)(s.default.mark((function t(n){var a,r;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.engineType,r={id:n.bindUserId,name:n.name,password:n.password||""},(0,R.isHadoopEngine)(a)&&(r=I(I({},r),{},{id:n.id})),t.next=5,b.default.unbindAccount(r);case 5:1===t.sent.code&&(i.default.success("解绑成功！"),!(0,R.isHadoopEngine)(a)&&e.showHideBindModal(null),e.handleTableChange({current:1}),e.fetchUnbindUsers());case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,T.default)((0,p.default)(e),"onBindAccountUpdate",function(){var t=(0,c.default)(s.default.mark((function t(n){var a,r,l,o,u,c,d,f;return s.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state,r=a.queryParams,l=a.modalData,o=e.props.engineType,c=function(){e.showHideBindModal(null),e.handleTableChange({current:1}),e.fetchUnbindUsers()},d={code:0},!(u=l)){t.next=13;break}return n.bindTenantId=r.dtuicTenantId,n.engineType=o,t.next=10,b.default.updateBindAccount(n);case 10:d=t.sent,t.next=25;break;case 13:if(u||(0,R.isHadoopEngine)(o)){t.next=21;break}return n.bindTenantId=r.dtuicTenantId,n.engineType=o,t.next=18,b.default.bindAccount(n);case 18:d=t.sent,t.next=25;break;case 21:return f=n.map((function(e){return I(I({},e),{},{bindTenantId:r.dtuicTenantId,engineType:o})})),t.next=24,b.default.ldapBindAccount({accountList:f});case 24:d=t.sent;case 25:1===d.code&&(i.default.success("绑定成功！"),c());case 26:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,T.default)((0,p.default)(e),"initColumns",(function(){var t=e.props.engineType;return[{title:"产品账号",dataIndex:"username",render:function(e,t){return e}},{title:(0,R.isHadoopEngine)(t)?"LDAP账号":"数据库账号",dataIndex:"name",render:function(e,t){return e}},{title:"最近修改人",dataIndex:"modifyUserName",render:function(e,t){return e}},{title:"最近修改时间",dataIndex:"gmtModified",render:function(e,t){return N.default.formatDateTime(e)}},{title:"操作",dataIndex:"deal",render:function(n,a){return(0,R.isHadoopEngine)(t)?S.createElement("span",null,S.createElement("a",{onClick:function(){e.showHideBindModal(a)}},"编辑"),S.createElement("span",{className:"ant-divider"}),S.createElement(u.default,{title:"确认删除该LDAP账号绑定？",okText:"确定",cancelText:"取消",onConfirm:function(){e.onUnBindAccount(a)}},S.createElement("a",{style:{color:"#FF5F5C"}},"删除"))):S.createElement("a",{onClick:function(){e.showHideBindModal(a)}},"修改绑定")}}]})),e}return(0,f.default)(n,[{key:"componentDidMount",value:function(){this.fetchTenants()}},{key:"render",value:function(){var e=this,t=this.state,n=t.tableData,a=t.queryParams,r=t.loading,u=t.visible,i=t.modalData,s=t.tenantList,c=t.unbindUserList,d=this.props.engineType,f={current:a.currentPage,pageSize:10,total:a.total};return S.createElement("div",{style:{margin:"15px"}},S.createElement(y.default,{className:"cluster-select",style:{width:"180px"},placeholder:"请选择租户",showSearch:!0,value:"".concat(a.dtuicTenantId),optionFilterProp:"title",onChange:this.onTenantChange},s&&s.map((function(e){return S.createElement(D,{key:"".concat(e.tenantId),title:e.tenantName,value:"".concat(e.tenantId)},e.tenantName)}))),S.createElement(j,{style:{width:"200px",marginBottom:"20px",marginLeft:"10px"},placeholder:"按产品账号、".concat((0,R.isHadoopEngine)(d)?"LDAP":"数据库","账号搜索"),value:a.username,onChange:function(t){e.updateQueryParams({username:t.target.value,currentPage:1})},onSearch:this.fetchData}),S.createElement("span",{className:"right"},S.createElement(o.default,{type:"primary",onClick:function(){return e.showHideBindModal()}},"绑定账号")),S.createElement(l.default,{className:"dt-table-border",loading:r,rowKey:function(e,t){return"accounts-".concat(t,"-").concat(e.userId)},columns:this.initColumns(),dataSource:n,pagination:f,onChange:this.handleTableChange}),(0,R.isHadoopEngine)(d)?S.createElement(P.default,{key:(0,A.giveMeAKey)(),visible:u,data:i,userList:c,title:i?"编辑账号":"绑定账号",onOk:this.onBindAccountUpdate,onCancel:function(){return e.showHideBindModal(null)}}):S.createElement(_.default,{visible:u,data:i,userList:i?n:c,title:i?"编辑账号":"绑定账号",onOk:this.onBindAccountUpdate,onUnbind:this.onUnBindAccount,onCancel:function(){return e.showHideBindModal(null)},engineText:O.ENGIN_TYPE_TEXT[d]}))}}]),n}(S.Component);t.default=M},"o4I+":function(e,t,n){"use strict";var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.userActions=void 0;var r=(0,a(n("zbcj")).default)(["SET_TENANT_LIST"],{prefix:"console/user"});t.userActions=r},pLYI:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=function(){return m.apply(this,arguments)},t.mount=function(e){return E.apply(this,arguments)},t.unmount=function(e){return v.apply(this,arguments)},t.update=function(e){return T.apply(this,arguments)};var l=r(n("o0o1"));n("ls82");var o=r(n("yXPU"));n("g/Sg");var u=a(n("q1tI")),i=a(n("qWSy")),s=n("i7vS"),c=a(n("PlQi")),d=r(n("vNIf")),f=function(){var e=n("Z5Xq").default,t=(0,s.getStore)(e,"hash"),a=t.store,r=t.history;return u.createElement(d.default,{store:a,history:r})};function p(e){i.render(u.createElement(f,null),e.container?e.container.querySelector("#app"):document.getElementById("app"))}function m(){return(m=(0,o.default)(l.default.mark((function e(){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=(0,o.default)(l.default.mark((function e(t){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=(0,o.default)(l.default.mark((function e(t){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.unmountComponentAtNode(t.container?t.container.querySelector("#app"):document.getElementById("app"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=(0,o.default)(l.default.mark((function e(t){return l.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.__POWERED_BY_QIANKUN__||p({}),c.appInfo()},pWBi:function(e,t,n){"use strict";var a=n("TqRt");n("pNMO"),n("TeQF"),n("QWBl"),n("HRxU"),n("eoL8"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("5s+n"),n("FZtP"),n("R5XZ"),Object.defineProperty(t,"__esModule",{value:!0}),t.authBeforeFormate=function(e){switch(e.status){case 402:case 200:return e;case 302:return o.default.info("登录超时, 请重新登录！"),Promise.reject(e);case 500:return o.default.error("服务器出现了点问题"),Promise.reject(e);default:return e}},t.authAfterFormated=function(e){switch(e.code){case 1:case 0:return e;case 3:return l.default.error({message:"权限通知",description:e.message}),Promise.reject(e);case 16:return Promise.reject(e);default:return e.message&&setTimeout((function(){l.default.error({message:"异常",description:e.message,style:c(c({},d),{},{wordBreak:"break-all"})})}),0),e}},t.isSelectedProject=function(){var e=u.default.getCookie("project_id");e&&"undefined"!==e||u.default.deleteCookie("project_id")},t.isLogin=function(){return i.default.get("session")};var r=a(n("lSNA")),l=a(n("rR1Q")),o=a(n("QpBz")),u=a(n("j+Cx")),i=a(n("hl8m"));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d={maxHeight:"500px",overflowY:"auto"}},pXCp:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("pNMO"),n("ma9I"),n("TeQF"),n("x0AG"),n("QWBl"),n("4mDm"),n("2B1R"),n("DQNa"),n("HRxU"),n("eoL8"),n("T63A"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("SuFq"),n("JfAA"),n("inlA"),n("LKBx"),n("FZtP"),n("3bBZ"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("iJl9")),o=r(n("9xET")),u=r(n("ZPTe")),i=r(n("J4zp")),s=r(n("RIqP")),c=r(n("lwsE")),d=r(n("W8MJ")),f=r(n("PJYZ")),p=r(n("7W2i")),m=r(n("a1gu")),E=r(n("Nsbk")),v=r(n("lSNA")),T=r(n("qu0K")),h=a(n("q1tI")),y=n("RzPm"),S=n("LNB4"),g=n("j1Tt");function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,v.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,E.default)(e);if(t){var r=(0,E.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,m.default)(this,n)}}var O=T.default.Item,_=function(e){(0,p.default)(n,e);var t=b(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,v.default)((0,f.default)(e),"state",{customParams:[]}),(0,v.default)((0,f.default)(e),"addCustomerParams",(function(){e.setState((function(e){return{customParams:[].concat((0,s.default)(e.customParams),[{id:(0,S.giveMeAKey)()}])}}))})),(0,v.default)((0,f.default)(e),"deleteCustomerParams",(function(t){var n=e.state.customParams.filter((function(e){return e.id!==t}));e.setState({customParams:n})})),(0,v.default)((0,f.default)(e),"handleCustomParam",(function(t,n){var a,r,l,o=t.target.value,u=e.props,s=u.template,c=u.form,d=u.typeCode,f=u.comp,p=e.state.customParams,m=s.type==g.CONFIG_ITEM_TYPE.GROUP,E=m?"".concat(d,".customParam.").concat(s.key):"".concat(d,".customParam"),v=null!==(a=(0,S.getValueByJson)(null==f?void 0:f.componentConfig))&&void 0!==a?a:{},T=null!==(r=c.getFieldValue("".concat(d,".specialConfig")))&&void 0!==r?r:v,h=Object.entries(T),y=-1,N=!1;(0,S.isNeedTemp)(d)?y=h.findIndex((function(e){var t=(0,i.default)(e,2),n=t[0];t[1];return n==o})):y=null===(l=m?s.values:s)||void 0===l?void 0:l.findIndex((function(e){return e.key==o&&!e.id}));for(var b=0,O=Object.entries(c.getFieldValue(E));b<O.length;b++){var _=(0,i.default)(O[b],2),P=_[0],R=_[1];if(P.startsWith("%")&&P.endsWith("-key")&&o==R){N=!0;break}}var A=p.map((function(e){return e.id==n?C(C({},e),{},{isSameKey:N||y>-1,key:o}):e}));e.setState({customParams:A})})),(0,v.default)((0,f.default)(e),"renderAddCustomParam",(function(){var t=e.props.labelCol;return h.createElement(o.default,null,h.createElement(u.default,{span:null!=t?t:y.formItemLayout.labelCol.sm.span}),h.createElement(u.default,{className:"m-card",style:{marginBottom:"20px"},span:y.formItemLayout.wrapperCol.sm.span},h.createElement("a",{onClick:function(){return e.addCustomerParams()}},"添加自定义参数")))})),e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.template,t=e.type==g.CONFIG_ITEM_TYPE.GROUP;this.setState({customParams:(0,S.getCustomerParams)(t?e.values:e)})}},{key:"render",value:function(){var e=this,t=this.props,n=t.typeCode,a=t.form,r=t.view,i=t.template,s=t.maxWidth,c=t.labelCol,d=t.wrapperCol,f=this.state.customParams,p=i.key;return 0==f.length?!r&&this.renderAddCustomParam():h.createElement(h.Fragment,null,f&&f.map((function(t){var i=p?"".concat(n,".customParam.").concat(p):"".concat(n,".customParam");return t.id&&h.createElement(o.default,{key:t.id},h.createElement(u.default,{span:null!=c?c:y.formItemLayout.labelCol.sm.span},h.createElement(O,{key:t.id+"-key"},a.getFieldDecorator("".concat(i,".%").concat(t.id,"-key"),{rules:[{required:!0,message:"请输入参数属性名"}],initialValue:t.key||""})(h.createElement(l.default,{disabled:r,style:{width:"calc(100% - 12px)"},onChange:function(n){return e.handleCustomParam(n,t.id)}})),h.createElement("span",{style:{marginLeft:2}},":"))),h.createElement(u.default,{span:null!=d?d:y.formItemLayout.wrapperCol.sm.span},h.createElement(O,{key:t.id+"-value"},a.getFieldDecorator("".concat(i,".%").concat(t.id,"-value"),{rules:[{required:!0,message:"请输入参数属性值"}],initialValue:t.value||""})(h.createElement(l.default,{disabled:r,style:{maxWidth:s?680:"unset"}})))),!r&&h.createElement("a",{className:"formItem-right-text",onClick:function(){return e.deleteCustomerParams(t.id)}},"删除"),!r&&t.isSameKey&&h.createElement("span",{className:"formItem-right-text"},"该参数已存在"))})),!r&&this.renderAddCustomParam())}}]),n}(h.PureComponent);t.default=_},s7lY:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("ma9I"),n("yXV3"),n("oVuX"),n("2B1R"),n("zKZe"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("CC+v")),o=r(n("d1El")),u=r(n("iJl9")),i=r(n("pVnL")),s=r(n("Pbn2")),c=r(n("RIqP")),d=r(n("J4zp")),f=r(n("qu0K")),p=r(n("FAat")),m=a(n("q1tI")),E=n("LvDl"),v=r(n("pYSY")),T=n("A9pX"),h=n("RzPm"),y=p.default.Option,S=f.default.Item,g=function(e){var t=e.form,n=e.form,a=n.getFieldDecorator,r=n.resetFields,g=e.visible,N=e.onOk,C=e.onCancel,b=e.title,O=e.isBindTenant,_=e.disabled,P=e.tenantInfo,R=void 0===P?{}:P,A=e.clusterId,L=e.clusterList,I=e.isBindNamespace,k=(0,m.useState)([]),D=(0,d.default)(k,2),j=D[0],M=D[1],w=(0,m.useRef)(null),F=(0,m.useState)(A),U=(0,d.default)(F,2),x=U[0],V=U[1],K=(0,T.useEnv)({clusterId:x||A,visible:g,form:t,clusterList:L}),Y=K.env,q=K.queueList;(0,m.useEffect)((function(){w.current=g,!1===g&&(r(),V(void 0))}),[g,r]);var B,H,G,Q,J,z,W=(0,E.debounce)((function(e){v.default.getFullTenants(e).then((function(e){e.success&&M(e.data||[])}))}),1e3),X=Y.hasHadoop,Z=Y.hasKubernetes,$=(B=Y.hasLibra,H=Y.hasTiDB,G=Y.hasOracle,Q=Y.hasGreenPlum,J=Y.hasPresto,z=[],z=B?[].concat((0,c.default)(z),["Libra"]):z,z=H?[].concat((0,c.default)(z),["TiDB"]):z,z=G?[].concat((0,c.default)(z),["Oracle"]):z,z=Q?[].concat((0,c.default)(z),["Greenplum"]):z,z=J?[].concat((0,c.default)(z),["Presto"]):z);return m.default.createElement(l.default,{title:b,visible:g,onOk:function(){N(function(){var t={canSubmit:!1,reqParams:{}},n=null==e?void 0:e.form,a=n.getFieldsValue,r=n.validateFields,l=a(),o=Y.hasKubernetes;return r((function(e){e||(t.canSubmit=!0,t.reqParams=l,O||(t.reqParams=Object.assign(l,{tenantId:R.tenantId})),I&&(t.reqParams=Object.assign(l,{tenantId:R.tenantId,queueId:R.queueId})),t.hasKubernetes=o)})),t}())},onCancel:C,width:"600px",className:O?"no-padding-modal":""},m.default.createElement(m.default.Fragment,null,O&&m.default.createElement("div",{className:"info-title"},m.default.createElement(s.default,{type:"info-circle",style:{color:"#2491F7"}}),m.default.createElement("span",{className:"info-text"},"将租户绑定到集群，可使用集群内的每种计算引擎，绑定后，不能切换其他集群。")),m.default.createElement(f.default,null,m.default.createElement(f.default.Item,(0,i.default)({label:"租户"},h.formItemLayout),a("tenantId",{rules:[{required:!0,message:"租户不可为空！"}],initialValue:R.tenantName||""})(m.default.createElement(p.default,{allowClear:!0,showSearch:!0,placeholder:"请搜索要绑定的租户",optionFilterProp:"title",disabled:_,onSearch:W,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},j&&j.map((function(e){return m.default.createElement(y,{key:"".concat(e.tenantId),value:"".concat(e.tenantId),title:e.tenantName},e.tenantName)}))))),m.default.createElement(f.default.Item,(0,i.default)({label:"集群"},h.formItemLayout),a("clusterId",{rules:[{required:!0,message:"集群不可为空！"}],initialValue:A||""})(m.default.createElement(p.default,{allowClear:!0,placeholder:"请选择集群",disabled:_,onChange:function(e){V(e)}},L.map((function(e){return m.default.createElement(y,{key:"".concat(e.clusterId),value:"".concat(e.clusterId)},e.clusterName)}))))),Z&&m.default.createElement("div",{className:"border-item"},m.default.createElement("div",{className:"engine-title"},"Kubernetes"),m.default.createElement(f.default.Item,(0,i.default)({label:"Namespace"},h.formItemLayout),a("namespace",{initialValue:(null==R?void 0:R.queue)||""})(m.default.createElement(u.default,null)))),X&&!Z?m.default.createElement("div",{className:"border-item"},m.default.createElement("div",{className:"engine-title"},"Hadoop"),m.default.createElement(S,(0,i.default)({label:m.default.createElement("span",null,"资源队列 ",m.default.createElement(o.default,{title:"指Yarn上分配的资源队列，若下拉列表中无全部队列，请前往“多集群管理”页面的具体集群中刷新集群"},m.default.createElement(s.default,{type:"question-circle-o"})))},h.formItemLayout),a("queueId",{rules:[{required:!0,message:"资源队列不可为空！"}],initialValue:null==R?void 0:R.tenantName})(m.default.createElement(p.default,{allowClear:!0,placeholder:"请选择资源队列"},q.map((function(e){return m.default.createElement(y,{key:"".concat(e.queueId),value:"".concat(e.queueId)},e.queueName)})))))):null,$.length>0?m.default.createElement("div",{className:"border-item"},m.default.createElement("div",{className:"engine-name"},"创建项目时，自动关联到租户的",$.join("、"),"引擎")):null)))},N=function(e,t){return(null==e?void 0:e.visible)===(null==t?void 0:t.visible)&&!0!==(null==t?void 0:t.visible)},C=f.default.create()(m.default.memo(g,N));t.default=C},tgir:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("ma9I"),n("2B1R"),n("DQNa"),n("07d7"),n("SuFq"),n("JfAA"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("h0/l")),o=r(n("4IMT")),u=r(n("9xET")),i=r(n("ZPTe")),s=r(n("lwsE")),c=r(n("W8MJ")),d=r(n("PJYZ")),f=r(n("7W2i")),p=r(n("a1gu")),m=r(n("Nsbk")),E=r(n("lSNA")),v=r(n("qPIi")),T=r(n("g4D/")),h=a(n("q1tI")),y=a(n("LvDl")),S=r(n("06UE")),g=n("LNB4"),N=n("j1Tt");function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,p.default)(this,n)}}var b=T.default.Group,O=v.default.Group,_=function(e){(0,f.default)(n,e);var t=C(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,E.default)((0,d.default)(e),"state",{visible:!1,addComps:[],deleteComps:[],initialValues:[]}),(0,E.default)((0,d.default)(e),"getInitialValues",(function(){var t=e.props.comps;return(void 0===t?[]:t).map((function(e){return null==e?void 0:e.componentTypeCode}))})),(0,E.default)((0,d.default)(e),"handleSelectValue",(function(){return e.props.comps.map((function(e){return e.componentTypeCode}))})),(0,E.default)((0,d.default)(e),"handleCheckValues",(function(t){var n=e.props.activeKey,a=e.getInitialValues();if(!(0,g.isSourceTab)(n)){var r=y.xor(t,a),l=y.intersection(r,a),o=y.union(t,a),u=y.xor(o,a);e.setState({deleteComps:l,addComps:u,initialValues:t})}})),(0,E.default)((0,d.default)(e),"handleRadioValues",(function(t){var n=e.getInitialValues();if(y.isEqual(n[0],t.target.value))e.setState({initialValues:[t.target.value]});else{var a=n,r=[];r.push(t.target.value),e.setState({deleteComps:a,addComps:r,initialValues:[t.target.value]})}})),(0,E.default)((0,d.default)(e),"renderTitle",(function(){return h.createElement("div",{className:"c-componentButton__title"},h.createElement("span",null,"组件配置"))})),(0,E.default)((0,d.default)(e),"renderContent",(function(){var t=e.props.activeKey,n=e.state.initialValues;return(0,g.isSourceTab)(t)?h.createElement(h.Fragment,null,e.renderTitle(),h.createElement(O,{className:"c-componentButton__content",defaultValue:n[0],value:n[0],onChange:e.handleRadioValues},h.createElement(u.default,null,N.CONFIG_BUTTON_TYPE[t].map((function(e){return h.createElement(i.default,{key:"".concat(e.code)},h.createElement(v.default,{value:e.code},e.componentName))}))))):h.createElement(h.Fragment,null,e.renderTitle(),h.createElement(b,{className:"c-componentButton__content",value:n,defaultValue:n,onChange:e.handleCheckValues},h.createElement(u.default,null,N.CONFIG_BUTTON_TYPE[t].map((function(e){return h.createElement(i.default,{key:"".concat(e.code)},h.createElement(T.default,{value:e.code},e.componentName))})))))})),(0,E.default)((0,d.default)(e),"handleConfirm",(function(){var t=e.state,n=t.addComps,a=t.deleteComps;e.props.handlePopVisible(!1),a.length>0?e.setState({visible:!0}):e.props.handleConfirm(n,a)})),(0,E.default)((0,d.default)(e),"handleCancel",(function(){e.setState({addComps:[],deleteComps:[],visible:!1}),e.props.handlePopVisible(!1)})),e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){this.setState({initialValues:this.getInitialValues()})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.comps,a=t.popVisible;(e.comps!=n||e.popVisible!=a&&a)&&this.setState({initialValues:this.getInitialValues()})}},{key:"render",value:function(){var e=this,t=this.state,n=t.deleteComps,a=t.addComps,r=t.visible;return h.createElement(h.Fragment,null,h.createElement(l.default,{icon:null,placement:"topRight",title:this.renderContent(),onConfirm:this.handleConfirm,onCancel:this.handleCancel},h.createElement(o.default,{className:"c-editCluster__componentButton",onClick:function(){return e.props.handlePopVisible()}},h.createElement("i",{className:"iconfont iconzujianpeizhi",style:{marginRight:2}}),"组件配置")),h.createElement(S.default,{visible:r,addComps:a,deleteComps:n,onCancel:this.handleCancel,onOk:function(){e.setState({visible:!1}),e.props.handleConfirm(a,n)}}))}}]),n}(h.Component);t.default=_},vNIf:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("DQNa"),n("07d7"),n("SuFq"),n("JfAA"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=r(n("vgIT")),o=r(n("pVnL")),u=r(n("lwsE")),i=r(n("W8MJ")),s=r(n("7W2i")),c=r(n("a1gu")),d=r(n("Nsbk")),f=a(n("q1tI")),p=n("dtw8"),m=n("/MKj"),E=r(n("+Gva"));n("m2I1"),n("TVWj"),n("+5i3");var v=r(n("Efuq"));function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var h=function(e){(0,s.default)(n,e);var t=T(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"render",value:function(){var e=this.props,t=e.store,n=e.history;return f.createElement(l.default,{locale:E.default},f.createElement(m.Provider,{store:t},f.createElement(p.Router,(0,o.default)({routes:v.default,history:n,key:Math.random()},{onEnter:function(){}}))))}}]),n}(f.Component);t.default=h},zqmc:function(e,t,n){"use strict";var a=n("284h"),r=n("TqRt");n("pNMO"),n("ma9I"),n("TeQF"),n("fbCW"),n("QWBl"),n("J30X"),n("2B1R"),n("E9XD"),n("DQNa"),n("wLYn"),n("zKZe"),n("HRxU"),n("eoL8"),n("5DmW"),n("27RR"),n("tkto"),n("07d7"),n("SuFq"),n("JfAA"),n("FZtP"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RedTxt=void 0;var l=r(n("N9UN")),o=r(n("DtFj")),u=r(n("4IMT")),i=r(n("o0o1")),s=r(n("QpBz"));n("ls82");var c=r(n("yXPU")),d=r(n("CC+v")),f=r(n("lwsE")),p=r(n("W8MJ")),m=r(n("PJYZ")),E=r(n("7W2i")),v=r(n("a1gu")),T=r(n("Nsbk")),h=r(n("lSNA")),y=r(n("VkAN")),S=r(n("FAat")),g=a(n("q1tI")),N=r(n("9ObM")),C=r(n("RHHV"));n("+5i3");var b=n("RzPm");function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,h.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,T.default)(e);if(t){var r=(0,T.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,v.default)(this,n)}}function R(){var e=(0,y.default)(["\n    color: #FF5F5C;\n"]);return R=function(){return e},e}var A=S.default.Option,L=N.default.span(R());t.RedTxt=L;var I=function(e){(0,E.default)(n,e);var t=P(n);function n(){var e;(0,f.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,h.default)((0,m.default)(e),"state",{dataSource:[],table:{loading:!1},clusterList:[],clusterId:void 0,clusterMap:{},nodeList:[],node:void 0,isShowResource:!1,editModalKey:null}),(0,h.default)((0,m.default)(e),"onTableChange",(function(t,n,a){var r=Object.assign(e.state.table,{pageIndex:t.current});e.setState({table:r},(function(){e.getClusterDetail()}))})),(0,h.default)((0,m.default)(e),"handleKillAll",(function(t){e.setState({isShowAllKill:!0,isKillAllTasks:!0})})),(0,h.default)((0,m.default)(e),"getClusterItem",(function(t){var n=e.state.clusterList;return(void 0===n?[]:n).find((function(e){return e.id===t}))})),e}return(0,p.default)(n,[{key:"componentDidMount",value:function(){this.getClusterSelect()}},{key:"getClusterDetail",value:function(){var e=this,t=this.state,n=t.table,a=t.node,r=this.state.clusterId,l=this.getClusterItem(r);l&&(this.setState({table:_(_({},n),{},{loading:!0})}),C.default.getClusterDetail({clusterName:l.clusterName,nodeAddress:a}).then((function(t){if(1==t.code){var a=t.data;e.setState({dataSource:a||[],table:_(_({},n),{},{loading:!1})})}else e.setState({table:_(_({},n),{},{loading:!1})})})))}},{key:"getClusterSelect",value:function(){var e=this;return C.default.getAllCluster().then((function(t){if(1==t.code){var n=t.data,a={},r=[];Array.isArray(n)&&(a=n.reduce((function(e,t){return _(_({},e),{},(0,h.default)({},t.id,t.clusterName))}),{}),r=n.map((function(e){return _(_({},e),{},{id:e.id+""})}))),e.setState({clusterList:r,clusterMap:a,clusterId:n&&n[0]&&n[0].id+""},(function(){e.getNodeAddressSelect()}))}}))}},{key:"getClusterOptionView",value:function(){return this.state.clusterList.map((function(e,t){return g.createElement(A,{key:e.id,value:"".concat(e.id),"data-item":e},e.clusterName)}))}},{key:"clusterOptionChange",value:function(e){this.setState({clusterId:e},this.getClusterDetail)}},{key:"getNodeAddressSelect",value:function(){var e=this;return C.default.getNodeAddressSelect().then((function(t){if(1==t.code){var n=t.data;e.setState({nodeList:n||[]},e.getClusterDetail.bind(e))}}))}},{key:"getNodeAddressOptionView",value:function(){return this.state.nodeList.map((function(e,t){return g.createElement(A,{key:t,value:e},e)}))}},{key:"nodeAddressOptionChange",value:function(e){this.setState({node:e},this.getClusterDetail.bind(this))}},{key:"handleClickResource",value:function(){this.setState({isShowResource:!0,editModalKey:Math.random()})}},{key:"handleCloseResource",value:function(){this.setState({isShowResource:!1})}},{key:"viewDetails",value:function(e,t){var n=this.state,a=n.clusterId,r=n.node,l=this.getClusterItem(a);this.props.router.push({pathname:"/console/queueManage/detail",query:{node:r,jobStage:t,clusterName:l.clusterName,engineType:e.engineType,jobResource:e.jobResource}})}},{key:"onKillAllTask",value:function(e){var t=this.state.node,n=this;d.default.confirm({title:"杀死全部",okText:"杀死全部",okType:"danger",cancelText:"取消",width:"460px",iconType:"close-circle",content:g.createElement("div",{style:{fontSize:"14px"}},g.createElement("p",null,"杀死所有",g.createElement(L,null,"队列中、已存储、等待重试、等待资源"),"的任务"),g.createElement("p",null,g.createElement(L,null,"运行中的任务不会被杀死"),"，可点击运行中的任务，并执行批量杀死操作")),onOk:function(){return(0,c.default)(i.default.mark((function a(){return i.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,C.default.killAllTask({jobResource:e.jobResource,nodeAddress:t});case 2:1===a.sent.code&&(s.default.success("杀死全部成功！"),n.getClusterDetail());case 4:case"end":return a.stop()}}),a)})))()},onCancel:function(){}})}},{key:"initTableColumns",value:function(){var e=this,t=function(t,n,a){return g.createElement("a",{onClick:e.viewDetails.bind(e,n,a)},t||0)};return[{title:"计算类型",dataIndex:"jobResource",render:function(e,n){return t(e,n,b.JobStage.Queueing)}},{title:"队列中(等待时长)",width:220,dataIndex:"priorityJobSize",render:function(e,n){var a=e+(n.priorityWaitTime?" (".concat(n.priorityWaitTime,")"):"");return t(a,n,b.JobStage.Queueing)}},{title:"已存储",dataIndex:"dbJobSize",render:function(e,n){return t(e,n,b.JobStage.Saved)}},{title:"等待重试",dataIndex:"restartJobSize",render:function(e,n){return t(e,n,b.JobStage.WaitTry)}},{title:"等待资源",dataIndex:"lackingJobSize",render:function(e,n){return t(e,n,b.JobStage.WaitResource)}},{title:"运行中",dataIndex:"submittedJobSize",render:function(e,n){return t(e,n,b.JobStage.Running)}},{title:"操作",dataIndex:"deal",render:function(t,n){return g.createElement("div",null,g.createElement("a",{onClick:e.onKillAllTask.bind(e,n)},"杀死全部"))}}]}},{key:"render",value:function(){var e=this.initTableColumns(),t=this.state,n=t.dataSource,a=t.table,r=t.clusterId,i=t.node,s=a.loading;return g.createElement("div",{className:" api-mine nobackground m-card height-auto",style:{marginTop:"20px"}},g.createElement("div",{style:{margin:"20px"}},"集群：",g.createElement(S.default,{className:"dt-form-shadow-bg",style:{width:150,marginRight:"10px"},placeholder:"选择集群",onChange:this.clusterOptionChange.bind(this),value:r},this.getClusterOptionView()),"节点：",g.createElement(S.default,{className:"dt-form-shadow-bg",style:{width:150},placeholder:"选择节点",allowClear:!0,onChange:this.nodeAddressOptionChange.bind(this),value:i},this.getNodeAddressOptionView()),g.createElement("div",{style:{float:"right"}},g.createElement(u.default,{size:"large",style:{marginLeft:"8px"},onClick:this.getClusterDetail.bind(this)},"刷新"))),g.createElement(l.default,{style:{marginTop:"0px"},className:"box-1",hoverable:!0},g.createElement(o.default,{rowKey:function(e){return e.clusterId},className:"dt-table-border",loading:s,columns:e,dataSource:n,onChange:this.onTableChange})))}}]),n}(g.Component);t.default=I}},[["pLYI",4,2,5]]])}));